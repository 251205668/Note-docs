<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vueå…¨å®¶æ¡¶å¼€å‘éŸ³ä¹app | å‰ç«¯é¢è¯•çŸ¥è¯†æ€»ç»“</title>
    <meta name="description" content="è‡ªå®¶ä½¿ç”¨,æš‚ä¸å¤–ä¼ ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.6a4803ab.css" as="style"><link rel="preload" href="/assets/js/app.81dd3622.js" as="script"><link rel="preload" href="/assets/js/2.d1b1e148.js" as="script"><link rel="preload" href="/assets/js/3.103e70cb.js" as="script"><link rel="preload" href="/assets/js/4.a3faee54.js" as="script"><link rel="prefetch" href="/assets/js/10.42124fbe.js"><link rel="prefetch" href="/assets/js/11.bdef2e64.js"><link rel="prefetch" href="/assets/js/12.9c5e83ed.js"><link rel="prefetch" href="/assets/js/13.3db43aaf.js"><link rel="prefetch" href="/assets/js/14.8f2ec86d.js"><link rel="prefetch" href="/assets/js/15.c6286125.js"><link rel="prefetch" href="/assets/js/16.5da2b31d.js"><link rel="prefetch" href="/assets/js/17.c9deef07.js"><link rel="prefetch" href="/assets/js/18.13ed30af.js"><link rel="prefetch" href="/assets/js/19.f1a01180.js"><link rel="prefetch" href="/assets/js/20.30f7288c.js"><link rel="prefetch" href="/assets/js/21.477730e4.js"><link rel="prefetch" href="/assets/js/22.ab119ff1.js"><link rel="prefetch" href="/assets/js/23.9bbc22fc.js"><link rel="prefetch" href="/assets/js/24.cb1899b8.js"><link rel="prefetch" href="/assets/js/25.64669f1d.js"><link rel="prefetch" href="/assets/js/26.f3040183.js"><link rel="prefetch" href="/assets/js/27.2938dd4c.js"><link rel="prefetch" href="/assets/js/28.cd87026d.js"><link rel="prefetch" href="/assets/js/29.b92287f4.js"><link rel="prefetch" href="/assets/js/30.af43d48f.js"><link rel="prefetch" href="/assets/js/31.8c7148f5.js"><link rel="prefetch" href="/assets/js/32.d42beb3f.js"><link rel="prefetch" href="/assets/js/33.223bba8e.js"><link rel="prefetch" href="/assets/js/34.04b12083.js"><link rel="prefetch" href="/assets/js/35.19c65fa0.js"><link rel="prefetch" href="/assets/js/36.a1a664b9.js"><link rel="prefetch" href="/assets/js/37.d2e7a2dd.js"><link rel="prefetch" href="/assets/js/38.4f737159.js"><link rel="prefetch" href="/assets/js/39.fcdeadea.js"><link rel="prefetch" href="/assets/js/40.40a9daf9.js"><link rel="prefetch" href="/assets/js/5.2f32d917.js"><link rel="prefetch" href="/assets/js/6.d92ecc16.js"><link rel="prefetch" href="/assets/js/7.a09f8ef2.js"><link rel="prefetch" href="/assets/js/8.5b00daa2.js"><link rel="prefetch" href="/assets/js/9.9d06f44a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6a4803ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å‰ç«¯é¢è¯•çŸ¥è¯†æ€»ç»“</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><span class="title">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  å¤§å‹ç”µå•†
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link router-link-exact-active router-link-active">
  vueå®ç°éŸ³ä¹app
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><span class="title">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  å¤§å‹ç”µå•†
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link router-link-exact-active router-link-active">
  vueå®ç°éŸ³ä¹app
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Music Webapp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/music/" class="active sidebar-link">vueå…¨å®¶æ¡¶å¼€å‘éŸ³ä¹app</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project/music/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project/music/#é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯" class="sidebar-link">é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯</a></li><li class="sidebar-sub-header"><a href="/project/music/#é¡¹ç›®åŸºæœ¬ç›®å½•" class="sidebar-link">é¡¹ç›®åŸºæœ¬ç›®å½•</a></li><li class="sidebar-sub-header"><a href="/project/music/#é¡¹ç›®å¼€å‘åŸºæœ¬æµç¨‹" class="sidebar-link">é¡¹ç›®å¼€å‘åŸºæœ¬æµç¨‹</a></li><li class="sidebar-sub-header"><a href="/project/music/#è¯¥é¡¹ç›®åŒ…å«åˆ°çš„åŸºæœ¬ç»„ä»¶åº“" class="sidebar-link">è¯¥é¡¹ç›®åŒ…å«åˆ°çš„åŸºæœ¬ç»„ä»¶åº“</a></li></ul></li><li class="sidebar-sub-header"><a href="/project/music/#åˆå§‹åŒ–é¡¹ç›®" class="sidebar-link">åˆå§‹åŒ–é¡¹ç›®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project/music/#åˆ›å»ºé¡¹ç›®" class="sidebar-link">åˆ›å»ºé¡¹ç›®</a></li><li class="sidebar-sub-header"><a href="/project/music/#åˆå§‹åŒ–" class="sidebar-link">åˆå§‹åŒ–</a></li><li class="sidebar-sub-header"><a href="/project/music/#é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„æ’ä»¶" class="sidebar-link">é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/project/music/#è·¯ç”±é…ç½®" class="sidebar-link">è·¯ç”±é…ç½®</a></li></ul></li><li class="sidebar-sub-header"><a href="/project/music/#å¼€å‘" class="sidebar-link">å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project/music/#headerç»„ä»¶" class="sidebar-link">Headerç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/project/music/#tabç»„ä»¶" class="sidebar-link">Tabç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/project/music/#recommendé¡µé¢" class="sidebar-link">Recommendé¡µé¢</a></li><li class="sidebar-sub-header"><a href="/project/music/#æ¨èæ­Œå•é¡µé¢" class="sidebar-link">æ¨èæ­Œå•é¡µé¢</a></li><li class="sidebar-sub-header"><a href="/project/music/#singerç»„ä»¶" class="sidebar-link">singerç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/project/music/#å®ç°åˆ—è¡¨å’Œç´¢å¼•è¡¨" class="sidebar-link">å®ç°åˆ—è¡¨å’Œç´¢å¼•è¡¨</a></li><li class="sidebar-sub-header"><a href="/project/music/#ç´¢å¼•åˆ—è¡¨è”åŠ¨å®ç°" class="sidebar-link">ç´¢å¼•åˆ—è¡¨è”åŠ¨å®ç°</a></li><li class="sidebar-sub-header"><a href="/project/music/#æ­Œæ‰‹è¯¦æƒ…é¡µ" class="sidebar-link">æ­Œæ‰‹è¯¦æƒ…é¡µ</a></li><li class="sidebar-sub-header"><a href="/project/music/#æ’­æ”¾å™¨ç»„ä»¶" class="sidebar-link">æ’­æ”¾å™¨ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/project/music/#ğŸ’™æ’­æ”¾å™¨éƒ¨åˆ†" class="sidebar-link">ğŸ’™æ’­æ”¾å™¨éƒ¨åˆ†</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vueå…¨å®¶æ¡¶å¼€å‘éŸ³ä¹app"><a href="#vueå…¨å®¶æ¡¶å¼€å‘éŸ³ä¹app" class="header-anchor">#</a> vueå…¨å®¶æ¡¶å¼€å‘éŸ³ä¹app</h1> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p><a href="https://github.com/vuejs/vue" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/vue-2.6.10-brightgreen.svg" alt="vue"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/ElemeFE/element" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/element--ui-2.7.0-brightgreen.svg" alt="element-ui"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://music.yangxainsheng.top" target="_blank" rel="noopener noreferrer">é¡¹ç›®ä½“éªŒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>é¡¹ç›®æ˜¯ç”¨vuecli 2.9æ„å»º ç”¨vuecli 3.xçš„ç”¨æˆ·è‡ªè¡Œé‡æ„éƒ¨åˆ†ä»£ç </p></div> <h3 id="é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯"><a href="#é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯" class="header-anchor">#</a> é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯</h3> <div class="language-markdown extra-class"><pre class="language-markdown"><code>MVVMæ¡†æ¶ï¼šVue.js ï¼ˆç‰ˆæœ¬2.xï¼‰
çŠ¶æ€ç®¡ç†ï¼šVuex
å‰ç«¯è·¯ç”±ï¼šVue Router
æœåŠ¡ç«¯é€šè®¯ï¼šaxiosã€jsonp
ç§»åŠ¨ç«¯æ»šåŠ¨åº“ï¼šbetter-scroll
æ„å»ºå·¥å…·ï¼šwebpack 2.0
æºç ï¼šes6
</code></pre></div><h3 id="é¡¹ç›®åŸºæœ¬ç›®å½•"><a href="#é¡¹ç›®åŸºæœ¬ç›®å½•" class="header-anchor">#</a> é¡¹ç›®åŸºæœ¬ç›®å½•</h3> <div class="language- extra-class"><pre class="language-text"><code> .
â”œâ”€â”€ README.md
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ build.js
â”‚   â”œâ”€â”€ check-versions.js
â”‚   â”œâ”€â”€ dev-client.js
â”‚   â”œâ”€â”€ dev-server.js
â”‚   â”œâ”€â”€ utils.js
â”‚   â”œâ”€â”€ vue-loader.conf.js
â”‚   â”œâ”€â”€ webpack.base.conf.js
â”‚   â”œâ”€â”€ webpack.dev.conf.js
â”‚   â””â”€â”€ webpack.prod.conf.js
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ dev.env.js
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ prod.env.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ prod.server.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ config.js
â”‚   â”‚   â”œâ”€â”€ rank.js
â”‚   â”‚   â”œâ”€â”€ recommend.js
â”‚   â”‚   â”œâ”€â”€ search.js
â”‚   â”‚   â”œâ”€â”€ singer.js
â”‚   â”‚   â””â”€â”€ song.js
â”‚   â”œâ”€â”€ base
â”‚   â”‚   â”œâ”€â”€ confirm
â”‚   â”‚   â”‚   â””â”€â”€ confirm.vue
â”‚   â”‚   â”œâ”€â”€ listview
â”‚   â”‚   â”‚   â””â”€â”€ listview.vue
â”‚   â”‚   â”œâ”€â”€ loading
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.gif
â”‚   â”‚   â”‚   â””â”€â”€ loading.vue
â”‚   â”‚   â”œâ”€â”€ no-result
â”‚   â”‚   â”‚   â”œâ”€â”€ no-result.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ no-result@2x.png
â”‚   â”‚   â”‚   â””â”€â”€ no-result@3x.png
â”‚   â”‚   â”œâ”€â”€ progress-bar
â”‚   â”‚   â”‚   â””â”€â”€ progress-bar.vue
â”‚   â”‚   â”œâ”€â”€ progress-circle
â”‚   â”‚   â”‚   â””â”€â”€ progress-circle.vue
â”‚   â”‚   â”œâ”€â”€ scroll
â”‚   â”‚   â”‚   â””â”€â”€ scroll.vue
â”‚   â”‚   â”œâ”€â”€ search-box
â”‚   â”‚   â”‚   â””â”€â”€ search-box.vue
â”‚   â”‚   â”œâ”€â”€ search-list
â”‚   â”‚   â”‚   â””â”€â”€ search-list.vue
â”‚   â”‚   â”œâ”€â”€ slider
â”‚   â”‚   â”‚   â””â”€â”€ slider.vue
â”‚   â”‚   â”œâ”€â”€ song-list
â”‚   â”‚   â”‚   â”œâ”€â”€ first@2x.png
â”‚   â”‚   â”‚   â”œâ”€â”€ first@3x.png
â”‚   â”‚   â”‚   â”œâ”€â”€ second@2x.png
â”‚   â”‚   â”‚   â”œâ”€â”€ second@3x.png
â”‚   â”‚   â”‚   â”œâ”€â”€ song-list.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ third@2x.png
â”‚   â”‚   â”‚   â””â”€â”€ third@3x.png
â”‚   â”‚   â”œâ”€â”€ switches
â”‚   â”‚   â”‚   â””â”€â”€ switches.vue
â”‚   â”‚   â””â”€â”€ top-tip
â”‚   â”‚       â””â”€â”€ top-tip.vue
â”‚   â”œâ”€â”€ common
â”‚   â”‚   â”œâ”€â”€ fonts
â”‚   â”‚   â”‚   â”œâ”€â”€ music-icon.eot
â”‚   â”‚   â”‚   â”œâ”€â”€ music-icon.svg
â”‚   â”‚   â”‚   â”œâ”€â”€ music-icon.ttf
â”‚   â”‚   â”‚   â””â”€â”€ music-icon.woff
â”‚   â”‚   â”œâ”€â”€ image
â”‚   â”‚   â”‚   â””â”€â”€ default.png
â”‚   â”‚   â”œâ”€â”€ js
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.js
â”‚   â”‚   â”‚   â”œâ”€â”€ config.js
â”‚   â”‚   â”‚   â”œâ”€â”€ dom.js
â”‚   â”‚   â”‚   â”œâ”€â”€ jsonp.js
â”‚   â”‚   â”‚   â”œâ”€â”€ mixin.js
â”‚   â”‚   â”‚   â”œâ”€â”€ singer.js
â”‚   â”‚   â”‚   â”œâ”€â”€ song.js
â”‚   â”‚   â”‚   â””â”€â”€ util.js
â”‚   â”‚   â””â”€â”€ stylus
â”‚   â”‚       â”œâ”€â”€ base.styl
â”‚   â”‚       â”œâ”€â”€ icon.styl
â”‚   â”‚       â”œâ”€â”€ index.styl
â”‚   â”‚       â”œâ”€â”€ mixin.styl
â”‚   â”‚       â”œâ”€â”€ reset.styl
â”‚   â”‚       â””â”€â”€ variable.styl
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ add-song
â”‚   â”‚   â”‚   â””â”€â”€ add-song.vue
â”‚   â”‚   â”œâ”€â”€ disc
â”‚   â”‚   â”‚   â””â”€â”€ disc.vue
â”‚   â”‚   â”œâ”€â”€ m-header
â”‚   â”‚   â”‚   â”œâ”€â”€ logo@2x.png
â”‚   â”‚   â”‚   â”œâ”€â”€ logo@3x.png
â”‚   â”‚   â”‚   â””â”€â”€ m-header.vue
â”‚   â”‚   â”œâ”€â”€ music-list
â”‚   â”‚   â”‚   â””â”€â”€ music-list.vue
â”‚   â”‚   â”œâ”€â”€ player
â”‚   â”‚   â”‚   â””â”€â”€ player.vue
â”‚   â”‚   â”œâ”€â”€ playlist
â”‚   â”‚   â”‚   â””â”€â”€ playlist.vue
â”‚   â”‚   â”œâ”€â”€ rank
â”‚   â”‚   â”‚   â””â”€â”€ rank.vue
â”‚   â”‚   â”œâ”€â”€ recommend
â”‚   â”‚   â”‚   â””â”€â”€ recommend.vue
â”‚   â”‚   â”œâ”€â”€ search
â”‚   â”‚   â”‚   â””â”€â”€ search.vue
â”‚   â”‚   â”œâ”€â”€ singer
â”‚   â”‚   â”‚   â””â”€â”€ singer.vue
â”‚   â”‚   â”œâ”€â”€ singer-detail
â”‚   â”‚   â”‚   â””â”€â”€ singer-detail.vue
â”‚   â”‚   â”œâ”€â”€ suggest
â”‚   â”‚   â”‚   â””â”€â”€ suggest.vue
â”‚   â”‚   â”œâ”€â”€ tab
â”‚   â”‚   â”‚   â””â”€â”€ tab.vue
â”‚   â”‚   â”œâ”€â”€ top-list
â”‚   â”‚   â”‚   â””â”€â”€ top-list.vue
â”‚   â”‚   â””â”€â”€ user-center
â”‚   â”‚       â””â”€â”€ user-center.vue
â”‚   â”œâ”€â”€ main.js
â”‚   â”œâ”€â”€ router
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â””â”€â”€ store
â”‚       â”œâ”€â”€ actions.js
â”‚       â”œâ”€â”€ getters.js
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ mutation-types.js
â”‚       â”œâ”€â”€ mutations.js
â”‚       â””â”€â”€ state.js
â””â”€â”€ static
    â”œâ”€â”€ 1.png
    â”œâ”€â”€ 2.png
    â”œâ”€â”€ 3.png
    â”œâ”€â”€ 4.png
    â””â”€â”€ 5.png


</code></pre></div><h3 id="é¡¹ç›®å¼€å‘åŸºæœ¬æµç¨‹"><a href="#é¡¹ç›®å¼€å‘åŸºæœ¬æµç¨‹" class="header-anchor">#</a> é¡¹ç›®å¼€å‘åŸºæœ¬æµç¨‹</h3> <p><img src="/assets/img/2019-11-11-20-41-17.cd5ad9a4.png" alt=""></p> <h3 id="è¯¥é¡¹ç›®åŒ…å«åˆ°çš„åŸºæœ¬ç»„ä»¶åº“"><a href="#è¯¥é¡¹ç›®åŒ…å«åˆ°çš„åŸºæœ¬ç»„ä»¶åº“" class="header-anchor">#</a> è¯¥é¡¹ç›®åŒ…å«åˆ°çš„åŸºæœ¬ç»„ä»¶åº“</h3> <p><strong>åŸºç¡€ç»„ä»¶</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>.confirmï¼šç¡®è®¤å¯¹è¯æ¡†ç»„ä»¶
<span class="token number">2</span>.listviewï¼šé€šè®¯å½•åˆ—è¡¨ç»„ä»¶
<span class="token number">3</span>.loadingï¼šåŠ è½½æ€ç»„ä»¶
<span class="token number">4</span>.no-resultï¼šæ— ç»“æœå±•ç¤ºç»„ä»¶
<span class="token number">5</span>.progress-barï¼šè¿›åº¦æ¡ç»„ä»¶
<span class="token number">6</span>.progress-circleï¼šåœ†å½¢è¿›åº¦æ¡ç»„ä»¶
<span class="token number">7</span>.scrollï¼šç§»åŠ¨ç«¯æ»šåŠ¨ç»„ä»¶
<span class="token number">8</span>.search-boxï¼šæœç´¢æ¡†ç»„ä»¶
<span class="token number">9</span>.search-listï¼šæœç´¢åˆ—è¡¨ç»„ä»¶
<span class="token number">10</span>.sliderï¼šè½®æ’­å›¾ç»„ä»¶
<span class="token number">11</span>.switchesï¼šå¼€å…³åˆ‡æ¢ç»„ä»¶
<span class="token number">12</span>.top-tipï¼šé¡¶éƒ¨æ¶ˆæ¯æç¤ºç»„ä»¶
<span class="token number">1</span>.  song-listï¼šæ­Œæ›²åˆ—è¡¨ç»„ä»¶
</code></pre></div><p><strong>ä¸šåŠ¡ç»„ä»¶</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>.add-songï¼šæ·»åŠ æ­Œæ›²åˆ°åˆ—è¡¨ç»„ä»¶
<span class="token number">2</span>.discï¼šæ­Œå•è¯¦æƒ…é¡µç»„ä»¶
<span class="token number">3</span>.m-headerï¼šé¡µé¢å¤´éƒ¨ç»„ä»¶
<span class="token number">4</span>.music-listï¼šæ­Œæ›²åˆ—è¡¨é¡µé¢ç»„ä»¶
<span class="token number">5</span>.playerï¼šæ’­æ”¾å™¨å†…æ ¸ç»„ä»¶
<span class="token number">6</span>.playlistï¼šæ’­æ”¾åˆ—è¡¨ç»„ä»¶
<span class="token number">7</span>.rankï¼šæ’è¡Œæ¦œé¡µé¢ç»„ä»¶
<span class="token number">8</span>.recommendï¼šæ¨èé¡µé¢ç»„ä»¶
<span class="token number">9</span>.searchï¼šæœç´¢é¡µé¢ç»„ä»¶
<span class="token number">10</span>.singerï¼šæ­Œæ‰‹é¡µé¢ç»„ä»¶
<span class="token number">11</span>.singer-detailï¼šæ­Œæ‰‹è¯¦æƒ…é¡µç»„ä»¶
<span class="token number">12</span>.suggestï¼šæœç´¢æç¤ºåˆ—è¡¨ç»„ä»¶
<span class="token number">13</span>.tabï¼šé¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶
<span class="token number">14</span>.top-listï¼šæ’è¡Œæ¦œè¯¦æƒ…é¡µç»„ä»¶
<span class="token number">15</span>.user-centerï¼šç”¨æˆ·ä¸­å¿ƒé¡µç»„ä»¶
</code></pre></div><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="header-anchor">#</a> åˆå§‹åŒ–é¡¹ç›®</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>å†å¼€å§‹å¼€å‘é¡¹ç›®ä¹‹å‰ï¼Œä½ å¿…é¡»è¦åˆ›å»ºé¡¹ç›®ï¼Œå¹¶ä¸”å®‰è£…å¥½å¼€å‘è¦ç”¨çš„ä¾èµ– æ’ä»¶ç­‰</p></div> <h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="header-anchor">#</a> åˆ›å»ºé¡¹ç›®</h3> <ul><li>åˆ›å»ºé¡¹ç›®</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ vue init webpack XXXX
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>vuecli3 å¼€å‘ vue create XXXX</p></div> <h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="header-anchor">#</a> åˆå§‹åŒ–</h3> <ul><li>è®¾è®¡ç›®å½•ç»“æ„
<img src="/assets/img/2019-11-11-20-51-06.16a9ea53.png" alt=""></li> <li>ç§»åŠ¨ç«¯åˆå§‹åŒ–ç¼©æ”¾</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1.0 minimum-scale=1.0 maximum-scale=1.0 user-scalable=no<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>åˆå§‹åŒ–æ ·å¼ å¹¶ä¸”å†™å¥½é¡¹ç›®è¦ç”¨åˆ°çš„<strong>icon æ ·å¼</strong> å…¨å±€æ ·å¼ èƒŒæ™¯å›¾è°ƒç”¨æ ·å¼ ç­‰<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>æ ·å¼å’Œå­—ä½“å›¾æ ‡çš„ svg æ–‡ä»¶å»ºè®®æ”¾åœ¨ common é‡Œé¢</p></div> <img src="/assets/img/2019-11-11-20-56-47.ed99b53d.png" alt=""> <br>
reset.styl</li></ul> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">/**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */</span>
<span class="token selector">html<span class="token punctuation">,</span> body<span class="token punctuation">,</span> div<span class="token punctuation">,</span> span<span class="token punctuation">,</span> applet<span class="token punctuation">,</span> object<span class="token punctuation">,</span> iframe<span class="token punctuation">,</span>
h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">,</span> p<span class="token punctuation">,</span> blockquote<span class="token punctuation">,</span> pre<span class="token punctuation">,</span>
a<span class="token punctuation">,</span> abbr<span class="token punctuation">,</span> acronym<span class="token punctuation">,</span> address<span class="token punctuation">,</span> big<span class="token punctuation">,</span> cite<span class="token punctuation">,</span> code<span class="token punctuation">,</span>
del<span class="token punctuation">,</span> dfn<span class="token punctuation">,</span> em<span class="token punctuation">,</span> img<span class="token punctuation">,</span> ins<span class="token punctuation">,</span> kbd<span class="token punctuation">,</span> q<span class="token punctuation">,</span> s<span class="token punctuation">,</span> samp<span class="token punctuation">,</span>
small<span class="token punctuation">,</span> strike<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> sub<span class="token punctuation">,</span> sup<span class="token punctuation">,</span> tt<span class="token punctuation">,</span> var<span class="token punctuation">,</span>
b<span class="token punctuation">,</span> u<span class="token punctuation">,</span> i<span class="token punctuation">,</span> center<span class="token punctuation">,</span>
dl<span class="token punctuation">,</span> dt<span class="token punctuation">,</span> dd<span class="token punctuation">,</span> ol<span class="token punctuation">,</span> ul<span class="token punctuation">,</span> li<span class="token punctuation">,</span>
fieldset<span class="token punctuation">,</span> form<span class="token punctuation">,</span> label<span class="token punctuation">,</span> legend<span class="token punctuation">,</span>
table<span class="token punctuation">,</span> caption<span class="token punctuation">,</span> tbody<span class="token punctuation">,</span> tfoot<span class="token punctuation">,</span> thead<span class="token punctuation">,</span> tr<span class="token punctuation">,</span> th<span class="token punctuation">,</span> td<span class="token punctuation">,</span>
article<span class="token punctuation">,</span> aside<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> details<span class="token punctuation">,</span> embed<span class="token punctuation">,</span>
figure<span class="token punctuation">,</span> figcaption<span class="token punctuation">,</span> footer<span class="token punctuation">,</span> header<span class="token punctuation">,</span>
menu<span class="token punctuation">,</span> nav<span class="token punctuation">,</span> output<span class="token punctuation">,</span> ruby<span class="token punctuation">,</span> section<span class="token punctuation">,</span> summary<span class="token punctuation">,</span>
time<span class="token punctuation">,</span> mark<span class="token punctuation">,</span> audio<span class="token punctuation">,</span> video<span class="token punctuation">,</span> input</span>
  <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
  <span class="token property-declaration"><span class="token property">font-weight</span><span class="token punctuation">:</span> normal</span>
  <span class="token property-declaration"><span class="token property">vertical-align</span><span class="token punctuation">:</span> baseline</span>

<span class="token comment">/* HTML5 display-role reset for older browsers */</span>
<span class="token selector">article<span class="token punctuation">,</span> aside<span class="token punctuation">,</span> details<span class="token punctuation">,</span> figcaption<span class="token punctuation">,</span> figure<span class="token punctuation">,</span>
footer<span class="token punctuation">,</span> header<span class="token punctuation">,</span> menu<span class="token punctuation">,</span> nav<span class="token punctuation">,</span> section</span>
  <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> block</span>

<span class="token selector">body</span>
  <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1</span></span>

<span class="token selector">blockquote<span class="token punctuation">,</span> q</span>
  <span class="token property-declaration"><span class="token property">quotes</span><span class="token punctuation">:</span> none</span>

<span class="token selector">blockquote:before<span class="token punctuation">,</span> blockquote:after<span class="token punctuation">,</span>
q:before<span class="token punctuation">,</span> q:after</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> none</span>

<span class="token selector">table</span>
  <span class="token property-declaration"><span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse</span>
  <span class="token property-declaration"><span class="token property">border-spacing</span><span class="token punctuation">:</span> <span class="token number">0</span></span>

<span class="token comment">/* custom */</span>

<span class="token selector">a</span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> #<span class="token hexcode">#7e8c8d</span></span>
  <span class="token property-declaration"><span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden</span>
  <span class="token property-declaration"><span class="token property">text-decoration</span><span class="token punctuation">:</span> none</span>

<span class="token selector">li</span>
  <span class="token property-declaration"><span class="token property">list-style</span><span class="token punctuation">:</span> none</span>

<span class="token selector">body</span>
  <span class="token property-declaration"><span class="token property">-webkit-text-size-adjust</span><span class="token punctuation">:</span> none</span>
  <span class="token property-declaration"><span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>

</code></pre></div><p>icon.styl</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token atrule-declaration"><span class="token atrule">@font-face</span></span>
  <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'music-icon'</span></span>
  <span class="token property-declaration"><span class="token property">src</span><span class="token punctuation">:</span> <span class="token url">url('../fonts/music-icon.eot?2qevqt')</span></span>
  src<span class="token punctuation">:</span> <span class="token func"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'../fonts/music-icon.eot?2qevqt##iefix'</span><span class="token punctuation">)</span> format<span class="token punctuation">(</span><span class="token string">'embedded-opentype'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
          <span class="token func"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'../fonts/music-icon.ttf?2qevqt'</span><span class="token punctuation">)</span> format<span class="token punctuation">(</span><span class="token string">'truetype'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
          <span class="token func"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'../fonts/music-icon.woff?2qevqt'</span><span class="token punctuation">)</span> format<span class="token punctuation">(</span><span class="token string">'woff'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
          <span class="token func"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'../fonts/music-icon.svg?2qevqt##music-icon'</span><span class="token punctuation">)</span> format<span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span></span>
  <span class="token property-declaration"><span class="token property">font-weight</span><span class="token punctuation">:</span> normal</span>
  <span class="token property-declaration"><span class="token property">font-style</span><span class="token punctuation">:</span> normal</span>

<span class="token selector">[class^=&quot;icon-&quot;]<span class="token punctuation">,</span> [class*=&quot; icon-&quot;]</span>
  <span class="token comment">/* use !important to prevent issues with browser extensions that change fonts */</span>
  <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'music-icon'</span> <span class="token important">!important</span></span>
  <span class="token property-declaration"><span class="token property">speak</span><span class="token punctuation">:</span> none</span>
  <span class="token property-declaration"><span class="token property">font-style</span><span class="token punctuation">:</span> normal</span>
  <span class="token property-declaration"><span class="token property">font-weight</span><span class="token punctuation">:</span> normal</span>
  <span class="token property-declaration"><span class="token property">font-variant</span><span class="token punctuation">:</span> normal</span>
  <span class="token property-declaration"><span class="token property">text-transform</span><span class="token punctuation">:</span> none</span>
  <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1</span></span>

  <span class="token comment">/* Better Font Rendering =========== */</span>
  <span class="token property-declaration"><span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased</span>
  <span class="token property-declaration"><span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale</span>

<span class="token selector">.icon-ok:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e900&quot;</span></span>

<span class="token selector">.icon-close:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e901&quot;</span></span>

<span class="token selector">.icon-add:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e902&quot;</span></span>

<span class="token selector">.icon-play-mini:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e903&quot;</span></span>

<span class="token selector">.icon-playlist:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e904&quot;</span></span>

<span class="token selector">.icon-music:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e905&quot;</span></span>

<span class="token selector">.icon-search:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e906&quot;</span></span>

<span class="token selector">.icon-clear:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e907&quot;</span></span>

<span class="token selector">.icon-delete:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e908&quot;</span></span>

<span class="token selector">.icon-favorite:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e909&quot;</span></span>

<span class="token selector">.icon-not-favorite:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90a&quot;</span></span>

<span class="token selector">.icon-pause:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90b&quot;</span></span>

<span class="token selector">.icon-play:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90c&quot;</span></span>

<span class="token selector">.icon-prev:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90d&quot;</span></span>

<span class="token selector">.icon-loop:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90e&quot;</span></span>

<span class="token selector">.icon-sequence:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e90f&quot;</span></span>

<span class="token selector">.icon-random:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e910&quot;</span></span>

<span class="token selector">.icon-back:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e911&quot;</span></span>

<span class="token selector">.icon-mine:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e912&quot;</span></span>

<span class="token selector">.icon-next:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e913&quot;</span></span>

<span class="token selector">.icon-dismiss:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e914&quot;</span></span>

<span class="token selector">.icon-pause-mini:before</span>
  <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e915&quot;</span></span>

</code></pre></div><p>variable.styl</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// ! é¢œè‰²å®šä¹‰è§„èŒƒ</span>
<span class="token variable-declaration"><span class="token variable">$color-background</span> <span class="token operator">=</span> #<span class="token hexcode">#222</span></span>
<span class="token variable-declaration"><span class="token variable">$color-background-d</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span></span></span>
<span class="token variable-declaration"><span class="token variable">$color-highlight-background</span> <span class="token operator">=</span> #<span class="token hexcode">#333</span></span>
<span class="token variable-declaration"><span class="token variable">$color-dialog-background</span> <span class="token operator">=</span> #<span class="token hexcode">#666</span></span>
<span class="token variable-declaration"><span class="token variable">$color-theme</span> <span class="token operator">=</span> #<span class="token hexcode">#ffcd32</span></span>
<span class="token variable-declaration"><span class="token variable">$color-theme-d</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">205</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span></span></span>
<span class="token variable-declaration"><span class="token variable">$color-sub-theme</span> <span class="token operator">=</span> #<span class="token hexcode">#d93f30</span></span>
<span class="token variable-declaration"><span class="token variable">$color-text</span> <span class="token operator">=</span> #<span class="token hexcode">#fff</span></span>
<span class="token variable-declaration"><span class="token variable">$color-text-d</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span></span></span>
<span class="token variable-declaration"><span class="token variable">$color-text-l</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span></span></span>
<span class="token variable-declaration"><span class="token variable">$color-text-ll</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span></span></span>
<span class="token comment">// !å­—ä½“å®šä¹‰è§„èŒƒ</span>
<span class="token variable-declaration"><span class="token variable">$font-size-small-s</span> <span class="token operator">=</span> <span class="token number">10</span>px</span>
<span class="token variable-declaration"><span class="token variable">$font-size-small</span> <span class="token operator">=</span> <span class="token number">12</span>px</span>
<span class="token variable-declaration"><span class="token variable">$font-size-medium</span> <span class="token operator">=</span> <span class="token number">14</span>px</span>
<span class="token variable-declaration"><span class="token variable">$font-size-medium-x</span> <span class="token operator">=</span> <span class="token number">16</span>px</span>
<span class="token variable-declaration"><span class="token variable">$font-size-large</span> <span class="token operator">=</span> <span class="token number">18</span>px</span>
<span class="token variable-declaration"><span class="token variable">$font-size-large-x</span> <span class="token operator">=</span> <span class="token number">22</span>px</span>

</code></pre></div><p>base.styl</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token atrule-declaration"><span class="token atrule">@import</span> <span class="token string">&quot;variable.styl&quot;</span></span>

<span class="token selector">body<span class="token punctuation">,</span> html</span>
  <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
  <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'PingFang SC'</span><span class="token punctuation">,</span> <span class="token string">'STHeitiSC-Light'</span><span class="token punctuation">,</span> <span class="token string">'Helvetica-Light'</span><span class="token punctuation">,</span> arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> <span class="token string">'Droid Sans Fallback'</span></span>
  <span class="token property-declaration"><span class="token property">user-select</span><span class="token punctuation">:</span> none</span>
  <span class="token property-declaration"><span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent</span>
  <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-background</span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text</span>
</code></pre></div><p>mixin.styl</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// èƒŒæ™¯å›¾ç‰‡</span>
<span class="token func"><span class="token function">bg-image</span><span class="token punctuation">(</span>$url<span class="token punctuation">)</span></span>
  <span class="token property-declaration"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url($url + &quot;@2x.png&quot;)</span></span>
  <span class="token atrule-declaration"><span class="token atrule">@media</span> <span class="token punctuation">(</span>-webkit-min-device-pixel-ratio<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>min-device-pixel-ratio<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
    <span class="token property-declaration"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url($url + &quot;@3x.png&quot;)</span></span>

<span class="token comment">// ä¸æ¢è¡Œ</span>
<span class="token func"><span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token property-declaration"><span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis</span>
  <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
  <span class="token property-declaration"><span class="token property">white-space</span><span class="token punctuation">:</span> nowrap</span>

<span class="token comment">// æ‰©å±•ç‚¹å‡»åŒºåŸŸ</span>
<span class="token func"><span class="token function">extend-click</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> relative</span>
  <span class="token selector">&amp;:before</span>
    <span class="token property-declaration"><span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span></span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
    <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>px</span>
    <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>px</span>
    <span class="token property-declaration"><span class="token property">right</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>px</span>
    <span class="token property-declaration"><span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>px</span>
</code></pre></div><h3 id="é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„æ’ä»¶"><a href="#é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„æ’ä»¶" class="header-anchor">#</a> é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„æ’ä»¶</h3> <div class="language-js extra-class"><pre class="language-js"><code> å‘é€ajaxè¯·æ±‚æ’ä»¶<span class="token operator">:</span> <span class="token string">&quot;axios&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.16.1&quot;</span><span class="token punctuation">,</span>
 æµè§ˆå™¨å…¼å®¹æ€§æ’ä»¶<span class="token operator">:</span> <span class="token string">&quot;babel-runtime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.0.0&quot;</span><span class="token punctuation">,</span>
 æ»šåŠ¨å±å¹•æ’ä»¶<span class="token operator">:</span><span class="token string">&quot;better-scroll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.1.15&quot;</span><span class="token punctuation">,</span>
 åŠ¨ç”»åˆ›å»ºæ’ä»¶<span class="token operator">:</span><span class="token string">&quot;create-keyframe-animation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.1.0&quot;</span><span class="token punctuation">,</span>
 è§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»å»¶è¿Ÿ<span class="token number">300</span>msæ’ä»¶<span class="token string">&quot;fastclick&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.6&quot;</span><span class="token punctuation">,</span>
 vuexç›¸å…³æ’ä»¶<span class="token string">&quot;good-storage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.1&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;js-base64&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.9&quot;</span><span class="token punctuation">,</span>
 ç½‘ç»œè¯·æ±‚æ’ä»¶<span class="token operator">:</span><span class="token string">&quot;jsonp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.2.1&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;lyric-parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.1&quot;</span><span class="token punctuation">,</span>
 é¢„å¤„ç†å™¨<span class="token operator">:</span><span class="token string">&quot;stylus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.54.7&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;stylus-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.5.1&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.5.2&quot;</span><span class="token punctuation">,</span>
 æ‡’åŠ è½½<span class="token operator">:</span><span class="token string">&quot;vue-lazyload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.3&quot;</span><span class="token punctuation">,</span>
 è·¯ç”±<span class="token operator">:</span><span class="token string">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.1&quot;</span><span class="token punctuation">,</span>
 ç®¡ç†çŠ¶æ€<span class="token operator">:</span><span class="token string">&quot;vuex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.3.1&quot;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>åˆ é™¤æ‰é¡¹ç›®çš„åˆå§‹åŒ–æ–‡ä»¶</p></div> <h3 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="header-anchor">#</a> è·¯ç”±é…ç½®</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®é»˜è®¤æ ¹è·¯å¾„</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/Recommend'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/Recommend'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'Recommend'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Recommend
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/rank'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'rank'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> rank
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/singer'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'singer'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> singer
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'search'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> search
  <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å¼€å‘"><a href="#å¼€å‘" class="header-anchor">#</a> å¼€å‘</h2> <h3 id="headerç»„ä»¶"><a href="#headerç»„ä»¶" class="header-anchor">#</a> Headerç»„ä»¶</h3> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAboAAAA2CAIAAAA+kMvFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABRVSURBVHhe7Z0JXBVV+8fnzMzdVxBRcUFB0xAVzVTIyjXL6i1zKTXLQtNcy3LN/lqWJaaWmX9MI1ustKzMXrVebdfM3MGdFBdEdrgXLneZ5f8MM8LlcsUL2P+95vP93M9l5jnnzD2z/c7znHNmIA6Hg/JCFEVlqeoy4LMq49eIIAgStBBClCUvfIzeqxXLlXKZnZ0L6icv++BXJ5W/CIIg1yu+uulPSGVIo0YNveUyp2/fPvIygiAI4k1aWhotL2FMjSAIUgMgkpJcolYiCIJcFRq1EkEQJBCUYBxBEASpGey7RBAEuTpK3yWCIAhyVXCo5zqDoalGDeihfTTPj9BNHqrtfYvKbLjiVDEEQa4hpLS0VJbLnJy8fv1w3mVQwzJU366qOY/pwqxEzRJBpJxucVcq98YnzjMXeVhFEORv4vDhwzgyft0AfmV8rGrJZH3ThrRWTWhaUk+jjoCAvjFZr9dKT2pJHyU7giDXGBzquW5QsWTSEI1G7fvAK8hohyjmiXs1Bi0JD6FDzLRaJRkRBLmG4FDPdQNIZIiZdL6Jpf15j5A6vL9682LTr/9r3rnK/N5sY1wbVklDEOQaQUpKSuAPCGdubj72XQYbII6Rjenet6jbtqAhzB7SS60kVEMOD0A34a8gUHaHOGJeyYlzfHkigiD15dChQ5JcypE4ymWwAdoXH8sumqAPNROGlmJwllGSroqHozbscM9b48BOFuRGo19X1cAEVasmzJksfssuz/a9HiWhfvjIZV6/fn3lBCQYaGil1803tmxCe3VEEooxUJpIyhBLaZpStJ4S3ZQ7m3IcoxzHKcFBiZycDxzM9Ex+4HN27JRGbhw638QuHKdr05zhBarMJeo04GdQp87zc1aVHTip3Bp1BuUyqInvwK6abjDoynsrCUPRRsqSQIXeRxliKKKhCEsRujwI5ynBRbkuUPmbqeKfKU8uiCZcLkdO8w/NtqNaIjcI3WPYxZP0IWby0Vb3io1Oh1PUa8mkwdpR96jzi8WJS0rhjlCy1gmQS5xIFLxENKBp2a8kKkodQUUvpSLnUeYeFGOmaJBLiMyJpJiQyhgpfTuq2bNUm2TK2AXEVOSpg/s4v+NCCPLPo4GFzBqlMxvIK++XJa0rA60EI3zDMlisRvLyGL3VVN/7AScSBS9nMgUemkOQRUMnqvVKyhgnKWMNgL+paUa1Wkg1GMwXsnFpbIyaxakPyI3A4F7qdpHMlt8963e4FdNlwAL2mJbMsD5XHCkNBBBJvJuCF2s+gcCa0nWgIl+kNBGK9aqwIXzYmLzU/ppSMi5EqyH1alEH3aneuNCU+pHlr8+t6RusB9Za1s413tyycsipTXPml5Xmgx9Ybu90xalLowdqjn1i3ZxkUtZrpFaZryHy78JuHvrQMjDef7O0YYERMkA2yKyY6kcgRw8JhH5dVSVl4lc/+2qlDNghFfIo63UF5TJIMdLkCZ226Eszb51QC60sh9GZGz89Ux3VJkpF32VUq+okmBDdrJtnTJqo79iaKXNRaaf5Yxk8TVNwY3/6knHU3ddGL4IQg5bEx/oRr4QObFTTgKcmIP+PQKvTuAGdmSv8ecz/eA7YITU8lG7VpF6Kh3IZjIC+ddGyZpqY+z1Ch8bW+jQRQmt1oaPHEZrur1epa+9gWk3k3ZnGHrHspXxhfFJptzHFD8y03z/DHv+UbfufHoOOTB2m7d0l0LZ67RbXzSOKoLiyHsRwPCWIVLcYtno/120dWZOeQIZryKnz/B0TbHGPF/96qL7jtjcyDa3EqCfZhYKy7g9INRtIk7B6yyV2XAYbcFYSdKzaGmrqO5Co6tLhQhjG1C1B2zammYYx0bXWyyfv03SIYors4itry3Z4TVtzOMU5qxzHzvAhJvLYPf9ABzPfJuQUCk0a0Ld1qOJgMow08Gp3iFn5Nd2TyH8FhpYe6LgqkKeeDwfXrzTy98AQ0lHDaltGsaENpNnqdYAQolIZbuulZZhuOpapzTZAGnrFqeB7Zyr33R++U3zzi8Vvd7ltpaJGRTVtWHn9hFnp9QuMJz5Tuv+WP2uAcF5Oqt4d2bopkzzdANkg88nPrDuWm4deoRseqvHyWB3k2bPGMqC74s82D6dh+3LxUxusO5PNEwfDjsqJSocgfPp3U21caPJbpSvBcVTaXzy4zwkdqvjOt3dSRTdlTmfy9tJK38JvN2t1I+wa7CDsAlQDKrPda2er913CXswYqYM9gv1K32Ddl2J5aYxOr63TNXDDcKlAhAsyxFjTUYJUyAM5lfU6gXIZLMCp1hISwdJRKqajlrEwhO0an1NQePbs2fT09JMnTx4/fvzEiROnTp0CS0FBgccjCRnP88XFxefPn4c8kCrngeWMjIysS9lcZLRIkVu1bDOWbszSBpoEcr673MRCzOLyiHuO+o8Q393k6jy6eMT8ksxcxdXSa8iCsbqO0SwICgSYWjW5N0G1dIqhQsK8aR/FrJljAC2D1v7oGf5cjtCiMT0/UZd4n6+7CsXnPal7pK+mqER8cbVD1m4o/tE8I2xfLp5+ng810888rF0xrcrPQR1eHqNrF0lDlU5fFHTlVVo4Xq8kXxmIi0vLxK7tGO94PKEDa9CS3UdqHTLDTsGuNQunMy7xh9P57AIhsnxnH/PX+Qv1X/mc4akHNA2tdEaWcCyD12qokXdplk3R+z2SiAxccgU2sXEDGpofxVQVuXMT8kBOxVQnUC6DBTWhHrNoljUyrGhsWBCmhxPzyrfbRo0ePWzYsMGDBz94mYceemjo0KGPP/74rl27HA5HXl7exIkTIQ/YBw0aBBngW84zcuTI595+hxOEzhp2SbhhabhhbgOdOQA/MzyEgOfo9lBnLwV6bcHNnFcsgoDe85z97mn2xevKoHhMSwaUV8nhxfPDdeAepv4lPXR0/wx7vym2j7e5VAwZOUADdiVTOXMfl7QyzybMXKloJfwQOF+Q7c9jXK9JNigOvzj29ZJL+UKvzqpRAyo1CBxJl4ca9qJUpf5TbUnlVYL63HrzVcag005zEHF7x+Pwoz1iWKiGd79EgNzfU83QZPkG513P2AfNtt8xwfb5D24IGOKrBvsyoK13dlYVl4jPrXBAnWHvpi13wGrPTuzQ3vWaBPOPZ2eqJzyEvr+n//50sEMq5FHW6wrKZbDQUcvebVCZvfoZI1pFZWdng/PocrkEQfLjRFEEp9Jms4GPOX369MTERJDFvXv3FhYWut1uOQ98w7Ldbs/OyaHVGigCCqmnSQhDOmjZRIu2fNs1Aa6Nir26qnrD8dIj6hXPmf18kMstElQsuHiyoRJQq9gopqRMfHeT83yO4pymfOuCZfCkbmpR6R2AXwmOFYjUC8llP+5XLnTQO1DhQru4/HNnfrESWP12mNu62wM/19drpggvUN/86q54kKOGKvngcFF7j1eJxwd0U0U2of+6IBxKr7VvInWr0RR46xXu4ZxkR8yI4qcXlyrrXvTrqmIZasvv7s2/KRNioJHYmcqJIoWD8jXz2X/ccAkN6a3uHuPbDoEF7JAKeRRTXUG5DBbCGJqp2k359MSJMe3bM1cIw3Q6nV6vN5vNynpVCCHh4eEzZs1SqSoVBDYUpb76GT97SXBztevi8XBiTrVxSbWKimzsW/m2LRiDjgK9g0hTMVEUXMp9p9gSnrJVuG/RzegRd2lg189nC78cqnQK2rdijDqiUVOzHtV99Zqp4tOrMyuIVEQYXdGd6vaI57J9qxQgu1I93vF4fCyrZsmvXtUInN8hfhep4f3VB9daNieZpo/Uenf4etOqCR0eSsORP3GuSrWnLCuNfbR44QdlyjriD7iEVm506tRk2TP6u3tUXvOwDBawQyrkUax1BeUyWKjuzlksllWrVnXv3l2t9vWINBoNxODLly+HDFarVbFehmXZsLCw1atXx8TEkKpDhoE4jQU2odQp+hW7KwHeZXaB77VIKFL9FUpgAbu9VDyTVdO1q1ERCEILbGLnNuzUYb4esV5D2kcxHVtXfqKbMuDHgfNYMSrit0oBAg4d3FpyPA6K2aUtW2gXwKgk14ZFH5e986XkCOs0JKYVM/5B7U/vmLcuMfXs6OsEsax0rmrVB4IADSxk7L80n8w3/ut2dfLXTmjY3p5m2PWuGRpR+IZlsIAdUiEP5LzqcF8NoFwGLzRNm0ymN954Y+7cuc2bN9dqpf8vAUaj0Qgx+IB+txkcW8L0WZMnPQ2KCRIJSSCs4FSOHTt2/fr1UVFRl585rx0Qcl7IFkCwulWLa2QSOrA7k83fLjbV4TEJUDGREk0GUvOEYVC6actL1/7bBT7jI301ParOG0+/wN/yZHH00CKfzx0TbPXsy5cpsov7T3CgvBCPg2I2D6fB46vbCxp4nnprg1OauDrLvmaz6+gZnuOkPod5iXqfjlqOE2Fna9VKIZOGaL9/0zxrlK68yaRPnhMGzbJ//J3L6aJaRdDwDctgATukQh7ICfmhlFK+lqBcBjWgd6GhoYMGDVq3bt38+fPHjx8PTuWi1199dty95sK3qIsr1OdmDu1NvbP89SlTJo8ZM2b27NkpKSnjxo2LiIiQo/gCvi6zarfv9Xg4qkd71kenZIb2UTcKpUFN6vD6YShSWkZZDCSySaUoQE2/eNV4+EMLOF+yBdyx3w5zyZuch9I5cAeefViZJ5RxSXC6pTHQhKoVWzBWd/xT67p5RmW93vyexoGLDfH4HXEqFUt+PnDFSBwEznsMvU1zBiwyt97M/rLS/FuyuVNrBtT2tQ/L7p9hT3ytpNAuNrSSllUbDHC3cwoEcIVaNK5ih/j96CeWlDkGZR25zLwndVOGaCEEmbxU6q+AxvLH/R4IC156r6zPZGnyP3zDMljADqmQB3JCfigFZZWt1AaUy+sAlUoFPuODDz44depUkMs7YyM16S9SBT9RXAnhitnM5I5k+1NjEqdNmzZ8+PDWrVuDH6qUpCh3neaZbfjBfeQMDzq1eKLee/wEJBIsA+PV4CRu/FHqXFcSAmb/Se5oBm82kKlDtRVh0eh7NDe3ZJxu6mB6lYAXXLPkr1wgLhUh+a+HPCfP80YdeeoBbYV3NqC7CqoEkey+er/TsIJdadyFHKFZOA0edG6R/0hc1m6I2W/vpBwiCLF7d6nU8VMXeLtDDA+R/tFxRRc05Fez0oT/gmpv1/v5AAcHdvCd6ooZpu2jmHsT1CxN0s5ghF6Fh/uqh/RRw1X6yP/Yt/weaLcy5IT8UArKwhYUa8CgXAYLcDdAlKqs1Ejpn4czV+Tb9nGCEwRTzP3SdWHRDlF6edFVgK0HKG8Qjc58xwEOEdzbyTOUnqCtS0x/rDY/VP4PMD7b7gLXT85cK6CaSeukBh8iIwiLNi0y/ect88xHpZn03+50707zVSXwC74sf2+CHJJD8aWfOjNzhQ7RzJYlps1JUq3enGqwGEnqaf6DLS65VP2R43GNioDnePCUNJlUSfBC1m6DjiRN0EM1vn/T9N4cI01L/81YzgAbWb/d7eHER/qpdyZLxxDyLByv16rJd394qkf3cEjBjYV9gT2CDcLeffaSsVlD+tru2j8AaHsgxHG5qcWflFVMkAgQyA+loCxsoaINCxCUy2Ah3c2XCpKiVXyuhMiJ7jwxe714dqmQsUgo3i3ypXQNBSo2yInUn2WB+l/pmfygOfZl653nswWrkYC6ybN89hzlxrxWMv+9sgD02T8gE2MWlv603wNOVmwUE9mIBvWc+67j5ff9D/6u+tp5/Kzk6soh+R9HuZHzS/69ywOOGPikEPyCp7bue9eol0tqe+fUzI59HPiG5f/J3b/zAkfg+bcdUBM3J8LBadqQ3pXKLXi/zON1jD/c5pq7qgz80BCT1HfWsjEDTqv0EkZ/I92wwQlLStdsdhWXCq2bM7B3bg/1d+za9U5sKyaiIX0sg4cDrphqA5SCsrAF2I5iCgxit9vlZ8bz8vLxber/ReC8ddayg0zqMEYZzI7f/IM+JLT6Q5BFGz/NXfWW6K50N2iDIfqrHUTt+6CIx+P5uv9tIR4XbKJMFI+4+I+KXbCgJCPI9cntndi3pxmg4Ry3yM/01UBYNdPQPYadvLQ08JebHDx4EOUyiADFZIn0nKIskBu++aZtu3bVR7eLPl+Xu/ptb7lkjMaoL7f7yCWc1vz8/AG9ermcTtgghOG85JjW5LciyHVB83A65QVjoxByJkt+OKN2wC3VqgmdXSg++WpJ4P3vIJcYjAcREN26RBG8P0f5Z9/+/by/iFcUq55gcD/9PQsOcpmRkVEmCPIGnaLoQa1E/hGAxr30nuPkeb55I7pVRK0/kY3pvzKlLdR2rBK9y+ClZ8+eK1euNBh8Z5DYvtucs+w1wXm584sQVZOmLdduJFVns3Mcl5KSsnTpUvllHAiC1Af0LoOaEydOQDQtN2be6OK60mazFFGUQ1jWcGt8xaoMlAKV3LFjh1//FEGQOoByGbzk5eVt3brV7fZ9LwAbFh72xNOMyUxrdbRer2nTrsHocaTqnAhQyd27dx84cKAuXTsIgvgDg/GgJiQkZPXq1XFxccRnfBycx4sX3BfO0Vqtpm17+Fbs5cAJLSkpGTly5JEjRxQTgiD1A4PxYKeoqGjZsmVZWVnKegWEqCKaGbol6Dp28dFKAJrApKSko0ePKusIglwLUC6DGvAT9+zZ88ILL+Tm5iqmCqQB8fJPVWw225o1a7744ovqnZ4IgtQHlMtgx+Px7N69OzEx8fDhwzWPcXMcl5mZOWPGjJSUlOo9ngiC1BPsu7w+YBjGYrHcW07btm01Go38xjY4dzzPu1yuixcvbtu2bdOmTaCYOHMIQa45+FTPdQboo9FojI6OjouLa9GihcFgAKHMyspKS0tLTU0tKSlBoUSQvwmUSwRBkIDAkXEEQZBAQblEEAQJCJRLBEGQgEC5RBAECQiUSwRBkIBAuUQQBAkAivo/SI8qxpD2LpAAAAAASUVORK5CYII=" alt=""></p> <p>ç»“æ„ä»£ç </p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>m-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Magic music<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-mine<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ ·å¼ä»£ç </p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.m-header</span>
  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> relative</span>
  <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">44</span>px</span>
  <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme</span>
  <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
  <span class="token selector">.icon</span>
    <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> inline-block</span>
    <span class="token property-declaration"><span class="token property">vertical-align</span><span class="token punctuation">:</span> top</span>
    <span class="token property-declaration"><span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">6</span>px</span>
    <span class="token property-declaration"><span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">9</span>px</span>
    <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
    <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">32</span>px</span>
    <span class="token func"><span class="token function">bg-image</span><span class="token punctuation">(</span><span class="token string">'logo'</span><span class="token punctuation">)</span></span>
    <span class="token property-declaration"><span class="token property">background-size</span><span class="token punctuation">:</span> <span class="token number">30</span>px <span class="token number">32</span>px</span>
  <span class="token selector">.text</span>
    <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> inline-block</span>
    <span class="token property-declaration"><span class="token property">vertical-align</span><span class="token punctuation">:</span> top</span>
    <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">44</span>px</span>
    <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-large</span>
  <span class="token selector">.user</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
    <span class="token property-declaration"><span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token selector">.icon-mine</span>
      <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> block</span>
      <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">12</span>px</span>
      <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
      <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme</span>
</code></pre></div><h3 id="tabç»„ä»¶"><a href="#tabç»„ä»¶" class="header-anchor">#</a> Tabç»„ä»¶</h3> <p>å®ç°è·¯ç”±(æ¨è-æ­Œæ‰‹-æ’è¡Œ-æœç´¢)çš„åˆ‡æ¢ å¹¶ä¸”æ·»åŠ åŸºæœ¬æ ·å¼
<br>
ä»£ç å¾ˆç®€å• æ‰€ä»¥ç›´æ¥è´´</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- router-link ç»„æˆçš„tabæ  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-item<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/recommend<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¨è<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-item<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/singer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ­Œæ‰‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-item<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/rank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ’è¡Œ
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-item<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tab-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æœç´¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'tab'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  components<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  computed<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">beforeMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  watch<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>stylus<span class="token punctuation">'</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
@import <span class="token string">'~@/common/stylus/variable.styl'</span>
.tab
  <span class="token property">display</span><span class="token punctuation">:</span> flex
  <span class="token property">height</span><span class="token punctuation">:</span> 44px
  <span class="token property">line-height</span><span class="token punctuation">:</span> 44px
  <span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium
  <span class="token comment">/* flexå¸ƒå±€ä½¿å¾—ä¸ç®¡å±å¹•å¤§å°å¦‚ä½• å››ä¸ªtabéƒ½å¹³å‡åˆ†å¸ƒ */</span>
  .tab-item
    <span class="token property">flex</span><span class="token punctuation">:</span> 1
    <span class="token property">text-align</span><span class="token punctuation">:</span> center
    .tab-link
      <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px
      <span class="token property">color</span><span class="token punctuation">:</span> $color-text-l
    &amp;.router-link-active
      .tab-link
        <span class="token property">color</span><span class="token punctuation">:</span> $color-theme
        <span class="token property">border-bottom</span><span class="token punctuation">:</span> 2px solid $color-theme
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ç‚¹å‡»è·¯ç”±æ—¶æ˜¾ç¤ºçš„æ ·å¼  vueè‡ªåŠ¨ä¼šç»™è·¯ç”±é“¾æ¥å¥—ä¸Šä¸€ä¸ªrouter-link-activeçš„classï¼Œæ‰€ä»¥åªéœ€è¦ç»™è¿™ä¸ªé€‰æ‹©å™¨ä¸‹çš„spanæ·»åŠ æ ·å¼å³å¯ è¿˜è¦å®ç°ä¸€ä¸ªä¸‹è¾¹æ¡†å“¦</p></div> <h3 id="recommendé¡µé¢"><a href="#recommendé¡µé¢" class="header-anchor">#</a> Recommendé¡µé¢</h3> <p>è¯¥é¡µé¢ç”±è½®æ’­ æ¨èæ­Œå•é¡µé¢ æ­Œå•è¯¦æƒ…é¡µé¢ç»„æˆ</p> <h4 id="è½®æ’­"><a href="#è½®æ’­" class="header-anchor">#</a> è½®æ’­</h4> <ul><li>ä½¿ç”¨vue-awesome-swiperç¬¬ä¸‰æ–¹æ’ä»¶æ„æˆè½®æ’­å›¾
è½®æ’­æ¨¡æ¿
ç›¸å…³æ’ä»¶åœ°å€ <a href="https://github.com/surmon-china/vue-awesome-swiper" target="_blank" rel="noopener noreferrer">vue-awesome-swiper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;recommend&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;recommend-content&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;slide-wrapper&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>swiper <span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">&quot;swiperOption&quot;</span>
                ref<span class="token operator">=</span><span class="token string">&quot;mySwiper&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> slides <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>slide v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item,index) of recommends&quot;</span>
                        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a <span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;item.linkUrl&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>img width<span class="token operator">=</span><span class="token string">&quot;100%&quot;</span>
                   <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;item.picUrl&quot;</span>
                   alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>slide<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Optional controls <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;swiper-pagination&quot;</span>
               slot<span class="token operator">=</span><span class="token string">&quot;pagination&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;recommend-list&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;list-title&quot;</span><span class="token operator">&gt;</span>çƒ­é—¨æ­Œå•æ¨è<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      recommends<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      swiperOption<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨è½®æ’­æ§åˆ¶dots è½®å›è½®æ’­ ä¸‰ç§’è‡ªåŠ¨è·³è½¬</span>
        pagination<span class="token operator">:</span> <span class="token string">'.swiper-pagination'</span><span class="token punctuation">,</span>
        loop<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        autoplay<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
        autoplayDisableOnInteraction<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>å†ä½¿ç”¨ç»„ä»¶å‰  æœ€å¥½å…¨å±€æ³¨å†Œ</p></div> <p><img src="/assets/img/2019-11-13-00-03-47.c9339caf.png" alt=""></p> <br> <h4 id="è‡ªå®šä¹‰è½®æ’­ç»„ä»¶-slider"><a href="#è‡ªå®šä¹‰è½®æ’­ç»„ä»¶-slider" class="header-anchor">#</a> è‡ªå®šä¹‰è½®æ’­ç»„ä»¶(slider)</h4> <p><strong>æ–‡ä»¶ç›®å½•</strong> <br> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAABvCAIAAADQT8ouAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABXCSURBVHhe7Z0JeFNV2sebpmnTfd9b0r2UtECBCoV2EKEVKIuIBbEyisu4DDqPzow6jj7qyLig8nyKzvcxw8jwKfRjHXFYLVCQHcrWhRK6r5SmS7o3S9PvTc7hmpRsTZebkvf3nCfP+55z7rm3Tf73PUtyLic8WmhjMn4+XpK2DplcTn1tDJciiPXg4OBILT1YtPDmpPEenGdPHTUVZX3/+nsvdRDEUjEqPK6ntx81TcDZybFXKutTKqmvjeHSwRIewf3zOic/f1vNFBPH9fXnXDqnoJUQZMj4uAuc+J4cW1u5oodmDRk7Ox619DBiEY/DseNyFQr9CjFWQTiR+8GnztQxRkV53/tvdnd19lMfQUwgxFfo7x3F5dgRt0fWLqo+I5N3E3cosBbxBOHRS5avaW66097WSkq14HBSH1yYnJpeJipUKPTI2N92Tpp9ZXlfXW2/uNFIArHLZf2V5cMTbMc0sxOfWT1/Q2nthY7uJpqF6ELgPznQO8aWY0t9Gxse18HTNai1o75POdThEpsRLzklTZiQlHNoZ1VFibr8LmrVRUYLD+7b1ninjmbeA4l4773ZVZTfR7P0s2RJskhUKxLVUN+KAeGlTlr97f6X6ptu0izkHux5TgmRaUys06S5vbqs7hJ1zIXVyRWd2jNNdYCm8D5Y72xztxc5K+m33p4RxG5uLT9z6ZvQ4KRE4eMKRe+ZvL99+VkZdDtJ6b3Ah/LhB14hdlNb1eYfn2/vFrs5+T635B/Q0Sf5Ry5uPHn1W2K/8MgWYsDdEV6v3jpw5MKXTGVwd+W+oy6nNW9WnSLtyxXSPSffzy89rC60MXqKlra6xJgMMLqlEk3NTIyav3z2+zw7B7Cr7lzb9MMaMEhrNXcKvdyDyYUxfwu0RnIApinNTM1TWzPQyQzyGU8dbeC9u1qynzrmwvLkSm1NuQOfP2NWenNTQ5ukxXTVAaSreeKo3MXZNmuNAzO/4u0+zY7rSerYclt9/W2jQleqbFu7ccGJRw4XNTS0kdIBZM5ZN31C5q7cd7fn/PFS8d5gv/hb1ae93ce9uGyrpLNh/bYFxy5vErdVZST/3tcj7EblcThk2vhH4CN74caub/e/qFDKUyY+mTJp9an874gLrbV01N5pKWVqgkJIO9DCg4nPkFJ4g42eoqG5ZOPulXBVCZHp4UFTL9/cB0WguiUpb/1wah254BnCFROjHoYiB57zlNglkcFJ5MKKq04+MGG5h0sQNAilcGFBPrGb9q05cPYL6G3CX+3jIfhq14qD5zdAETRb1XAVXq0cX88wJwd36mjDtbWrayqmjrkY7Wr+0sEdEfr7z53OKSq4lLZghSA8xnTVaSKcxKXWPdjaOvq4LaYOuBz+2rWZ1NEGPv2xglnHr/ydRCEIDtuOvA6vsxKe7O5ty/7pDVINSgvLj4b6x0NUITkQZ0iIuCr6DwQWTbetqyE2NEVdSwWUMu1AYGRKjZ4CDoT6YMD1XBb9CJokN+Pk+JWiqtPMBWsWAcyVQEwTVZ3RbFATiIpdva1wONhQH8MdoatHQq17kA7H5IpRRlh4wF3tZSzNMkN1QFKy3puHUtlT17JJ2U9ngRsb61577W/EHoCPR5hCISupOUv9u8DnEvps5HNJENWctrdzdHHypr420Cek1j0wn28ADHChcbCNnkLzQAZQkTPfE/qfH71wlSSmk0wwcCWanCvcEeQd98Gz5yF+0iwE/nsddcp+3TPqko7b1BpJRl54gFp7B/dt37tz82BVBwgTtCJee09eS2cOSWDL5PVEe5DefW9TR8ewLcVYAjAke3tTIpPW/WvOYKdMIGC+988ZEOofn/sxyo9BJu+ubbxBHQ0g3EFXgjojyagID+jvr6wQtcMwb5AIE3TMO6kmWkhS4+wg7JGWd3WXJ056IChId6RqklTa2dlHh86k/l0gbgzopEH/UKbo6exupr5ZQIcQuoU3q06Bbd4pSMwcL0il/tCAHuYn36UP6BtbOQ0tJbdqz/bI2okLAbC5vfp66SHijjSjJTxzeWDmQOG5OU7zck0jCWzI8XJJc+YLXZ2FL764SJ/wyEDooSm/Ibd8kEHWwxvg9UzB905891Xp60k1KI2PmAejqXv7fkYR+E/OnLOO2ItT3oRX0rM1+xSgW2hzduIzxIUDl6S8RWwDtHbU29hwoGtN3Kz0L5hhITIA6FUWlOVcLN4DKe/mvqGvIpiO5Qqvu1P1Ghahd2ZlsOzKfaew/Cj0uGC89Nbqn2SybvjogyC/3f8SRCcyjlo++/09J983bwYCuigwnCPtQIPMqoDZp4A60NWEoR05cEnKm3k3f6Bl+oG+pVhSAX/mO0/nguRcnLzWLs+Gw+FPhqEms/6BsIulf0k6KdnO2UXr7jBrmvY6Xt43S9K+IC7w/PMb8vJuUWcUIctxZJ0NQYyu41l0VzM3R77+Lz3vvdGlmSo11sfBhhzqIMjYwaIj3hgCIx6iydiOeAhyv4IRD0GGH4x4CGKJoPAQhAU48YkDv8xhAE93l86uHrlC9+9uhlKKIPcTCrmMWnrAiIcgLIDCQxAWQOEhCAug8BCEBVB4CMICKDwEYYExvJwQHS+MmRBPHTXN4sbzubnUQRD2MLqcwPULDKWmCTjy7WVyhVKpe8PmoZQOFm8/v/mPPubq7q6Z/AKDXN3cqspU234NlvWffJQ2b27O0WPUR6yGsDCBh7sHj8fr7h62bY6USiMBZqxGvMDQ0IwVql39TKG5sTHnx32dbbq3/SOA8OD1jbfeJi5iDcTFxgYGBdra0h9b9/R05+cXdnR2EHcoWOgCuq2traeHB3V0YbQCoVksvl1TYzTJpFJv30FsH4pYA/FCYXBICKM6wNHRafLkSa4urtQfSdiJeBkLFyx7ZOnu3XsP//QTKdUEVPeH11+DDsAnn35WXaN7V3YS8Q7s3AG6ollDAyOeVQHqSkqaqqk6hiax+Fp+PnXMxWjEY0d4IK3fvboW7i47d+4+cFBrXyeiutjxMVu2bD19ZuA2mAyawjO9z3n+RC50O6mjDRFeYVHR4kWqrdTlcsW27dsPHKR7sL/xx98nTZtK7Et5l9d/Rjeb+PXqLFIfqKioZHQLrYWHq7YbGtAOYiFAJxPCHXW0USjkJ07+TB1zsdDJlf7+/osXL4UJBHPnPiSXyUtK6HSIiaoDXN3dY4TxJUVFDnx+UuqvNKdYDKRLp37u69N9X0ibNxekYs+z/82LL+/avScyMiI9La23tweubdKkBGFc3NpXX4P87u4uyHd2drqeX5CxcD6obtv27L9+/OmtklvhYWE/nzoNTRENk3ag5qPLlpF21OdBLIKQ4GAnZ90PgYMwWF5RQR1zMTq5wto6nlKp/PKrr69du75ixWPQ84Qc01WnSWCIqTcOMtijji7E4qaN39CNqLP/b4dEIhEKVb8Svn694MO/fkzy8wsKIT8gIABsb2/VVoK1daotepk6oEYvT89t2dlgA7knTjLtIJZDl/4JTKnBD8lwweYCuqb2FmUsMEN1gCAqilrGMDoa7OzsrKmpJTYY4PqopQVA0Nu6ZfOuHds3fL7e19eHZIKourq633n7T9ARJTkAqNHdwx0yofKA+ojl0NBwR19Qam3V9UTH4Yblb64w2nsy6wkzVAfAYI9axjBvfQ8AXYGQjh3PzVz5xOt/eAMCI8kHcb689tV1H30snBAHGmPkBxWgGlRmEjMmRCyEjs4O5iarCYQ7GOdTZyRh/ytjRHvfb8v+auPXg1adyf1M6GTqm1bRCYQ4f38/eA9CQ0NgLHop7/L/freNlmkDncyn1jwHFaAaVG5uboZx3cQEra/UIBZISWlpcXFxTw992AYEwCax+NRp1Sh9FGBfeABob/+Bg/AJpr7JCKKjqWUMU1YdwsPDmKiVtWoVvF7Pzx/Q51z1+Eqm6/jr1VmQiM0Ag0Dof2YsXAgiJDnv/vlPIGNiIxZFXX39mbNnjx47Bul47omhryKYjkUIzwzINIm3r44nwumkskz7cdC6qKioBIGRsRmEuw3/9SW5F2zLzgaX5PMd7JmuJrB4UQbJh3D38afrQaWQwIAiGN2RIqlMZsY9Bbm/Gdtfkg6LjLZ3UD2m2DBVpaWFVy5TB0FGHgtdQEeQ+xsL/a4mglg5KDwEYQEUHoKwAAoPQVgAhYcgLIDCQxAWGL3HdBkunT414cJlXGVG7hPwMV0IYomg8BCEBVB4CMICKDwEYQEUHoKwAAoPQVjgvl1OmDA5MW5SInXUiBsafj5ykDoIMpJY6XKCb0Bg2tJHQ8LCNVPijOS0pctojeFgyfI1kMDg8x1XPfUKse9FmDDt2ZfedvPwoj5iYbi6eUBy4POpPypYpPA4HDs7O2rrxFgFff/ECZOn/O69DwekJ1542c3Dk9ZArAlvH/+4+KmCsBhI0TETI6Mm2NnxaNkIY4nCE4RFZa15LWRcJPUHwOGkPrgwM+slR74TzdGD+E5DbWWl0STtlfr6B9JjzKK3tyd768Yf92yhPjIW8AsIDgwScDWfneDkEh41fnS0Z5FjPA4nOSVNmJCUc2hnVYX2Xilq1UVGCw/u29Z4R7WTrE6gY7n8qWf2bP22tnKoWwIbgPQtjeoNupozUtJ3Zf9Pu6SFZiFsA+qKHj9RU3UMTU0NDfXV1DEXo2M8S51c0ak901QHaApv+VPP2tiY9FC+n48cEjfcpo4248KiFy7N4vHswW4S3/73js0Q5RjhwRhv2crnaqsrTuXuV1dXaVIQrtoBrburs/D6xfhJDzDC02wK/jSiW9KC+E69r3+Qj2/gxs/x2SkjC3QyIdxRRxu5Qia6cY065jJmJ1f6+8+dzikquJS2YAX5BJuuOk18AwJDwsKY+RXDqV2iewthNw+vtAWZp47vBz384+sPQR60QA+gOmcXF6gJ9XMO7UpMSqEFatWlL1wBfwJpCqppTslExSacOXkYVTcK8Oz17pHFs1PdE0caC57V1NJejBmqA0B11DKGerDXSx1tPDy8ORxOR4fquZYQ6I4e3gOvpOheQFp+/kGgH1KnurIEFEuKgMlTU0TF1yETbKiQf+Wcr18gM+FZX1tFipCRprfHwLMT9L65w4gFCw+4q72MpVlmqA6IiJ1ALWPUVpZT6x5ADI136pc+RhcPDOPq6t7V1d7YoGN7cOhPQoibPHXmK3/4iKSHHn6UlqlpbRFTCxlhOjva+pRK6mjT1jYaQ3HLFh6g1t7Bfdv37tw8WNUBpke8ctFNaukCRmKkZwhqMUV+Bjh+ZC90Jpn0z//+CCddRh+FQn67rpI6GkC4a2wY9MfMDCxeeEB/f2WFyIxPZ7DAVNVJe6X6plUYoGeYvXUjyEazc6gTdw9vv4BfHnro5aN6phcALXR1dkbG4HbuFoGktam87EZPTydxIQA2NTWUiEbp19hjQXjmEhk3DP1MAIZt02fOo44xykqK2iTNs2bPh44luHCscOI0UgSU3SoQhEcLE2jOoFpGhp3urs6ykhuF+RchFRfmDX0VwXTuT+GRaRJffxpqjFIuKqaWHhKTUsiozOiKHIS1f+/YDMbza9+F+qDAC2eOkSKgqCAPYiYM7UhraQsyi29coWWINXE/f0k6IjbOQR12DFMuunH1/DnqIMhwMGYX0BFkLIObHSGIJYLCQxAWQOEhCAug8BCEBVB4CMICY0N4fj5e9rxR+mkwgowCGPEQhAVQeAjCAig8BGEBFB6CsAAKD0FYAIWHICzA9fT2o6YJODs59kpl+n4zP5TSkCD/utuN1LkHw8cOFvsQT981s1ymh0Oyvc3lu/jw3byVChkkKOXaObgFRkIO393T8+nJpJqipQsSORxBjGJ0c05rjHiyWtVuYvxoP1Wa4stzdIXk5EX3tHX2CSE5dhGupI4Nh9NbovemoI8luMG7xTMxMXnx8qf9AoKpb2Pj4uK24JEnZ85eQP0Rw0q7mi176M9PneYK+mykYIDS+K7e8Grv4gGuUqlwzYxVV7GRHMTfKyHDjJUKD4Je5wW6yTR/Hv2hurNPKIQ7YvNmquQHQDUzwp0mZLMW3OAd0cR6J1da9l5R9qh+lesg9Onjq4IehwvjO9XzGPq4Usfpqp4nVIBqYCDI8GKNkyuEfrnSRqF0jFMJjBflLr/WzOHQ25DjshCuu2qn4bac4p7iBpJpgHFh0aueejU5NX36zLmR0RNKRQUKhSJ2gurpfKLiazDGy8x6ydPLr7ryFqkP4730jBVQOWHSdElrM4wxbhTmSdUb4Go2FRA4Dg6HTNJCQGDo9Fnz5qQ90tXRJm6ku1lDU3AiUg1gziWRNK188retLeK2u9vDDKiZOmfR0seehrNA0mzQqvAPDPXw9KmrKe/q7CA59vYOgohYeC9qqkpJjnng5Ioh2nJFZK6S6+FgE0z/FUrvPl6oKxhQJDlUSDINMPobvBcV5NEs9bZlmtsNRkYLnZxcr189S1x9gOpCxoWTa9i3e0vqQ4uYjc+Q0cGqhQc0fX+BGK6ZsUqlor9f4bwonOQwRYZhd4P3mhrVxoShoRHEjYxJEDfeNrwHKTQYHjle8xqgZdztc5SxduH1ljT2ltKN03nJ7rZR9qroB/mlYhPnVNjd4B00dutmPpENKMrD0/va5dOkSB9wp3BydoELZk5EHwtjfcjlMugTuri6U1/9iDwelyvt1ftkheHC2oUHNH13nhiOM4KcF9GnYTKZpsDuBu9VFSLQG6gO4p5cLtWp6gF0d3Vu3fy55omsc9K1rbVZqewLComw5dIH5QWFhHHteMzAeORA4anHcge1xnLtJ24N9nsq0G1ja4N3UBroDVQHx9ZWV5AOJMDj2UOAJTYJp8SWSJqhiOmdWjONjXWS1iZ4y9IWZianpj84b2lE9IQ2SXNN1Yg/swmFp6L9pIgsLQBgSA4NYsV8UNuwD9cG76lzFjHfdyGjwYlTkkFazLQKxEkY7EEmOVFS8lwfX/rVHFI0IyWduUHAWeBcxLYqFHL5+VM/1dWU8x2cAoIEcE9sqK+5cPqYvge2DSPWu5ygSb9c2dfe6zRRFYiad+RJK5tJvinAu/WrhxaRBQD/wFBmg3dmOQFGEXHxU9rbJNWVtxQKRamoANzUORlQ38c34Prlc4HBArKcIG6s7+pog6EdmeUfJ4g+mfsfyNdsQX1OG0F4jLePP7MIIZX1Tp4yS9Lakn/1ly2xb9+uhswZKWnQVMPtGqlU9WEiywnwGiqImj13MTkRXNXFc7/sM29V9PUp6moqRDeu3iy6Aq+11WXQfaBlQ8DocsLY2Ena8LHDRdBb8+G1/pPDxEUQs8GdpAdBy54rzHc4EWREQeH9gmppYWhfy0QQE0HhIQgLoPAQhAVQeAjCAig8BGEBFB6CsIClCM/w42Abm1pGehEPQUYTjHgIwgIoPARhARQegrAACg9BWACFhyAswL7weDx7aiGIlWBj8/8joP+bfy+AoAAAAABJRU5ErkJggg==" alt=""></p> <blockquote><p>ä¹¦å†™è‡ªå®šä¹‰ç»„ä»¶å‰å®‰è£…å¥½better-scrollæ’ä»¶ é¡¹ç›®ä¾èµ–</p></blockquote> <h5 id="ç¬¬ä¸€æ­¥-å†™å¥½åŸºæœ¬domç»“æ„å’Œæ ·å¼"><a href="#ç¬¬ä¸€æ­¥-å†™å¥½åŸºæœ¬domç»“æ„å’Œæ ·å¼" class="header-anchor">#</a> ç¬¬ä¸€æ­¥.å†™å¥½åŸºæœ¬domç»“æ„å’Œæ ·å¼</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>slider<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>slider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>slider-group<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sliderGroup<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dots<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) of dots<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{active:currentpageindex===index}<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dots-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-stylus extra-class"><pre class="language-stylus"><code>&lt;style lang=<span class="token string">'stylus'</span> scoped&gt;
<span class="token atrule-declaration"><span class="token atrule">@import</span> <span class="token string">'~@/common/stylus/variable.styl'</span></span>
<span class="token selector">.slider</span>
  <span class="token property-declaration"><span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token number">1</span>px</span>
  <span class="token selector">.slider-group</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> relative</span>
    <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
    <span class="token property-declaration"><span class="token property">white-space</span><span class="token punctuation">:</span> nowrap</span>
    <span class="token selector">.slide-item</span>
      <span class="token comment">// * è½®æ’­å›¾slidergroupçš„æ ·å¼</span>
      <span class="token property-declaration"><span class="token property">float</span><span class="token punctuation">:</span> left</span>
      <span class="token property-declaration"><span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box</span>
      <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
      <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
      <span class="token selector">a</span>
        <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> block</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
        <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
        <span class="token property-declaration"><span class="token property">text-decoration</span><span class="token punctuation">:</span> none</span>
      <span class="token selector">img</span>
        <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> block</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
  <span class="token selector">.dots</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
    <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">130.075</span>px</span>
    <span class="token property-declaration"><span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">12</span>px</span>
    <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
    <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">8</span>px</span>
    <span class="token selector">.dots-item</span>
      <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> inline-block</span>
      <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">4</span>px</span>
      <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">8</span>px</span>
      <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">8</span>px</span>
      <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50%</span></span>
      <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-text-l</span>
      <span class="token selector">&amp;.active</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
        <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">5</span>px</span>
        <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-text-ll</span>
&lt;/style&gt;

</code></pre></div><h5 id="ç¬¬äºŒæ­¥-å®šä¹‰å¥½sliderç»„ä»¶çš„å±æ€§"><a href="#ç¬¬äºŒæ­¥-å®šä¹‰å¥½sliderç»„ä»¶çš„å±æ€§" class="header-anchor">#</a> ç¬¬äºŒæ­¥.å®šä¹‰å¥½sliderç»„ä»¶çš„å±æ€§</h5> <div class="language-js extra-class"><pre class="language-js"><code> props<span class="token operator">:</span> <span class="token punctuation">{</span>
    loop<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// *å¾ªç¯è½®æ’­</span>
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    autoPlay<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// *è‡ªåŠ¨è½®æ’­</span>
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    interval<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// *è½®æ’­é—´éš”</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">3000</span>
    <span class="token punctuation">}</span>

</code></pre></div><h5 id="ç¬¬ä¸‰æ­¥-è®¡ç®—å‡ºsliderçš„å®½åº¦-ç„¶åå†æ ¹æ®æ­¤è®¾ç½®slidergroupçš„å®½åº¦"><a href="#ç¬¬ä¸‰æ­¥-è®¡ç®—å‡ºsliderçš„å®½åº¦-ç„¶åå†æ ¹æ®æ­¤è®¾ç½®slidergroupçš„å®½åº¦" class="header-anchor">#</a> ç¬¬ä¸‰æ­¥.è®¡ç®—å‡ºsliderçš„å®½åº¦ ç„¶åå†æ ¹æ®æ­¤è®¾ç½®sliderGroupçš„å®½åº¦</h5> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">_setSliderwidth</span> <span class="token punctuation">(</span><span class="token parameter">isResize</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>sliderGroup<span class="token punctuation">.</span>children
      <span class="token comment">// better-scroll ä¼šå¤šå¤åˆ¶ä¸¤ä»½</span>
      <span class="token keyword">let</span> width <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment">// æ‹¿åˆ°slideå®½åº¦</span>
      <span class="token keyword">let</span> sliderwidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>slider<span class="token punctuation">.</span>clientWidth
      <span class="token comment">// è®¡ç®—slidegroupçš„å®½åº¦</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token comment">// æ·»åŠ domæ ·å¼</span>
        <span class="token function">addClass</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">'slide-item'</span><span class="token punctuation">)</span>
        <span class="token comment">// childçš„å®½åº¦</span>
        child<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> sliderwidth <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token comment">// æ€»å®½åº¦</span>
        width <span class="token operator">+=</span> sliderwidth
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loop <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isResize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¾ªç¯åˆ‡æ¢ widthåŠ ä¸¤å€sliderwidth</span>
        width <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> sliderwidth
      <span class="token punctuation">}</span>
      <span class="token comment">// è®¾ç½®slider-groupå®½åº¦</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>sliderGroup<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>å…¶ä¸­ä¸ºæ¯ä¸ªsliderçš„childrenæ·»åŠ æ ·å¼æ—¶é‡‡ç”¨çš„æ˜¯è°ƒç”¨æ¨¡å—
,é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åˆ¤æ–­æ˜¯å¦æœ‰è¯¥class,ç„¶åå†å°†classæ·»åŠ åˆ°domä¸Šã€‚</p></div> <p>æ¨¡å—ä»£ç dom.jsä¸º</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hasClass</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// todo:/(^|\\s)+(className)+(\\s|$)/</span>
  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^|\\s)'</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">'(\\s|$)'</span><span class="token punctuation">)</span>
  <span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰class</span>
  <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>className<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">addClass</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasClass</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç©ºç™½é—´éš”å¼€</span>
  <span class="token keyword">let</span> newClass <span class="token operator">=</span> el<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
  newClass<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span>
  <span class="token comment">// è¿æ¥æˆæ–°class</span>
  el<span class="token punctuation">.</span>className <span class="token operator">=</span> newClass<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h5 id="ç¬¬å››æ­¥-åˆå§‹åŒ–slider"><a href="#ç¬¬å››æ­¥-åˆå§‹åŒ–slider" class="header-anchor">#</a> ç¬¬å››æ­¥.åˆå§‹åŒ–slider</h5> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">_initSlider</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>slider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>slider<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        scrollX<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        scrollY<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// !æƒ¯æ€§ å¾ªç¯ è½®æ’­é—´éš” å¯ä»¥ç‚¹å‡»</span>
        momentum<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        snap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        snapLoop<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loop<span class="token punctuation">,</span>
        snapThreshold<span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
        snapSpeed<span class="token operator">:</span> <span class="token number">300</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="ç¬¬äº”æ­¥-æ·»åŠ ä¸‹æ–¹çš„dotsæ§åˆ¶å™¨"><a href="#ç¬¬äº”æ­¥-æ·»åŠ ä¸‹æ–¹çš„dotsæ§åˆ¶å™¨" class="header-anchor">#</a> ç¬¬äº”æ­¥.æ·»åŠ ä¸‹æ–¹çš„dotsæ§åˆ¶å™¨</h5> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      dots<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      currentpageindex<span class="token operator">:</span> <span class="token number">0</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">_initdots</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dots <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h5 id="ç¬¬å…­æ­¥-è®¡ç®—å‡ºè½®æ’­ä¸‹æ ‡-å®ç°dotsçš„æ ·å¼"><a href="#ç¬¬å…­æ­¥-è®¡ç®—å‡ºè½®æ’­ä¸‹æ ‡-å®ç°dotsçš„æ ·å¼" class="header-anchor">#</a> ç¬¬å…­æ­¥.è®¡ç®—å‡ºè½®æ’­ä¸‹æ ‡ å®ç°dotsçš„æ ·å¼</h5> <p><strong>ç›‘å¬sliderçš„scrollEndäº‹ä»¶ ç„¶åè·å–ä¸‹æ ‡</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// è·å–å½“å‰ä¸‹æ ‡ æ»šåŠ¨æ´¾å‘scrollEndäº‹ä»¶ </span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>slider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'scrollEnd'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// pageX å½“å‰pageindex</span>
        <span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slider<span class="token punctuation">.</span><span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pageX
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// é»˜è®¤ç¬¬ä¸€ä¸ªå…ƒç´ ä¼šæ·»åŠ æ‹·è´ æ‰€ä»¥è¦å‡æ‰ä¸€</span>
          pageIndex <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentpageindex <span class="token operator">=</span> pageIndex
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//! è½®æ’­å‰å¿…é¡»æ¸…é™¤ ä¸ç„¶è·³åˆ°ç¬¬äºŒç« å›¾ç‰‡ä¼šstop ç„¶åå› ä¸ºsettimeoutåªæ‰§è¡Œä¸€æ¬¡ æ‰€ä»¥å†æ‰§è¡Œä¸€é_play()</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><strong>è·å–åˆ°ä¸‹æ ‡å ç»™domè®¾ç½®activeæ ·å¼</strong></p> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dots<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) of dots<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{active:currentpageindex===index}<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dots-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="ç¬¬ä¸ƒæ­¥-æ·»åŠ è‡ªåŠ¨è½®æ’­"><a href="#ç¬¬ä¸ƒæ­¥-æ·»åŠ è‡ªåŠ¨è½®æ’­" class="header-anchor">#</a> ç¬¬ä¸ƒæ­¥.æ·»åŠ è‡ªåŠ¨è½®æ’­</h5> <p><strong>åˆ©ç”¨better-scrollçš„goToPageæ¥å£å®ç°</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_play</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentpageindex <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pageIndex <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// xä¸‹æ ‡ yä¸‹æ ‡ æ¯ä¸ªè½®æ’­åˆ‡æ¢åŠ¨ç”»300ms è®¾ç½®æ—¶é—´é—´éš”</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>slider<span class="token punctuation">.</span><span class="token function">goToPage</span><span class="token punctuation">(</span>pageIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>æ³¨æ„:æ­¤æ—¶çš„è½®æ’­å›¾è½®æ’­åˆ°ç¬¬äºŒå¼ å›¾è¿˜æ˜¯ä¸ä¼šç»§ç»­è‡ªåŠ¨è½®æ’­,è¿™æ˜¯å› ä¸ºslierçš„autoplayæ˜¯è®¾ç½®äº†setTimeoutå‡½æ•° æ‰€ä»¥å¿…é¡»åœ¨åˆå§‹åŒ–æ—¶æ¸…é™¤æ‰timer,ç„¶åå†é‡æ–°è®¡ç®—ä¸€é,è¿˜éœ€è¦ç›‘å¬åˆ°çª—å£å˜åŒ–ç„¶åé‡æ–°è®¡ç®—å®½åº¦,ä¼ ä¸€ä¸ªå‚æ•°æ§åˆ¶æ˜¯å¦é‡æ–°è®¡ç®—</p></div> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//! è½®æ’­å‰å¿…é¡»æ¸…é™¤ ä¸ç„¶è·³åˆ°ç¬¬äºŒç« å›¾ç‰‡ä¼šstop ç„¶åå› ä¸ºsettimeoutåªæ‰§è¡Œä¸€æ¬¡ æ‰€ä»¥å†æ‰§è¡Œä¸€é_play()</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

<span class="token operator">...</span><span class="token punctuation">.</span>
 <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setSliderwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_initdots</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_initSlider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token comment">// ç›‘å¬åˆ°çª—å£å‘ç”Ÿæ”¹å˜å°±é‡æ–°è®¡ç®—å®½åº¦</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>slider<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setSliderwidth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>slider<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>è¯·æ±‚recommendsæ˜¯ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚,å®ƒåŠ è½½å‡ºèµ„æºæœ‰å»¶æ—¶,æ‰€ä»¥å†slotæ¸²æŸ“åˆ°çˆ¶ç»„ä»¶å‰å¯èƒ½recommedsæ˜¯ä¸€ä¸ªç©ºæ•°ç»„,ä¼šå¯¼è‡´æ ·å¼æ·»åŠ å¤±æ•ˆ</p></div> <p><strong>è§£å†³æ–¹æ³•</strong>:åœ¨sliderç»„ä»¶çš„çˆ¶domä¸Šç»‘å®šv-ifæ§åˆ¶</p> <div class="language-html extra-class"><pre class="language-html"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>recommends.length<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>slider-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slider</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) in recommends<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.linkUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.picUrl<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slider</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>ç»¼ä¸Š,slideç»„ä»¶ç®—æ˜¯å®Œæˆäº†,è‡ªå·±å†™æ’ä»¶ç»„ä»¶è¿˜æ˜¯æŒºçˆ½çš„,å¾ˆæœ‰åˆ©äºé€ è½®å­çš„èƒ½åŠ›æå‡</strong></p> <h3 id="æ¨èæ­Œå•é¡µé¢"><a href="#æ¨èæ­Œå•é¡µé¢" class="header-anchor">#</a> æ¨èæ­Œå•é¡µé¢</h3> <h4 id="åŸºæœ¬ç»“æ„å¼€å‘-æ•°æ®è·å–"><a href="#åŸºæœ¬ç»“æ„å¼€å‘-æ•°æ®è·å–" class="header-anchor">#</a> åŸºæœ¬ç»“æ„å¼€å‘ æ•°æ®è·å–</h4> <p>domç»“æ„</p> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>recommend-list<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>recommendscroll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>çƒ­é—¨æ­Œå•æ¨è<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) in recommendsList<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.imgurl<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.creator.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.dissname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>è¿™ä¸ªrecommendListè·å–çš„æ•°æ®ä¸æ˜¯ç”¨jsonpæŠ“å–çš„,è€Œæ˜¯ä¿®æ”¹devserveä»£ç†,åˆ©ç”¨axioså‘é€ajaxæ•°æ®è·å–</p></div> <p>ä»£ç å¦‚ä¸‹:
é¦–å…ˆä¿®æ”¹webpac-dev-config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// !æ¨¡æ‹Ÿæ•°æ®éœ€è¦å¼•å…¥çš„ä¾èµ–</span>
<span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> apiRoutes <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> apiRoutes<span class="token punctuation">)</span>

  <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'api/getRecommendlist'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg'</span>
                axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
                        referer<span class="token operator">:</span> <span class="token string">'https://c.y.qq.com/'</span><span class="token punctuation">,</span>
                        host<span class="token operator">:</span> <span class="token string">'c.y.qq.com'</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    params<span class="token operator">:</span> req<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token comment">// responseæ˜¯è·å–åˆ°çš„qqéŸ³ä¹</span>
                  çš„response
                    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>è¿”å›å›è°ƒè·å–æ•°æ®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getRecommendlist</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'/api/getRecommendlist'</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> commonParams<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    platform<span class="token operator">:</span> <span class="token string">'yqq'</span><span class="token punctuation">,</span>
    hostUin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    sin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    ein<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
    sortId<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    needNewCode<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    categoryId<span class="token operator">:</span> <span class="token number">10000000</span><span class="token punctuation">,</span>
    rnd<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'json'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> data
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>cssæ ·å¼</strong>:è¿ç”¨flexå¸ƒå±€</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code> <span class="token selector">.recommend-list</span>
      <span class="token selector">.list-title</span>
        <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">65</span>px</span>
        <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">65</span>px</span>
        <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
        <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
        <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme</span>
      <span class="token selector">.item</span>
        <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
        <span class="token property-declaration"><span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box</span>
        <span class="token property-declaration"><span class="token property">align-items</span><span class="token punctuation">:</span> center</span>
        <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">20</span>px <span class="token number">20</span>px <span class="token number">20</span>px</span>
        <span class="token selector">.icon</span>
          <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">60</span>px</span>
          <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">60</span>px</span>
          <span class="token property-declaration"><span class="token property">padding-right</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
        <span class="token selector">.text</span>
          <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
          <span class="token property-declaration"><span class="token property">flex-direction</span><span class="token punctuation">:</span> column</span>
          <span class="token property-declaration"><span class="token property">justify-content</span><span class="token punctuation">:</span> center</span>
          <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
          <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
          <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
          <span class="token selector">.name</span>
            <span class="token property-declaration"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px</span>
            <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text</span>
          <span class="token selector">.desc</span>
            <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-d</span>
</code></pre></div><h4 id="scrollç»„ä»¶å¼€å‘"><a href="#scrollç»„ä»¶å¼€å‘" class="header-anchor">#</a> scrollç»„ä»¶å¼€å‘</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ç”±äºbetter-scrollç»„ä»¶è¿ç”¨èµ·æ¥å¤ªå‘½ä»¤åŒ–,æ‰€ä»¥è‡ªå·±åŠ¨æ‰‹é€ è½®å­ å¼€å‘scrollç»„ä»¶</p></div> <h5 id="_1-å®šä¹‰scrollçš„å±æ€§"><a href="#_1-å®šä¹‰scrollçš„å±æ€§" class="header-anchor">#</a> 1.å®šä¹‰scrollçš„å±æ€§</h5> <div class="language-js extra-class"><pre class="language-js"><code> props<span class="token operator">:</span> <span class="token punctuation">{</span>
    probeType<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç›‘å¬æ»šåŠ¨äº‹ä»¶ç±»å‹</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    click<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h5 id="_2-åˆå§‹åŒ–scrollå¹¶ä»£ç†å†…ç½®better-scrollæ–¹æ³•"><a href="#_2-åˆå§‹åŒ–scrollå¹¶ä»£ç†å†…ç½®better-scrollæ–¹æ³•" class="header-anchor">#</a> 2.åˆå§‹åŒ–scrollå¹¶ä»£ç†å†…ç½®better-scrollæ–¹æ³•</h5> <div class="language-js extra-class"><pre class="language-js"><code> methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">_initscroll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BSroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        probeType<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>probeType<span class="token punctuation">,</span>
        click<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>click
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">enable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¯ç”¨better-scroll</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">disable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¯ç”¨better-scroll</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">refresh</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>scrollçš„ç‚¹å‡»äº‹ä»¶ä¼šå’ŒfastClickçš„ç‚¹å‡»å†²çª,è§£å†³åŠæ³•æ˜¯åœ¨domçš„çˆ¶å®¹å™¨ä¸ŠåŠ ä¸€ä¸ªneedsclickçš„class</p></div> <h5 id="ç›‘å¬åˆ°ä¼ è¿‡æ¥çš„æ•°æ®å°±é‡æ–°è®¡ç®—é«˜åº¦"><a href="#ç›‘å¬åˆ°ä¼ è¿‡æ¥çš„æ•°æ®å°±é‡æ–°è®¡ç®—é«˜åº¦" class="header-anchor">#</a> ç›‘å¬åˆ°ä¼ è¿‡æ¥çš„æ•°æ®å°±é‡æ–°è®¡ç®—é«˜åº¦</h5> <div class="language-js extra-class"><pre class="language-js"><code>watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç›‘å¬åˆ°dataå˜åŒ– é‡æ–°refreshè®¡ç®—é«˜åº¦</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h5 id="æ•°æ®æ‡’åŠ è½½"><a href="#æ•°æ®æ‡’åŠ è½½" class="header-anchor">#</a> æ•°æ®æ‡’åŠ è½½</h5> <p>ä½¿ç”¨vue-lazyloadæ’ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¼ å…¥é»˜è®¤å›¾ç‰‡å‚æ•°</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueLazyload<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loading<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./common/image/default.png'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ç„¶åç›´æ¥åœ¨imgæ ‡ç­¾ä¸Šå°†<span class="token operator">:</span>srcæ›¿æ¢ä¸ºv<span class="token operator">-</span>lazyå°±<span class="token constant">OK</span>äº†

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>è§£å†³bug:ç­‰å¾…æ•°æ®æ¸²æŸ“domä¹‹åæ‰èƒ½é‡æ–°è®¡ç®—é«˜åº¦ ä¸”è¦ç­‰åˆ°å®Œå…¨åŠ è½½å†è¿›è¡Œè®¡ç®—</p></div> <p>ç¤ºä¾‹ä»£ç 
ç»™imageæ·»åŠ loadäº‹ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">loadimage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkLoaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// !å›¾ç‰‡åŠ è½½å®Œ é‡æ–°è®¡ç®— ç¬¬ä¸€å¼ å›¾ç‰‡åŠ è½½å°±è®¡ç®—é«˜åº¦ åé¢ä¸éœ€è¦é‡æ–°è®¡ç®—</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>checkLoaded <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><h5 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="header-anchor">#</a> å®ç°æ•ˆæœ</h5> <p><img src="/assets/img/2019-11-17-12-41-51.487c479f.png" alt=""></p> <h3 id="singerç»„ä»¶"><a href="#singerç»„ä»¶" class="header-anchor">#</a> singerç»„ä»¶</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ä½ é€šè¿‡jsonpæ‹¿åˆ°çš„singeræ•°æ®å¹¶ä¸æ˜¯ç¬¦åˆvueè°ƒç”¨çš„jsonpæ ¼å¼
ä½ å¿…é¡»è¦å°è£…å­—æ¯è¡¨ç±»æ’åºçš„å¯¹è±¡æ•°ç»„</p></div> <h4 id="ä½ æ‹¿åˆ°çš„jsonpæ•°æ®"><a href="#ä½ æ‹¿åˆ°çš„jsonpæ•°æ®" class="header-anchor">#</a> ä½ æ‹¿åˆ°çš„jsonpæ•°æ®</h4> <p><img src="/assets/img/2019-11-19-17-23-45.7dff38ef.png" alt=""></p> <h4 id="ä½ è¦åšçš„äº‹æƒ…"><a href="#ä½ è¦åšçš„äº‹æƒ…" class="header-anchor">#</a> ä½ è¦åšçš„äº‹æƒ…</h4> <ul><li>å®šä¹‰ä¸€ä¸ªmapå¯¹è±¡:é‡Œé¢åŒ…å«äº†<strong>çƒ­é—¨æ­Œæ‰‹listå¯¹è±¡</strong>(<strong>title,items[]</strong>),è¿˜æœ‰<strong>æ­Œæ‰‹listå¯¹è±¡</strong>(<strong>title,items</strong>)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> map<span class="token operator">=</span><span class="token punctuation">{</span>
  hot<span class="token operator">:</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span>'çƒ­é—¨ï¼Œ
    items<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>åˆ›å»ºSingerç±»,åé¢éœ€è¦å¾€itemsæ•°ç»„ä¸­pushè¯¥å¯¹è±¡</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Singer</span><span class="token punctuation">{</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>id<span class="token punctuation">,</span>name<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token operator">=</span>id
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
  <span class="token keyword">this</span><span class="token punctuation">.</span>avtar<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ttps://y.gtimg.cn/music/photo_new/T001R300x300M000</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg?max_age=2592000</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>å¾ªç¯éå†,å°è£…æ•°æ®</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// çƒ­é—¨æ­Œæ‰‹åŒº</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>index<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      map<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Singer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span>item<span class="token punctuation">.</span>Fsinger_mid
        name<span class="token operator">:</span>item<span class="token punctuation">.</span>Fsinger_name
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ­Œæ‰‹åŒº</span>
    <span class="token keyword">const</span> key<span class="token operator">=</span>item<span class="token punctuation">.</span>Findex
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      map<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span>key<span class="token punctuation">,</span>
        items<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Singer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span>item<span class="token punctuation">.</span>Fsinger_mid
      name<span class="token operator">:</span>item<span class="token punctuation">.</span>Fsinger_name
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>è¿™æ ·æ•°æ®å°±ä¼šå˜æˆå¦‚ä¸‹å½¢å¼</strong>
ä»¥å­—æ¯é¡ºåºæ’åˆ—çš„mapå¯¹è±¡
<img src="/assets/img/2019-11-19-18-08-15.c37c1a96.png" alt=""></p> <h4 id="å¯¹æ•°æ®è¿›è¡Œæ’åº"><a href="#å¯¹æ•°æ®è¿›è¡Œæ’åº" class="header-anchor">#</a> å¯¹æ•°æ®è¿›è¡Œæ’åº</h4> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>æˆ‘ä»¬åªæ˜¯ç”¨mapå¯¹è±¡ç››æ»¡äº†hotå¯¹è±¡å’Œmap[key]å¯¹è±¡,ç„¶è€Œvueéå†å¯¹è±¡ä¼šæ˜¯ä¸€ä¸ªæ— åºçš„ç»“æœ,æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯è¦å°†
å¯¹è±¡ç»è¿‡è¿‡æ’åºè£…å…¥æ•°ç»„,å¾—åˆ°ä¸€ä¸ªæ»¡æ„çš„å¯¹è±¡æ•°ç»„</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> hot<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> singers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> value<span class="token operator">=</span>map<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[a-zA-Z]/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœåŒ¹é…çš„æ˜¯å­—æ¯</span>
    singers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>title <span class="token operator">===</span> <span class="token string">'çƒ­é—¨'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    hot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token keyword">return</span> hot<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>singers<span class="token punctuation">)</span>

</code></pre></div><p><strong>Getåˆ°é¢„æœŸçš„æ•ˆæœ</strong>:
<img src="/assets/img/2019-11-19-19-57-52.9d68aa65.png" alt=""></p> <h3 id="å®ç°åˆ—è¡¨å’Œç´¢å¼•è¡¨"><a href="#å®ç°åˆ—è¡¨å’Œç´¢å¼•è¡¨" class="header-anchor">#</a> å®ç°åˆ—è¡¨å’Œç´¢å¼•è¡¨</h3> <h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="header-anchor">#</a> åˆ—è¡¨</h4> <ul><li>domç»“æ„ï¼šé€šå¸¸æ˜¯scroll&gt;ul&gt;li&gt;h2,ul&gt;li&gt;img,name</li></ul> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(group,index) in data<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{group.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) in group.items<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list-group-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.avatar<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>cssæ ·å¼:listviewç›¸å¯¹å®šä½,å®šä¹‰å®¹å™¨ä¸ºå½“å‰å±å¹•,å¯¹åº”çš„list-group-itemæ˜¯ä¸€ä¸ªflexå¸ƒå±€ ,å…ƒç´ å‚ç›´å±…ä¸­å¯¹é½</li></ul> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.listview</span>
  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> relative</span>
  <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
  <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
  <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
  <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-background</span>
  <span class="token selector">.list-group</span>
    <span class="token property-declaration"><span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
    <span class="token selector">.title</span>
      <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
      <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
      <span class="token property-declaration"><span class="token property">padding-left</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
      <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-small</span>
      <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
      <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-highlight-background</span>
    <span class="token selector">.list-group-item</span>
      <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
      <span class="token property-declaration"><span class="token property">align-items</span><span class="token punctuation">:</span> center</span>
      <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px <span class="token number">0</span> <span class="token number">0</span> <span class="token number">30</span>px</span>
      <span class="token selector">.avatar</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50</span>px</span>
        <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">50</span>px</span>
        <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50%</span></span>
      <span class="token selector">.name</span>
        <span class="token property-declaration"><span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
        <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
        <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
</code></pre></div><h4 id="ç´¢å¼•è¡¨"><a href="#ç´¢å¼•è¡¨" class="header-anchor">#</a> ç´¢å¼•è¡¨</h4> <ul><li>é¦–å…ˆç´¢å¼•è¡¨é‡Œé¢çš„æ•°æ®æ˜¯éœ€è¦æˆªå–group.titleçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² æ‰€ä»¥è¿™é‡Œä¼šå¯¹æ•°ç»„è¿›è¡Œå¤„ç†</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è®¡ç®—å±æ€§ä¸­å®šä¹‰</span>
 <span class="token function">shortcutlist</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">group</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// *mapæ–¹æ³• å¾—åˆ°ä¸€ä¸ªç»è¿‡å¤„ç†åçš„æ•°ç»„ çƒ­é—¨åŒº å­—æ¯ç´¢å¼•åŒº substræ‹¿ç¬¬ä¸€ä¸ªå­—ç¬¦</span>
        <span class="token keyword">return</span> group<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Array.map(callback)æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªå¤„ç†è¿‡åçš„æ•°ç»„,
substr(a):å–å¯¹åº”ä¸‹æ ‡ä¹‹åçš„å…ƒç´ 
substr(a,b):å–ä¸‹æ ‡ä¸ºa-bçš„å…ƒç´ 
substring(a):æˆªå–å¯¹åº”ä¸‹æ ‡å…ƒç´ 
substring(a,b):æˆªå–a-bä¸‹æ ‡çš„å…ƒç´ </p></div> <ul><li>domç»“æ„</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list-shortcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item,index) of shortcutlist<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:data-index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@touchStart.stop.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>OnshortcutTouchstart<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@touchStop.stop.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>OnshortcutTouchstop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>å¯¹åº”æ ·å¼:1.å‚ç›´å±…ä¸­ 2.ç»å¯¹å®šä½é å³  3.å¯¹åº”å®¹å™¨æ ·å¼</li></ul> <div class="language-stylus extra-class"><pre class="language-stylus"><code>  <span class="token selector">.list-shortcut</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
    <span class="token property-declaration"><span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
    <span class="token property-declaration"><span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50%</span></span>
    <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
    <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">10</span>px</span>
    <span class="token property-declaration"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50%</span><span class="token punctuation">)</span></span></span>
    <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-background-d</span>
    <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica</span>
    <span class="token selector">.item</span>
      <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">3</span>px</span>
      <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
      <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
      <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-small</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>é€šå¸¸æ˜¯ä½¿ä¸€ä¸ªå®¹å™¨å‚ç›´æ–¹å‘å±…ä¸­çš„åšæ³•æ˜¯ï¼š
posiition:absolute
top:50%
margin-top:-height
ä½†æ˜¯è¿™æ˜¯åœ¨çŸ¥é“å®¹å™¨é«˜åº¦çš„å‰æä¸‹ï¼Œæˆ‘ä»¬åœ¨ä¸çŸ¥é“å…ƒç´ é«˜åº¦çš„å‰æä¸‹ä½¿ç”¨transformå¹³ç§»çš„æ–¹æ³•æ¥è¿›è¡Œå¤„ç†
posiition:absolute
top:50%
transform:translateY(-50%)</p></div> <p><img src="/assets/img/2019-11-25-23-50-55.80c39311.png" alt=""></p> <h3 id="ç´¢å¼•åˆ—è¡¨è”åŠ¨å®ç°"><a href="#ç´¢å¼•åˆ—è¡¨è”åŠ¨å®ç°" class="header-anchor">#</a> ç´¢å¼•åˆ—è¡¨è”åŠ¨å®ç°</h3> <h4 id="åŠŸèƒ½åˆ†æ"><a href="#åŠŸèƒ½åˆ†æ" class="header-anchor">#</a> åŠŸèƒ½åˆ†æ</h4> <ul><li><h4>ç‚¹å‡»å³ä¾§shortcutåŒºåŸŸ,èƒ½å¤Ÿå®ç°å·¦ä¾§æ­Œæ‰‹åˆ—è¡¨åŒºçš„æ»šåŠ¨åˆ°ç›¸åº”çš„æ ‡é¢˜</h4></li> <li><h4>æ»‘åŠ¨å³ä¾§çš„shrotcutåŒºåŸŸ,èƒ½å¤Ÿå®ç°å·¦ä¾§æ»šåŠ¨ å·¦ä¾§æ»šåŠ¨ä¹Ÿèƒ½æ˜ å°„å³è¾¹çš„shortcutåŒºåŸŸé«˜äº®</h4></li> <li><h4>æ­Œæ‰‹åˆ—è¡¨åŒºæœ‰ä¸€ä¸ªå›ºå®šæ ‡é¢˜ï¼Œå¸®åŠ©è¯»è€…æŸ¥è¯¢å½“å‰åŒºåŸŸ</h4></li></ul> <br> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>jsçš„touchstart()å’Œtouchmoveèƒ½å¤Ÿæœ‰æ•ˆåœ°å¸®åŠ©å®ç°åŠŸèƒ½</p></div> <h4 id="ç‚¹å‡»æ»šå±å®ç°"><a href="#ç‚¹å‡»æ»šå±å®ç°" class="header-anchor">#</a> ç‚¹å‡»æ»šå±å®ç°</h4> <div class="custom-block warning"><p class="custom-block-title">ä¸šåŠ¡åˆ†æ</p> <ol><li>è·å–åˆ°å³ä¾§ç´¢å¼•åŒºåŸŸçš„ä¸‹æ ‡ è§¦å‘ä¸€ä¸ªtouchstartäº‹ä»¶<br></li> <li>å°è£…åŸå…ˆå®šä¹‰å¥½çš„scrollç»„ä»¶,æ·»åŠ scrollToå’ŒscrollToElemnetäº‹ä»¶<br></li> <li>è®¾ç½®ä¸¤ä¸ªref,åˆ†åˆ«æ˜¯scrollçˆ¶domå’Œgroupå­dom,è°ƒç”¨scrollToElement Api</li></ol></div> <h4 id="è·å–å³ä¾§ç´¢å¼•åŒºåŸŸä¸‹æ ‡"><a href="#è·å–å³ä¾§ç´¢å¼•åŒºåŸŸä¸‹æ ‡" class="header-anchor">#</a> è·å–å³ä¾§ç´¢å¼•åŒºåŸŸä¸‹æ ‡</h4> <div class="custom-block tip"><p class="custom-block-title">æ¨è</p> <p>æ¨èå°è£…ä¸€ä¸ªæ–¹æ³•æ¥è·å–domä¸­çš„å˜é‡çš„å€¼</p></div> <p><strong>dom.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>name<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// shortcutåŒºåŸŸå®šä¹‰data-nameå˜é‡ è®°å½•indexç­‰å±æ€§</span>
  <span class="token keyword">const</span> prefix<span class="token operator">=</span><span class="token string">'data-'</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> name<span class="token punctuation">,</span>val<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>è·å–åˆ°äº†indexä¹‹å å¯¹scrollç»„ä»¶ä»£ç†ä¸¤ä¸ªæ»šåŠ¨æ–¹æ³•</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// é€šè¿‡applyæ”¹å˜thisæŒ‡å‘ä¸ºthis.scrollè¿™ä¸ªbetterscrollçš„å®ä¾‹ä¸­ å…¶å®å°±æ˜¯betterscrollçš„è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ä¿®æ”¹ä¸ºthis.scroll</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">,</span>argument<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">scrollToElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToElement</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">,</span>argument<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>è°ƒç”¨scrollToElementäº‹ä»¶</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> touchstartindex<span class="token operator">=</span><span class="token function">getData</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token string">'index'</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>scorll<span class="token punctuation">.</span><span class="token function">scrollToElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>listgroup<span class="token punctuation">[</span>touchstartindex<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="æ»‘åŠ¨æ»šå±å®ç°"><a href="#æ»‘åŠ¨æ»šå±å®ç°" class="header-anchor">#</a> æ»‘åŠ¨æ»šå±å®ç°</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>è·å–touchstartè®°å½•çš„yå€¼å’Œtouchmoveè®°å½•çš„yå€¼,è®¡ç®—äºŒè€…ä¹‹é—´å·®å€¼,ç„¶åé™¤ä»¥é”šç‚¹çš„é«˜åº¦[padding+é«˜åº¦],è®¡ç®—å‡ºé”šç‚¹æ•°é‡,æ»‘åŠ¨åˆ°ä½ç½®çš„ä¸‹æ ‡å°±ç­‰äºåˆšå¼€å§‹çš„touchstartçš„ä¸‹æ ‡+é”šç‚¹æ•°é‡</p></div> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">onshortcutTouchstart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">let</span> touchstartindex<span class="token operator">=</span><span class="token function">getData</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token string">'index'</span><span class="token punctuation">)</span>
   <span class="token keyword">let</span> firstTouch<span class="token operator">=</span>e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>y1<span class="token operator">=</span>firstTouch<span class="token punctuation">.</span>pageY
   <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startindex<span class="token operator">=</span>toustartindex
 <span class="token punctuation">}</span>
 <span class="token function">onshortcutTouchmove</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstTouch<span class="token operator">=</span>e<span class="token punctuation">.</span>touched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>y2<span class="token operator">=</span>firstTouch<span class="token punctuation">.</span>pageY
  <span class="token keyword">let</span> moveindex<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>y2<span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">,</span>touch<span class="token punctuation">.</span>y1<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startindex<span class="token punctuation">)</span>
  <span class="token function">_scrollToElement</span><span class="token punctuation">(</span>moveindex<span class="token punctuation">)</span>

 <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>æ­¤å¤„åº”è¯¥è¿ç»­æ»šå±äº‹ä»¶ ç»™scrollä¼ ä¸€ä¸ªprobeType:3
ç»è¿‡å¤„ç†åå°±å¯ä»¥å®ç°æ»‘åŠ¨å³ä¾§ç´¢å¼•åŒºåŸŸå·¦ä¾§è·Ÿç€æ»šåŠ¨äº†</p></div> <h4 id="æ»‘åŠ¨å·¦ä¾§åŒºåŸŸå®ç°å³ä¾§é«˜äº®æ˜¾ç¤º"><a href="#æ»‘åŠ¨å·¦ä¾§åŒºåŸŸå®ç°å³ä¾§é«˜äº®æ˜¾ç¤º" class="header-anchor">#</a> æ»‘åŠ¨å·¦ä¾§åŒºåŸŸå®ç°å³ä¾§é«˜äº®æ˜¾ç¤º</h4> <div class="custom-block tip"><p class="custom-block-title">ä¸šåŠ¡é€»è¾‘</p> <ol><li>é¦–å…ˆè¦ç›‘å¬scrollçš„scrolläº‹ä»¶,ç„¶åç®—å‡ºå·¦ä¾§æ»šå±çš„ä½ç½®</li> <li>ç®—å‡ºæ»šå±çš„ä½ç½®åï¼Œè®¡ç®—å‡ºå„ä¸ªgroupçš„é«˜åº¦ï¼Œå­˜å…¥listheightæ•°ç»„ä¸­</li> <li>æ ¹æ®è¿™ä¸ªé«˜åº¦æ•°ç»„ï¼Œç›‘å¬scrollYçš„å˜åŒ–ï¼Œè®¡ç®—å‡ºcurrentindexçš„å€¼ å°±æ˜¯å½“å‰æ˜¯å“ªä¸€ä¸ªtitle</li> <li>æ ¹æ®currentindexç¡®å®šæ˜¯å“ªä¸€ä¸ªindexéœ€è¦åŠ é«˜äº®çš„æ ·å¼</li></ol></div> <h5 id="æ­¥éª¤ä¸€-ç›‘å¬scrolläº‹ä»¶"><a href="#æ­¥éª¤ä¸€-ç›‘å¬scrolläº‹ä»¶" class="header-anchor">#</a> æ­¥éª¤ä¸€ ç›‘å¬scrolläº‹ä»¶</h5> <p>é¦–å…ˆè¦ç»™scrollä¼ å…¥ä¸€ä¸ªlistenscrollçš„booleanå˜é‡ï¼Œç„¶ååœ¨åˆå§‹åŒ–çš„æ—¶å€™ç¡®å®šæ˜¯å¦è°ƒç”¨ç›‘å¬çš„äº‹ä»¶ï¼Œç„¶åå‘çˆ¶ç»„ä»¶ä¼ ä¸€ä¸ªscrolläº‹ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code>props<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token operator">...</span>
listenscroll<span class="token operator">:</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
methods<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token function">_initscroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>listenscroll<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">//è¿™é‡Œè¦ç¡®ä¿thisæŒ‡å‘vueå®ä¾‹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">pos</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      me<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span>pos<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p><strong>å®šä¹‰å¥½åçˆ¶ç»„ä»¶åœ¨createdé’©å­ä¸­å®šä¹‰listenscrollä¸ºtrueä¼ å…¥å­ç»„ä»¶</strong></p></div> <h5 id="æ­¥éª¤äºŒ-è®¡ç®—scrollyçš„å€¼å’Œå„ä¸ªgroupçš„é«˜åº¦"><a href="#æ­¥éª¤äºŒ-è®¡ç®—scrollyçš„å€¼å’Œå„ä¸ªgroupçš„é«˜åº¦" class="header-anchor">#</a> æ­¥éª¤äºŒ è®¡ç®—scrollYçš„å€¼å’Œå„ä¸ªGroupçš„é«˜åº¦</h5> <p>è®¡ç®—è¿™ä¸¤ä¸ªé«˜åº¦ä¹‹å‰ï¼Œå…ˆæƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦è®¡ç®—å‡ºæ»šå±çš„é«˜åº¦ï¼Œå’Œå„ä¸ªgroupçš„é«˜åº¦<br> <code>scrollY:ç”¨æ¥è®¡ç®—æ»šå±çš„ä½ç½®,åé¢é€šè¿‡watchç›‘å¬è¿™ä¸ªæ»šå±çš„å˜åŒ–å°±èƒ½è®¡ç®—å‡ºå½“å‰çš„title</code><br> <code>listheight:ç¡®å®šå„ä¸ªgroupçš„é«˜åº¦,ä¸€ä¸ªä¸Šé™ ä¸€ä¸ªä¸‹é™ç¡®å®šå½“å‰çš„currentindexçš„å€¼</code><br></p> <div class="language-js extra-class"><pre class="language-js"><code>scrollç»„ä»¶ç»‘å®šå¤„ç†scrolläº‹ä»¶
@scroll<span class="token operator">=</span><span class="token string">&quot;handlescroll&quot;</span>
methodsï¼š<span class="token punctuation">{</span>
  <span class="token function">handlescroll</span><span class="token punctuation">(</span><span class="token parameter">pos</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scrollY<span class="token operator">=</span>pos<span class="token punctuation">.</span>y
    <span class="token comment">// scroll.Yæ˜¯ä¸€ä¸ªè´Ÿæ•° é¡¶éƒ¨éƒ¨åˆ†æ˜¯ä¼šå¤§äº0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>è®¡ç®—å‡ºå„ä¸ªgroupçš„é«˜åº¦</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_calculateheight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> singerlist<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>listgroup
  <span class="token keyword">let</span> height<span class="token operator">=</span><span class="token number">0</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>listheight<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">&lt;</span>singerlist<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> item<span class="token operator">=</span>singerlist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>clientHeight
    height<span class="token operator">+=</span>item
    <span class="token keyword">this</span><span class="token punctuation">.</span>listheight<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="æ­¥éª¤ä¸‰-ç›‘å¬data-scrollyè®¡ç®—å‡ºcurrentindex"><a href="#æ­¥éª¤ä¸‰-ç›‘å¬data-scrollyè®¡ç®—å‡ºcurrentindex" class="header-anchor">#</a> æ­¥éª¤ä¸‰ ç›‘å¬data,scrollYè®¡ç®—å‡ºcurrentindex</h5> <p>æ¯å½“dataå˜åŒ–æ—¶ï¼Œé‡æ–°è®¡ç®—é«˜åº¦</p> <div class="language-js extra-class"><pre class="language-js"><code>watch<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_calculateheight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>è®¡ç®—currentindexä¹‹å‰,æƒ³ä¸€ä¸‹ä¹‹å‰åšè¿‡çš„å¤–å–é¡¹ç›®
ä¹‹å‰è®¡ç®—å‡ºcurrentindexæ˜¯è¿™æ ·åšçš„:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">currentindex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>listheight<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> height1<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>listheight<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">let</span> height2<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>listheight<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>height <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scorllY<span class="token operator">&gt;=</span>height1 <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scorllY<span class="token operator">&lt;</span>height2<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>ä½†æ˜¯ä½ ä¼šå‘ç°,å½“æ»šå±æ»šåŠ¨åˆ°é¡¶éƒ¨æˆ–è€…åº•æ­¥çš„æ—¶å€™scrollYçš„å€¼å¯èƒ½æ°¸è¿œå–ä¸åˆ°é‚£ä¸ªèŒƒå›´ï¼Œä¼šå‡ºç°é«˜äº®bugï¼Œæ‰€ä»¥è¿›è¡Œè¿›ä¸€æ­¥æ”¹å–„ã€‚</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">scrollY</span><span class="token punctuation">(</span><span class="token parameter">newY</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> æ»šå±é¡¶éƒ¨ <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>newY <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentindex<span class="token operator">=</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ä¸­é—´éƒ¨åˆ†</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>listheight<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> height1 <span class="token operator">=</span> listHeight<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">let</span> height2 <span class="token operator">=</span> listHeight<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment">//  listheightçš„å…ƒç´ æ¯”ç´¢å¼•è¡¨å…ƒç´ å¤šä¸€ä¸ª listHeight 0~23 å³ä¾§ 0~22</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-</span>newY <span class="token operator">&gt;=</span> height1 <span class="token operator">&amp;&amp;</span> <span class="token operator">-</span>newY <span class="token operator">&lt;</span> height2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// !height2è¡¨ç¤ºåˆ—è¡¨çš„æœ€åä¸€é¡¹</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentindex <span class="token operator">=</span> i
          <span class="token keyword">this</span><span class="token punctuation">.</span>diff <span class="token operator">=</span> height2 <span class="token operator">+</span> newY
          <span class="token comment">// console.log(this.currentIndex)</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// åº•éƒ¨ ç”±äºlistgroupçš„å…ƒç´ æ¯”shorcutçš„å…ƒç´ å¤šä¸€ä¸ª æ‰€ä»¥å°±åº”è¯¥å‡å»ä¸€ä¸ª</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>currentindex <span class="token operator">=</span> listheight<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span>
<span class="token punctuation">}</span>

</code></pre></div><p>è¿™äº›å·¥ä½œåšå®Œä¹‹å,åœ¨shortcutä¸Šç»‘å®šåŠ¨æ€æ ·å¼å³å¯æ˜¾ç¤ºé«˜äº®</p> <h5 id="fixedtitle"><a href="#fixedtitle" class="header-anchor">#</a> Fixedtitle</h5> <blockquote><p>ä¸ºäº†è¾¾åˆ°ä½“éªŒä¼˜åŒ–çš„æœ€å¤§åŒ–,ä¸Šä¸‹æ»‘åŠ¨åˆ—è¡¨å›ºå®šä¸€ä¸ªtitleåŒºå—,å½“æ•°æ®åŠ è½½æˆåŠŸæ—¶,titleçš„å€¼è·Ÿç€listæ»šåŠ¨è€Œæ»šåŠ¨,watchç›‘å¬èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ </p></blockquote> <ul><li>ç¡®è®¤ä¸šåŠ¡é€»è¾‘(æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠfixedtitleæ˜¾ç¤ºå‡ºæ¥,å¯ä»¥é€šè¿‡è®¡ç®—å±æ€§å§fixedtitleå†…å®¹è®¡ç®—å‡ºï¼Œç„¶ååº”ç”¨åœ¨dom)<br>
domç»“æ„</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fixedtitle<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fixedtitle<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fixed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{fixedtitle}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-stylus extra-class"><pre class="language-stylus"><code>  <span class="token selector">.fixedtitle</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
    <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
    <span class="token selector">.title</span>
      <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
      <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
      <span class="token property-declaration"><span class="token property">padding-left</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
      <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-small</span>
      <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
      <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-highlight-background</span>
</code></pre></div><ul><li>è®¡ç®—å‡ºfixedtitleçš„å€¼,v-showæ§åˆ¶æ˜¾ç¤º</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">fixedtitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollY<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentindex<span class="token punctuation">]</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token operator">:</span><span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">å»ºè®®</p> <p>è¿™æ ·æ˜¾ç¤ºä¼šæœ‰ä¸€ä¸ªå°bug,å°±æ˜¯å½“æ»‘åŠ¨åˆ°æ ‡é¢˜äº¤æ›¿å¤„ä¼šå‡ºç°æ ‡é¢˜é‡å çš„ç°è±¡ï¼Œå½±å“ä½“éªŒ,å¯ä»¥é€šè¿‡è®¡ç®—å‡ºdiffè·ç¦»çš„å¤§å°å°†ä¸Šä¸€ä¸ªtitleå¹³ç§»ä¸Šå»</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿™é‡Œæ˜¯è®¡ç®—æ»šåŠ¨ä½ç½®è·ç¦»ä¸Šé™çš„å·®å€¼</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>diff<span class="token operator">=</span>height2<span class="token operator">+</span>newY
watch<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token function">diff</span><span class="token punctuation">(</span><span class="token parameter">newval</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> fixedTop<span class="token operator">=</span><span class="token punctuation">(</span>newval <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newcal <span class="token operator">&lt;</span>titleHeight <span class="token punctuation">)</span> <span class="token operator">?</span> newval<span class="token operator">-</span>titleHight <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fixedTop <span class="token operator">===</span> fixedTop<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> 
    <span class="token comment">// é¿å…é‡å¤è®¡ç®—</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>fixedTop<span class="token operator">=</span>fixedTop
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>fixed<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform<span class="token operator">=</span><span class="token string">'translate3d(0,`${fixedTop}px`,0)'</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><hr> <p>ç»¼ä¸Š,singerçš„listviewç»„ä»¶å¼€å‘å®Œæˆ,è¯»è€…å¯ä»¥å€Ÿé‰´listviewé‡Œé¢æ‰ç”¨çš„ç»éªŒå»å¤„ç†ä¸€ç³»åˆ—çš„<strong>ç´¢å¼•è¡¨</strong>é—®é¢˜,<a href="https://github.com/251205668/mymusic" target="_blank" rel="noopener noreferrer">star<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>åˆ«å¿˜äº†</p> <h3 id="æ­Œæ‰‹è¯¦æƒ…é¡µ"><a href="#æ­Œæ‰‹è¯¦æƒ…é¡µ" class="header-anchor">#</a> æ­Œæ‰‹è¯¦æƒ…é¡µ</h3> <h4 id="å°è£…æ•°æ®"><a href="#å°è£…æ•°æ®" class="header-anchor">#</a> ğŸ”®å°è£…æ•°æ®</h4> <div class="custom-block tip"><p class="custom-block-title">åˆ†æ</p> <p>æˆ‘ä»¬æ‹¿åˆ°çš„æ•°æ®é‡Œé¢å¦‚ä¸‹å›¾,æ­Œæ‰‹è¯¦æƒ…é¡µé¢çš„ hotsongs æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ® <code>name</code>æ˜¯æ­Œæ›²å <code>al</code>ä¸“è¾‘ç›¸å…³ <code>ar</code>æ­Œæ›²æ¼”å”±çš„æ­Œæ‰‹ è¿˜æœ‰å°±æ˜¯æ­Œæ‰‹å mvid ç­‰ç­‰</p></div> <p><img src="https://i.loli.net/2019/12/28/YfydjNwxLZvcFgi.png" alt="QQæˆªå›¾20191228225755.png"></p> <blockquote><p>ä»¥åé‡åˆ°è¿™ç§éœ€è¦å°è£…æ•°æ®åˆ°ä¸€ä¸ªå¯¹è±¡ å°±åº”è¯¥ç”¨å·¥å‚æ¨¡å¼å»å®ä¾‹ä¸€ä¸ªç±» ç„¶åéå†æ•°æ®æ·»åŠ å¯¹è±¡åˆ°åˆå§‹åŒ–æ•°ç»„é‡Œå³å¯</p></blockquote> <p>åˆ›å»º song ç±»</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Song</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id<span class="token punctuation">,</span> singer<span class="token punctuation">,</span> name<span class="token punctuation">,</span> album<span class="token punctuation">,</span> image<span class="token punctuation">,</span> mv <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id
    <span class="token keyword">this</span><span class="token punctuation">.</span>singer <span class="token operator">=</span> singer
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>album <span class="token operator">=</span> album
    <span class="token keyword">this</span><span class="token punctuation">.</span>image <span class="token operator">=</span> image
    <span class="token keyword">this</span><span class="token punctuation">.</span>mv <span class="token operator">=</span> mv
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å·¥å‚æ¨¡å¼åˆ›å»ºå®ä¾‹å‡½æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createSong</span><span class="token punctuation">(</span><span class="token parameter">music</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Song</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// æ ¹æ®apiä¿®æ”¹å‚æ•°</span>
    id<span class="token operator">:</span> music<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    singer<span class="token operator">:</span> <span class="token function">filterSinger</span><span class="token punctuation">(</span>music<span class="token punctuation">.</span>ar<span class="token punctuation">)</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> music<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    album<span class="token operator">:</span> music<span class="token punctuation">.</span>al<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token comment">//ä¸“è¾‘å</span>
    image<span class="token operator">:</span> music<span class="token punctuation">.</span>al<span class="token punctuation">.</span>picUrl<span class="token punctuation">,</span>
    mv<span class="token operator">:</span> music<span class="token punctuation">.</span>mv<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>è¿™é‡Œçš„æ­Œæ‰‹ä¸æ­¢ä¸€ä¸ª,è¿™ç§æƒ…å†µå°±å®šä¹‰å‡½æ•°è¿”å›ä¸€ä¸ªåˆ†éš”å¼€æ­Œæ‰‹æ•°æ®çš„æ•°ç»„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">filterSinger</span><span class="token punctuation">(</span><span class="token parameter">singer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  ret <span class="token operator">=</span> singer<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token punctuation">.</span>name
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <p>äº‹å…ˆåšå¥½çš„äº‹æƒ…éƒ½å‡†å¤‡å¥½äº†ï¼Œå¼€å§‹å¤„ç†æ•°æ®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_normalizeSong</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> ret<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">createSong</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> ret
<span class="token punctuation">}</span>
</code></pre></div><p><s>## ğŸ“£æ€»ç»“</s> <s>è¿™æ ·å°±å®Œæˆäº†æ‰€æœ‰çš„å°è£…æ•°æ®ä»»åŠ¡,åç»­è¦å®Œæˆçš„äº‹æƒ…å°±æ˜¯åˆ©ç”¨æ•°æ®å®Œæˆ singerDetail ç»„ä»¶,åŠ æ²¹ï¼</s></p> <h4 id="è¯¦æƒ…é¡µå¼€å‘"><a href="#è¯¦æƒ…é¡µå¼€å‘" class="header-anchor">#</a> ğŸ’¥è¯¦æƒ…é¡µå¼€å‘</h4> <h5 id="singerdetail"><a href="#singerdetail" class="header-anchor">#</a> ğŸ’½singerdetail</h5> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>é¦–å…ˆè§£å†³ä¸Šä¸€æ¬¡å¼€å‘é—ç•™ä¸‹çš„é—®é¢˜:å¤„ç† song æ•°æ®ç„¶åå‘ list æ•°ç»„ä¸­æ·»åŠ å·¥å‚å¯¹è±¡ forEach ä¼šæŠ¥é”™,åŸå› æ˜¯è¯·æ±‚æ•°æ®æ˜¯å¼‚æ­¥åŠ è½½ é¡µé¢åˆšæ²¡æ¸²æŸ“ item å°±æ²¡æœ‰å€¼ å°±ä¼šæŠ¥é”™</p></div> <p><strong>è§£å†³åŠæ³•ï¼š</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®šä¹‰ä¸€ä¸ªç›‘æ§dataå˜é‡</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    listdetail<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    node<span class="token operator">:</span><span class="token keyword">null</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
methods<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">getSingerdetail</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>singer<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token operator">=</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>hotsongs
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
watch<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">node</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listdetail<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_normalize</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><p><code>watch</code>ç›‘å¬åˆ°æ•°æ®æŠŠæ•°æ®ç½®äºä»£ç†å˜é‡ä¸­ ç„¶åä¼ ç»™å­ç»„ä»¶ å°±å¯ä»¥è§£å†³å¼‚æ­¥åŠ è½½çš„é—®é¢˜</p> <p>æ•°æ®è§£å†³å®Œæ¯•å,å¼€å‘ dom</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singer-detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- musiclistéŸ³ä¹åˆ—è¡¨ç»„ä»¶ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>musiclist</span>
        <span class="token attr-name">:songs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>listdetail<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:bgImage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bgimage<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>musiclist</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¿™æ ·ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°å­è·¯ç”±çš„å¤ªå¹²äº†ï¼Œè®¾ç½®ä¸€ä¸ªè¿›åœºåŠ¨ç”»</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.change-enter-active<span class="token punctuation">,</span>.change-leave-active</span>
  <span class="token property-declaration"><span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">0.3</span>s</span>
<span class="token selector">.change-enter<span class="token punctuation">,</span>.change-leave-to</span>
  <span class="token comment">//å‘ç”±å¾€å·¦åˆ’ å…¥åœºç›¸å</span>
  <span class="token property-declaration"><span class="token property">transform</span><span class="token punctuation">:</span><span class="token func"><span class="token function">translate3d</span><span class="token punctuation">(</span><span class="token number">100%</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
</code></pre></div><p>ç”±æ­¤è”æƒ³åˆ°è®¾ç½®åŠ è½½ä¸­çš„æ—¶å€™ä¹Ÿç”¨åˆ°äº† translateY è®¾ç½®å±…ä¸­æ˜¾ç¤º
æ€»ç»“ä¸€ä¸‹é¡µé¢å±…ä¸­æŠ€å·§</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>å·²çŸ¥å…ƒç´ çš„å®½é«˜,è®¾ç½®å…ƒç´ å†³å®šå®šä½å±…ä¸­æ˜¾ç¤º</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
<span class="token property">top</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
<span class="token property">left</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
<span class="token property">margin-left</span><span class="token punctuation">:</span>-50%width
<span class="token property">margin-top</span><span class="token punctuation">:</span>-50%height
</code></pre></div><ol start="2"><li>æœªçŸ¥å®½é«˜,è®¾ç½®å…ƒç´ å±…ä¸­</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
<span class="token property">top</span><span class="token punctuation">:</span>50%
<span class="token property">left</span><span class="token punctuation">:</span>50%
<span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">translate3d</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span>-50%<span class="token punctuation">,</span>0<span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>åˆ©ç”¨ flex å¸ƒå±€è¿›è¡Œå‚ç›´å±…ä¸­</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span>flex
//æ¨ªè½´
<span class="token property">justify-content</span><span class="token punctuation">:</span>center
çºµè½´
<span class="token property">aligin-items</span><span class="token punctuation">:</span>center
</code></pre></div></div> <h5 id="mmusiclist"><a href="#mmusiclist" class="header-anchor">#</a> ğŸ“€mmusiclist</h5> <p><code>musiclist</code>åŒ…æ‹¬<code>back</code>å›¾æ ‡ <code>bg-image</code>èƒŒæ™¯å›¾ <code>filter</code>è’™å±‚ <code>play-wrapper</code>éšæœºæ’­æ”¾æŒ‰é’® <code>songlist</code>æ­Œæ›²åˆ—è¡¨ç»„ä»¶ <code>loading</code>åŠ è½½ç»„ä»¶
dom ç»“æ„</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>music-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bg-image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value">bgimage</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>filter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>play-wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>playwrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songs.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>play-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-play<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>éšæœºæ’­æ”¾çƒ­é—¨æ­Œæ›²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll</span>
      <span class="token attr-name">:probeType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>probetype<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:listenScroll</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scroll<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songs<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songlist-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>songlist</span> <span class="token attr-name">:songs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>songlist</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>!songs.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>loading-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loading</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loading</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>æ ·å¼ä¹¦å†™</h3> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.music-list</span>
  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span>fixed</span>
  <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span><span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">right</span><span class="token punctuation">:</span><span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span><span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">bottom</span><span class="token punctuation">:</span><span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">z-index</span><span class="token punctuation">:</span><span class="token number">100</span></span>
  <span class="token property-declaration"><span class="token property">background-color</span><span class="token punctuation">:</span>$color-background</span>
  <span class="token selector">.back</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span>absolute</span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">left</span> <span class="token number">6</span>px</span>
    <span class="token property-declaration"><span class="token property">z-index</span> <span class="token number">50</span></span>
    <span class="token selector">.icon-back</span>
      <span class="token property-declaration"><span class="token property">display</span> block</span>
      <span class="token property-declaration"><span class="token property">font-size</span> $font-size-large-x</span>
      <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">10</span>px</span>
      <span class="token property-declaration"><span class="token property">color</span> $color-theme</span>
  <span class="token selector">.title</span>
    <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span>absolute</span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">left</span> <span class="token number">10%</span></span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">80%</span></span>
    <span class="token property-declaration"><span class="token property">line-height</span> <span class="token number">40</span>px</span>
    <span class="token property-declaration"><span class="token property">font-size</span> $font-size-large</span>
    <span class="token property-declaration"><span class="token property">color</span> $color-text</span>
    <span class="token property-declaration"><span class="token property">text-align</span> center</span>
    <span class="token property-declaration"><span class="token property">z-index</span> <span class="token number">40</span></span>
    <span class="token func"><span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token selector">.bg-image</span>
    <span class="token property-declaration"><span class="token property">position</span> relative</span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">height</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">padding-top</span> <span class="token number">70%</span></span>
    <span class="token property-declaration"><span class="token property">transform-origin</span> top</span>
    <span class="token property-declaration"><span class="token property">background-size</span> cover</span>
    <span class="token selector">.play-wrapper</span>
      <span class="token property-declaration"><span class="token property">position</span> absolute</span>
      <span class="token property-declaration"><span class="token property">bottom</span> <span class="token number">20</span>px</span>
      <span class="token property-declaration"><span class="token property">z-index</span> <span class="token number">50</span></span>
      <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
      <span class="token selector">.play-button</span>
        <span class="token property-declaration"><span class="token property">box-sizing</span> border-box</span>
        <span class="token property-declaration"><span class="token property">width</span> <span class="token number">9.685</span>rem</span>
        <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">7</span>px <span class="token number">0</span></span>
        <span class="token property-declaration"><span class="token property">margin</span> <span class="token number">0</span> auto</span>
        <span class="token property-declaration"><span class="token property">text-align</span> center</span>
        <span class="token property-declaration"><span class="token property">border</span> <span class="token number">1</span>px solid $color-theme</span>
        <span class="token property-declaration"><span class="token property">color</span> $color</span>
        <span class="token selector">.icon-play</span>
          <span class="token property-declaration"><span class="token property">display</span> inline-block</span>
          <span class="token property-declaration"><span class="token property">vertical-align</span> middle</span>
          <span class="token property-declaration"><span class="token property">margin-right</span> <span class="token number">6</span>px</span>
          <span class="token property-declaration"><span class="token property">font-size</span> $font-size-medium-x</span>
        <span class="token selector">.text</span>
          <span class="token property-declaration"><span class="token property">display</span> inline-block</span>
          <span class="token property-declaration"><span class="token property">vertical-aligin</span> middle</span>
          <span class="token property-declaration"><span class="token property">font-size</span> $font-size-small</span>
    <span class="token selector">.filter</span>
      <span class="token property-declaration"><span class="token property">position</span> absolute</span>
      <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">left</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">background</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">)</span></span></span>
  <span class="token selector">.layer</span>
    <span class="token comment">//é™¤äº†bg-imageçš„å±å¹•å†…å®¹ ç”¨äºè®¡ç®—é«˜åº¦</span>
    <span class="token property-declaration"><span class="token property">position</span> relative</span>
    <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">background</span> $color-background</span>
  <span class="token selector">.list</span>
    <span class="token property-declaration"><span class="token property">position</span> fixed</span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">bottom</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">background</span> $color-background</span>
    <span class="token selector">.songlist-wrapper</span>
      <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">20</span>px <span class="token number">30</span>px</span>
  <span class="token selector">.loading-container</span>
    <span class="token property-declaration"><span class="token property">position</span> absolute</span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">60%</span></span>
    <span class="token property-declaration"><span class="token property">transform</span> <span class="token func"><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50%</span><span class="token punctuation">)</span></span></span>

</code></pre></div><p>æ ·å¼ä¹¦å†™å®Œæˆå,å¼€å§‹ä¹¦å†™é€»è¾‘éƒ¨åˆ†</p> <ul><li>bgimage ç”¨ computed è·å–</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">bgimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">background-image:url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>bgimage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>soglist å¼€å‘</li></ul> <p>ç›´æ¥è´´ä»£ç ,æ¯”è¾ƒç®€å•</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songlist<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(item, index) in songs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ item.name }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ getdesc(item) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'songlist'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    songs<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token comment">// default: []</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  components<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>songs<span class="token punctuation">.</span>singer <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>songs<span class="token punctuation">.</span>album
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>songs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getdesc</span><span class="token punctuation">(</span><span class="token parameter">song</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>song<span class="token punctuation">.</span>singer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>song<span class="token punctuation">.</span>album<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  watch<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
@import <span class="token string">'~@/common/stylus/variable.styl'</span>
@import <span class="token string">'~@/common/stylus/mixin.styl'</span>
.songlist
  .item
    <span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box
    <span class="token property">align-items</span><span class="token punctuation">:</span> center
    <span class="token property">display</span><span class="token punctuation">:</span> flex
    <span class="token property">height</span><span class="token punctuation">:</span> 64px
    .content
      <span class="token property">line-height</span><span class="token punctuation">:</span> 20px
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden
      .name
        <span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token property">color</span><span class="token punctuation">:</span> $color-text
      .desc
        <span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 4px
        <span class="token property">color</span><span class="token punctuation">:</span> $color-text-d
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>æ»šåŠ¨ songlist è®¾ç½®</li></ul> <ol><li>å‘ scroll ç»„ä»¶ä¼ å€¼(listenScroll:true,probeType:3 ç›‘å¬ scroll äº‹ä»¶,data æ•°æ®)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    proveType<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>
    scrollY<span class="token operator">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>listenScroll<span class="token operator">=</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>è®¾ç½® songlist æ»šåŠ¨åˆ°ä¸€å®šä½ç½®ä¸åŠ¨ ä¸”æ–‡å­—ç›–è¿‡å›¾ç‰‡ ä¸Šé¢ç•™ä¸€ä¸ª bg-image ä¸€å°éƒ¨åˆ†<div class="custom-block tip"><p class="custom-block-title">å®ç°æƒ³æ³•</p> <p>å…ˆå‘ç°å›¾ç‰‡ä¼šæ¶ˆå¤±ä¸è§ dom æ–¹æ³•è·å–åˆ° bg-image çš„é«˜åº¦ ç„¶åç»™ songlist è®¾ç½®é«˜åº¦
é€šè¿‡ç›‘å¬åˆ°<code>scroll</code>äº‹ä»¶ è·å–åˆ°å®æ—¶çš„ä½ç½® ç„¶åç›‘å¬<code>scrollY</code>çš„å€¼ å›ºå®šæœ€å¤§åç§»é‡ ç„¶åç›‘å¬è¿‡ç¨‹ä¸­æ‹¿åˆ°åç§»é‡ è®¾ç½®<code>layer</code>çš„å‘ä¸Šåç§» layer çš„ä½œç”¨(è¿™æ—¶éœ€è¦ä¸€ä¸ªä½äºæ­Œå•åˆ—è¡¨ä¸‹æ–¹çš„å›¾å±‚ï¼ˆ<code>bg-layer</code>ï¼‰ï¼Œå½“æ­Œå•åˆ—è¡¨å‘ä¸Šæ»‘åŠ¨çš„æ—¶å€™ filter ä¹Ÿè·Ÿç€å‘ä¸Šæ»‘åŠ¨ï¼Œ<strong>ç›–ä½ä¸‹æ–¹çš„å›¾åƒ</strong>) ç„¶å å¦‚æœåˆ°è¾¾åˆ°é¡¶éƒ¨(<code>val&lt;translateY</code>)æ—¶ è®¾ç½®å›¾åƒåŒºåŸŸçš„é«˜åº¦ä¸º 40px
å…¶ä»–æƒ…å†µå°±å’Œä¹‹å‰ç›¸ä¼¼ è¿™ä¸ªè¿‡ç¨‹ä¸­ bg-image çš„ index éƒ½æ˜¯ 0 å¦‚æœæ˜¯é¡¶éƒ¨ä½ç½® å°±æ˜¯ 10</p></div>
è¿™ä¸ªè®²èµ·æ¥æœ‰ç‚¹å¤æ‚ æ¥ä¸‹æ¥ä¸€æ­¥ä¸€æ­¥æ¥</li></ol> <ul><li>ç›‘å¬ scroll</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token parameter">pos</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>scrollY<span class="token operator">=</span>pos<span class="token punctuation">.</span>y
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è®¾ç½®å›¾ç‰‡çš„é«˜åº¦æ’‘å¼€</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>imageHeight<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>clientHeight
  <span class="token comment">//è·å–ç»„ä»¶çš„dom åé¢$el</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>list<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>imageHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>layer åç§»ä¸€å®šé‡ å›ºå®šä¸åŠ¨</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>minTranslateY<span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>imageHeight <span class="token operator">+</span><span class="token constant">TITLE_HEIGHT</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">scrollY</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> zIndex<span class="token operator">=</span><span class="token number">0</span>
    <span class="token keyword">let</span> translateY<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minTranslateY<span class="token punctuation">,</span>val<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'transform'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>translateY<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0)</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refss<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'webkitTransform'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>translate3Y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0)</span><span class="token template-punctuation string">`</span></span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&lt;</span> translateY<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> é¡¶éƒ¨ <span class="token operator">--</span><span class="token operator">&gt;</span>
      z<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">10</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>style<span class="token punctuation">.</span>paddingTop <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'40px'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>playwrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">'none'</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>style<span class="token punctuation">.</span>paddingTop <span class="token operator">=</span> <span class="token string">'7-%'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>playwrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>index <span class="token operator">=</span> zIndex

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>å®ç°å‘ä¸‹æ‹‰å›¾ç‰‡ å›¾ç‰‡æ”¾å¤§æ•ˆæœ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> scale<span class="token operator">=</span><span class="token number">1.0</span>
<span class="token keyword">const</span> present<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>val <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageHeight<span class="token punctuation">)</span> <span class="token comment">//è¿™æ ·å°±å¯ä»¥æ˜¯å›¾ç‰‡å±‚çš„é«˜åº¦å˜ä¸º1+æ”¾å¤§çš„é«˜åº¦</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  scale<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">+</span> present
  z<span class="token operator">-</span>Index <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

Â·Â·Â·Â·
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>image<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">transform</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>ç»¼ä¸Š æ­Œæ‰‹è¯¦æƒ…é¡µå°±å¼€å‘å®Œæˆ ä½¿ç”¨åˆ°äº† scroll ç»„ä»¶ æ ¹æ®é«˜åº¦ç›–ä½å›¾å±‚ çŸ¥é“äº† index çš„é‡è¦æ€§ åé¢å¼€å‘å¼€å‘ä¸­æœ€éš¾çš„ç»„ä»¶-æ’­æ”¾èµ·ç»„ä»¶ åŠ æ²¹ï¼ï¼</p> <h3 id="æ’­æ”¾å™¨ç»„ä»¶"><a href="#æ’­æ”¾å™¨ç»„ä»¶" class="header-anchor">#</a> æ’­æ”¾å™¨ç»„ä»¶</h3> <h4 id="å®šä¹‰æ’­æ”¾å™¨åº•å±‚æ•°æ®"><a href="#å®šä¹‰æ’­æ”¾å™¨åº•å±‚æ•°æ®" class="header-anchor">#</a> å®šä¹‰æ’­æ”¾å™¨åº•å±‚æ•°æ®</h4> <p>å¼€å‘å‰å…ˆæ€è€ƒ æ’­æ”¾å™¨å¯èƒ½éœ€è¦è¿™å‡ ä¸ªæ•°æ®</p> <ul><li>playing æš‚åœæˆ–è€…æ’­æ”¾</li> <li>fullScreen æ§åˆ¶æ’­æ”¾å™¨æ˜¯å¦å…¨å±æ˜¾ç¤º</li> <li>playlist æ’­æ”¾åˆ—è¡¨</li> <li>sequenceList é¡ºåºæ’­æ”¾æ¨¡å¼æ­Œæ›²åˆ—è¡¨</li> <li>mode æ’­æ”¾æ¨¡å¼</li> <li>currentIndex å½“å‰æ’­æ”¾æ­Œæ›²çš„ä¸‹æ ‡(å¯ä»¥é€šè¿‡æ­¤ä¸‹æ ‡å¾—åˆ°currentSong:state.playlist[state.currentIndex])</li></ul> <p>OK,æˆ‘ä»¬å¼€å§‹ä¹¦å†™vuexç›¸å…³</p> <div class="custom-block tip"><p class="custom-block-title">å®šä¹‰å…¬å…±é…ç½®</p> <p>config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> playMode <span class="token operator">=</span><span class="token punctuation">{</span>
  sequence<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  loop<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  random<span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h3>state.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>playMode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'config.js'</span>
<span class="token keyword">const</span> state <span class="token operator">=</span><span class="token punctuation">{</span>
  singer<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  playing<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
  fullScreen<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
  playlist<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  sequencelist<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span>playMode<span class="token punctuation">.</span>sequence<span class="token punctuation">,</span>
  currentIndex<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> state
</code></pre></div><h3>mutations-type å®šä¹‰å‡½æ•°å</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAYING</span><span class="token operator">=</span><span class="token string">'SET_PLAYING'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_FULLSCREEN</span><span class="token operator">=</span><span class="token string">'SET_FULLSCREEN'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAYLIST</span><span class="token operator">=</span><span class="token string">'SET_PLAYLIST'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_SEQUENCE</span><span class="token operator">=</span><span class="token string">'SET_SEQUENCE'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_MODE</span><span class="token operator">=</span><span class="token string">'SET_MODE'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_CURRENTINDEX</span><span class="token operator">=</span><span class="token string">'SET_CURRENTINDEX'</span>
</code></pre></div><h3>mutation.js ä¿®æ”¹æ•°æ®</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mutations <span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playing<span class="token operator">=</span>flag
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULLSCREEN</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>fullScreen<span class="token operator">=</span>flag
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playlist<span class="token operator">=</span>list
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>sequence<span class="token operator">=</span>list
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_MODE</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>mode<span class="token operator">=</span>mode
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SETCURRENTINDEX</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>currentIndex<span class="token operator">=</span>index
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> mutations
</code></pre></div><h3>getters.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">+</span><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">playing</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>playing

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fullScreen</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>fullScreen

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">playlist</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>playlist

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sequencelist</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>sequencelist

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mode</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>mode

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">currentIndex</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>currentIndex

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">currentSong</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>playlist<span class="token punctuation">[</span>state<span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å®šä¹‰å®Œæ•°æ®ä¹‹åå…ˆæŠŠplayç»„ä»¶çš„åŸºæœ¬ä»£ç ä¹¦å†™"><a href="#å®šä¹‰å®Œæ•°æ®ä¹‹åå…ˆæŠŠplayç»„ä»¶çš„åŸºæœ¬ä»£ç ä¹¦å†™" class="header-anchor">#</a> å®šä¹‰å®Œæ•°æ®ä¹‹åå…ˆæŠŠplayç»„ä»¶çš„åŸºæœ¬ä»£ç ä¹¦å†™</h4> <p><strong>åŸºæœ¬domç»“æ„</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>player<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>playlist.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>normal-player<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>normal-player<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fullScreen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- èƒŒæ™¯å›¾ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>background<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- é¡¶éƒ¨æ ‡é¢˜ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>subtitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.singer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tosinger<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ä¸­é—´éƒ¨åˆ†cdå”±ç‰‡ æ­Œæ›²æ­Œè¯ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>middle-l<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cd-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cd<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>play-lyric-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>playing-lyric<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>middle-r<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lyric-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- åº•éƒ¨è¿›åº¦æ¡ æ­Œæ›²æ“ä½œ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ»‘å—æ¡ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dot-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è¿›åº¦æ¡ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-bar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ“ä½œåŒº --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>operators<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-sequence<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-play<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon icon-not-favorite<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>min-player<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mini-player<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>open<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>!fullScreen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>  <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.image<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentSong.singer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-mini icon-play-mini<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon-playlist<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span> <span class="token attr-name">autoplay</span> <span class="token attr-name">muted</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>audio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@canplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getDuration<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songsUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>audio</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>plaeråˆ†ä¸ºå…¨å±æ’­æ”¾å™¨å’Œè¿·ä½ æ’­æ”¾å™¨,å…¨å±æ’­æ”¾å™¨é‡Œé¢æœ‰(æ¨¡ç³ŠèƒŒæ™¯å›¾ é¡¶å±‚(backå›¾æ ‡ æ­Œæ›²å æ­Œæ‰‹å) ä¸­é—´å±‚(å”±ç‰‡å›¾ æ­Œè¯åŒº å³åˆ’æ­Œè¯åŒº è¿›åº¦æ¡ dotåŒº) åº•å±‚(æ“ä½œåŒº)) è¿·ä½ æ’­æ”¾å™¨(å·¦(æ­Œæ›²å›¾) ä¸­é—´(æ­Œæ›²å æ­Œæ‰‹å) å³è¾¹(æ­Œæ›²æš‚åœæ’­æ”¾å›¾æ ‡ è¿›åº¦ æ­Œæ›²åˆ—è¡¨) )</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li>è¿·ä½ æ’­æ”¾å™¨flexå¸ƒå±€æœ€å¥½,æ¨ªè½´æ”¹ä¸ºçºµè½´ å‚ç›´æ–¹å‘å±…ä¸­ ç„¶åä¸­é—´desc flex:1 å…¶ä»–éƒ½åˆ†é…å¥½å®½åº¦æœ€å¥½</li> <li>å…¨å±æ’­æ”¾å™¨å»ºè®®cdå’Œæ“ä½œåŒºçš„æ ·å¼éš¾äº› å¤šç»ƒä¹ </li></ul></div> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.player</span>
  <span class="token selector">.normal-player</span>
    <span class="token property-declaration"><span class="token property">position</span> fixed</span>
    <span class="token property-declaration"><span class="token property">left</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">right</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">bottom</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">z-index</span> <span class="token number">150</span></span>
    <span class="token property-declaration"><span class="token property">background</span> $color-background</span>
    <span class="token selector">.background</span>
      <span class="token comment">//é«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯å›¾</span>
      <span class="token property-declaration"><span class="token property">position</span> absolute</span>
      <span class="token property-declaration"><span class="token property">left</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">z-index</span> <span class="token operator">-</span><span class="token number">1</span></span>
      <span class="token property-declaration"><span class="token property">opacity</span> <span class="token number">0.6</span></span>
      <span class="token property-declaration"><span class="token property">filter</span><span class="token punctuation">:</span><span class="token func"><span class="token function">blur</span><span class="token punctuation">(</span><span class="token number">20</span>px<span class="token punctuation">)</span></span></span>
    <span class="token selector">.top</span>
      <span class="token property-declaration"><span class="token property">position</span> relative</span>
      <span class="token property-declaration"><span class="token property">margin-bottom</span> <span class="token number">25</span>px</span>
      <span class="token selector">.back</span>
        <span class="token property-declaration"><span class="token property">position</span> absolute</span>
        <span class="token property-declaration"><span class="token property">left</span> <span class="token number">6</span>px</span>
        <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
        <span class="token property-declaration"><span class="token property">z-index</span> <span class="token number">50</span></span>
        <span class="token selector">.icon-back</span>
          <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">9</span>px</span>
          <span class="token property-declaration"><span class="token property">display</span> block</span>
          <span class="token property-declaration"><span class="token property">font-size</span> $font-size-large-x</span>
          <span class="token property-declaration"><span class="token property">color</span> $color-theme</span>
          <span class="token property-declaration"><span class="token property">transform</span> <span class="token func"><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span>deg<span class="token punctuation">)</span></span></span>
      <span class="token selector">.title</span>
        <span class="token property-declaration"><span class="token property">width</span> <span class="token number">70%</span></span>
        <span class="token property-declaration"><span class="token property">margin</span> <span class="token number">0</span> auto</span>
        <span class="token property-declaration"><span class="token property">line-height</span> <span class="token number">40</span>px</span>
        <span class="token property-declaration"><span class="token property">text-align</span> center</span>
        <span class="token func"><span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
        <span class="token property-declaration"><span class="token property">font-size</span> #font-size-large</span>
        <span class="token property-declaration"><span class="token property">color</span> $color-text</span>
      <span class="token selector">.subtitle</span>
        <span class="token property-declaration"><span class="token property">line-height</span> <span class="token number">20</span>px</span>
        <span class="token property-declaration"><span class="token property">text-align</span> center</span>
        <span class="token property-declaration"><span class="token property">font-size</span> $font-size-medium</span>
        <span class="token property-declaration"><span class="token property">color</span> $color-text</span>
    <span class="token selector">.middle</span>
      <span class="token property-declaration"><span class="token property">position</span> fixed</span>
      <span class="token property-declaration"><span class="token property">wdith</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">top</span> <span class="token number">80</span>px</span>
      <span class="token property-declaration"><span class="token property">bottom</span> <span class="token number">170</span>px</span>
      <span class="token property-declaration"><span class="token property">white-space</span> nowrap</span>
      <span class="token property-declaration"><span class="token property">font-size</span> <span class="token number">0</span></span>
      <span class="token selector">.middle-l</span>
        <span class="token property-declaration"><span class="token property">display</span> inline-block</span>
        <span class="token property-declaration"><span class="token property">vertical-align</span> top</span>
        <span class="token property-declaration"><span class="token property">position</span> relative</span>
        <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
        <span class="token property-declaration"><span class="token property">height</span> <span class="token number">0</span></span>
        <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">80%</span></span>
        <span class="token selector">.cd-wrapepr</span>
          <span class="token property-declaration"><span class="token property">position</span> absolute</span>
          <span class="token property-declaration"><span class="token property">left</span> <span class="token number">10%</span></span>
          <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
          <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
          <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
          <span class="token selector">.cd</span>
            <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
            <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
            <span class="token property-declaration"><span class="token property">box-sizing</span> border-box</span>
            <span class="token property-declaration"><span class="token property">border</span> <span class="token number">10</span>px solid <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span></span></span>
            <span class="token property-declaration"><span class="token property">border-radius</span> <span class="token number">50%</span></span>
            <span class="token selector">.image</span>
              <span class="token property-declaration"><span class="token property">position</span> absolute</span>
              <span class="token property-declaration"><span class="token property">left</span> <span class="token number">0</span></span>
              <span class="token property-declaration"><span class="token property">top</span> <span class="token number">0</span></span>
              <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
              <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
              <span class="token selector">border-radius 50%</span>
               <span class="token punctuation">.</span>playing-lyric-wrapper
            <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80%</span></span>
            <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">30</span>px auto <span class="token number">0</span> auto</span>
            <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
            <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
            <span class="token selector">.playing-lyric</span>
              <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
              <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
              <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
              <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
        <span class="token selector">.middle-r</span>
          <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> inline-block</span>
          <span class="token property-declaration"><span class="token property">vertical-align</span><span class="token punctuation">:</span> top</span>
          <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
          <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
          <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
          <span class="token selector">.lyric-wrapper</span>
            <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80%</span></span>
            <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto</span>
            <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
            <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
            <span class="token selector">.text</span>
              <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">32</span>px</span>
              <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-l</span>
              <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
              <span class="token selector">&amp;.current</span>
                <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text</span>
      <span class="token selector">.bottom</span>
        <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
        <span class="token property-declaration"><span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">50</span>px</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
        <span class="token selector">.dot-wrapper</span>
          <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
          <span class="token selector">.dot</span>
            <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> inline-block</span>
            <span class="token property-declaration"><span class="token property">vertical-align</span><span class="token punctuation">:</span> middle</span>
            <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">4</span>px</span>
            <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">8</span>px</span>
            <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">8</span>px</span>
            <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50%</span></span>
            <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-text-l</span>
            <span class="token selector">&amp;.active</span>
              <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
              <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">5</span>px</span>
              <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-text-ll</span>
        <span class="token selector">.progress-wrapper</span>
          <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
          <span class="token property-declaration"><span class="token property">align-items</span><span class="token punctuation">:</span> center</span>
          <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80%</span></span>
          <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span>px auto</span>
          <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px <span class="token number">0</span></span>
          <span class="token selector">.time</span>
            <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text</span>
            <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-small</span>
            <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">30</span>px</span>
            <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
            <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
            <span class="token selector">&amp;.time-l</span>
              <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> left</span>
            <span class="token selector">&amp;.time-r</span>
              <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> right</span>
          <span class="token selector">.progress-bar-wrapper</span>
            <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
        <span class="token selector">.operators</span>
          <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
          <span class="token property-declaration"><span class="token property">align-items</span><span class="token punctuation">:</span> center</span>
          <span class="token selector">.icon</span>
            <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
            <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme</span>
            <span class="token selector">&amp;.disable</span>
              <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme-d</span>
            <span class="token selector">i</span>
              <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
          <span class="token selector">.i-left</span>
            <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> right</span>
          <span class="token selector">.i-center</span>
            <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">20</span>px</span>
            <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
            <span class="token selector">i</span>
              <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">40</span>px</span>
          <span class="token selector">.i-right</span>
            <span class="token property-declaration"><span class="token property">text-align</span><span class="token punctuation">:</span> left</span>
          <span class="token selector">.icon-favorite</span>
            <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-sub-theme</span>
      <span class="token selector">&amp;.normal-enter-active<span class="token punctuation">,</span> &amp;.normal-leave-active</span>
        <span class="token property-declaration"><span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">0.4</span>s</span>
        <span class="token selector">.top<span class="token punctuation">,</span> .bottom</span>
          <span class="token property-declaration"><span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">0.4</span>s <span class="token func"><span class="token function">cubic-bezier</span><span class="token punctuation">(</span><span class="token number">0.86</span><span class="token punctuation">,</span> <span class="token number">0.18</span><span class="token punctuation">,</span> <span class="token number">0.82</span><span class="token punctuation">,</span> <span class="token number">1.32</span><span class="token punctuation">)</span></span></span>
      <span class="token selector">&amp;.normal-enter<span class="token punctuation">,</span> &amp;.normal-leave-to</span>
        <span class="token property-declaration"><span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
        <span class="token selector">.top</span>
          <span class="token property-declaration"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">translate3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span>px<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>
        <span class="token selector">.bottom</span>
          <span class="token property-declaration"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">translate3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span>px<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>
    <span class="token selector">.mini-player</span>
      <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
      <span class="token property-declaration"><span class="token property">align-items</span><span class="token punctuation">:</span> center</span>
      <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> fixed</span>
      <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
      <span class="token property-declaration"><span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">180</span></span>
      <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">60</span>px</span>
      <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> $color-highlight-background</span>
      <span class="token selector">&amp;.mini-enter-active<span class="token punctuation">,</span> &amp;.mini-leave-active</span>
        <span class="token property-declaration"><span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">0.4</span>s</span>
      <span class="token selector">&amp;.mini-enter<span class="token punctuation">,</span> &amp;.mini-leave-to</span>
        <span class="token property-declaration"><span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
      <span class="token selector">.icon</span>
        <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">40</span>px</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">40</span>px</span>
        <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">10</span>px <span class="token number">0</span> <span class="token number">20</span>px</span>
        <span class="token selector">img</span>
          <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50%</span></span>
          <span class="token selector">&amp;.play</span>
            <span class="token property-declaration"><span class="token property">animation</span><span class="token punctuation">:</span> rotate <span class="token number">10</span>s linear infinite</span>
          <span class="token selector">&amp;.pause</span>
            <span class="token property-declaration"><span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused</span>
      <span class="token selector">.text</span>
        <span class="token property-declaration"><span class="token property">display</span><span class="token punctuation">:</span> flex</span>
        <span class="token property-declaration"><span class="token property">flex-direction</span><span class="token punctuation">:</span> column</span>
        <span class="token property-declaration"><span class="token property">justify-content</span><span class="token punctuation">:</span> center</span>
        <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
        <span class="token property-declaration"><span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">20</span>px</span>
        <span class="token property-declaration"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden</span>
        <span class="token selector">.name</span>
          <span class="token property-declaration"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">2</span>px</span>
          <span class="token func"><span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium</span>
          <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text</span>
        <span class="token selector">.desc</span>
          <span class="token func"><span class="token function">no-wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-small</span>
          <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-text-d</span>
      <span class="token selector">.control</span>
        <span class="token property-declaration"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">30</span>px</span>
        <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
        <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">10</span>px</span>
        <span class="token selector">.icon-play-mini<span class="token punctuation">,</span> .icon-pause-mini<span class="token punctuation">,</span> .icon-playlist</span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">30</span>px</span>
          <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $color-theme-d</span>
        <span class="token selector">.icon-mini</span>
          <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">32</span>px</span>
          <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
          <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
          <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
</code></pre></div><p>åœ¨å†™ä¸¤ä¸ªäº¤äº’åŠ¨ç”»
æ‰“å¼€normalæ’­æ”¾å™¨æˆ–è€…miniæ’­æ”¾å™¨</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.normal-player-enter-active<span class="token punctuation">,</span>.normal-player-leave-active</span>
  <span class="token property-declaration"><span class="token property">translate</span> all <span class="token number">0.4</span>s</span>
  <span class="token punctuation">.</span>top,<span class="token punctuation">.</span>bottom
  <span class="token comment">//è´èµ›å°”æ›²çº¿å®šä¹‰ç¯åŠ¨ </span>
    <span class="token property-declaration"><span class="token property">transition</span> all <span class="token number">0.4</span>s <span class="token func"><span class="token function">cubic-bezier</span><span class="token punctuation">(</span><span class="token number">0.86</span><span class="token punctuation">,</span><span class="token number">0.18</span><span class="token punctuation">,</span><span class="token number">0.82</span><span class="token punctuation">,</span><span class="token number">1.32</span><span class="token punctuation">)</span></span></span>
<span class="token selector">.normal-player-enter<span class="token punctuation">,</span>.normal-player-leave-active</span>
  <span class="token property-declaration"><span class="token property">opcity</span> <span class="token number">0</span></span>
  <span class="token comment">//å®šä¹‰topåˆå§‹å‘ä¸Š100px bottomåˆå§‹å‘ä¸‹100px åŠ¨ç”»è‡ªä¸‹è€Œä¸Š è‡ªä¸Šè€Œä¸‹ æ¸éšæ¸ç°</span>
  <span class="token selector">.top</span>
    <span class="token property-declaration"><span class="token property">transform</span> <span class="token func"><span class="token function">translate3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">100</span>px<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
  <span class="token selector">.bottom </span>
    <span class="token property-declaration"><span class="token property">transform</span> <span class="token func"><span class="token function">translate3d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span>px<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>

<span class="token selector">&amp;.min-player-enter-active<span class="token punctuation">,</span>&amp;.min-player-leave-active</span>
  <span class="token property-declaration"><span class="token property">transition</span> all <span class="token number">0.4</span>s</span>
<span class="token selector">&amp;.min-player-enter<span class="token punctuation">,</span>&amp;.min-player-leave-active</span>
  <span class="token property-declaration"><span class="token property">opcity</span> <span class="token number">0</span></span>
</code></pre></div><h4 id="é€»è¾‘éƒ¨åˆ†ä¹¦å†™"><a href="#é€»è¾‘éƒ¨åˆ†ä¹¦å†™" class="header-anchor">#</a> é€»è¾‘éƒ¨åˆ†ä¹¦å†™</h4> <p>ä¹¦å†™å®Œplayerç»„ä»¶,ç”±äºä»–è·Ÿè·¯ç”±æ²¡å•¥å…³ç³»,è€Œä¸”å¾ˆå¤šç»„ä»¶ä¼šç”¨åˆ°,æ‰€ä»¥å®šä¹‰åœ¨app.vueä¸­ï¼Œè«å¿˜è®°æ³¨å†Œ</p> <p>æˆ‘ä»¬éœ€è¦æ§åˆ¶playerçš„æ˜¾ç¤ºä¸éšè—,ä¸ç„¶ä¼šç›–ä½singer-detail</p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">'fullScreen'</span><span class="token punctuation">,</span>
    <span class="token string">'playlist'</span><span class="token punctuation">,</span>
    <span class="token string">'currentSong'</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;player&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;playlist.length &gt; 0&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;normal-player&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;fullScreen&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mini-player&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;!fullScreen&quot;</span><span class="token operator">&gt;</span>     
</code></pre></div><p>è¿™æ ·å°±ä¸ä¼šé»˜è®¤æ˜¾ç¤ºäº†,æ¥ä¸‹æ¥æˆ‘ä»¬å»å†™songlistçš„äº‹ä»¶</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectItem(song, index)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(song, index) in songs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{song.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{getDesc(song)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  
  .....
  methods:{
    selectItem(item,index) {
      this.$emit('select',item,index)
    }
  }
</code></pre></div><p>çˆ¶ç»„ä»¶music-listæ¥å—äº‹ä»¶ å› ä¸ºè¿™é‡Œæˆ‘ä»¬éœ€è¦å°†ç‚¹å‡»çš„æ­Œæ›²ä¿¡æ¯ä¼ å…¥vuexå¹¶ä¿®æ”¹ å‘ç°éœ€è¦ä¿®æ”¹å¤šä¸ªmutationï¼Œæ‰€ä»¥å®šä¹‰action.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">'./mutations-type'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">selectPlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">,</span> state<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>list<span class="token punctuation">,</span> index<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENTINDEX</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULLSCREEN</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®šä¹‰å¥½äº†æ‰¹é‡æ“ä½œ ä¼ å…¥æ•°æ®ä¿®æ”¹mutation</p> <div class="language-js extra-class"><pre class="language-js"><code>@select<span class="token operator">=</span><span class="token string">&quot;selectItem&quot;</span>
<span class="token operator">...</span>
methods<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">'selectplay'</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">selectItem</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectPlay</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      list<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>songs<span class="token punctuation">,</span>
      index
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥å–å‡ºcurrentSong æŒ‚åˆ°domä¸Š,è¿™é‡Œä¸è¯¦ç»†ä»‹ç»ã€‚
æˆ‘ä»¬åœ¨ç‚¹å‡»æ­Œæ›²åéœ€è¦å°†fullScreenç½®ä¸ºtrue,ä½†æ˜¯ä¸èƒ½ç›´æ¥å»ä¿®æ”¹gettersçš„æ•°æ®,éœ€è¦è¿›è¡Œmutationsä¿®æ”¹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span>
<span class="token punctuation">{</span>
  setfullScreen<span class="token operator">:</span><span class="token string">'SET_FULLSCREEN'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

methods<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setfullScreen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setfullScreen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å°±å¯ä»¥å›¾æ ‡æ§åˆ¶éšè—æ˜¾ç¤º æˆ–è€…è¿·ä½ æ’­æ”¾å™¨æ‰“å¼€ æ·»åŠ ç‚¹å‡»äº‹ä»¶å³å¯ ä¸‹ä¸€èŠ‚å°†ä»‹ç»æ’­æ”¾å™¨æ ¸å¿ƒéƒ¨åˆ†</p> <h4 id="æ’­æ”¾å™¨é£å…¥å·¦ä¸‹è§’åŠ¨ç”»"><a href="#æ’­æ”¾å™¨é£å…¥å·¦ä¸‹è§’åŠ¨ç”»" class="header-anchor">#</a> æ’­æ”¾å™¨é£å…¥å·¦ä¸‹è§’åŠ¨ç”»</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>vueçš„jsé’©å­å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸ªåŠ¨ç”»</p> <ul><li>@enter=&quot;&quot;</li> <li>@after-enter=&quot;&quot;</li> <li>@leave=&quot;&quot;</li> <li>@after-leave=&quot;&quot;</li></ul></div> <p>é¦–å…ˆå¼•å…¥ç¬¬ä¸‰æ–¹åˆ›å»ºåŠ¨ç”»åº“<code>create-keyframe-animation</code>
å…·ä½“æ€è·¯:</p> <ol><li>è®¡ç®—ä¸¤ä¸ªåœ†å¿ƒçš„åæ ‡,æ ¹æ®åæ ‡è®¡ç®—å‡ºæ°´å¹³ç«–ç›´åç§»é‡</li> <li>å®šä¹‰å¹¶ä½¿ç”¨åŠ¨ç”»</li> <li>æ¸…é™¤åŠ¨ç”»</li></ol> <h3>å®šä¹‰å‡½æ•°è®¡ç®—å‡ºå›¾ç‰‡ä¹‹é—´åç§»é‡å’Œç¼©æ”¾</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_getPosAndScale</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// * è¦åšä¸€ä¸ªå¤§å›¾ç‰‡ä»miniæ’­æ”¾å™¨é£åˆ°å¤§å›¾å±‚cdWrapperçš„åŠ¨ç”» ä½¿ç”¨åˆ°create-keyframe-animationç¬¬ä¸‰æ–¹æ’é”®</span>
  <span class="token comment">// ! æ€è·¯ï¼š1.è®¡ç®—å‡ºåç§»æ¨ªçºµåæ ‡ 2.æ¨ªè½´åç§»(å±å¹•å®½åº¦/2-minæ’­æ”¾å™¨å·¦ä¾§åç§») 3.çºµè½´åç§»(å±å¹•é«˜åº¦-å¤§å›¾å±‚paddingTop-minæ’­æ”¾å™¨åœ†å¿ƒè·åº•éƒ¨ä½ç½®-cdwrapperçš„é«˜åº¦/2) 4.ä¹¦å†™åŠ¨ç”»</span>
  <span class="token keyword">const</span> targetWidth <span class="token operator">=</span> <span class="token number">40</span><span class="token comment">//å›¾ç‰‡å®½åº¦</span>
  <span class="token keyword">const</span> paddingLeft <span class="token operator">=</span> <span class="token number">40</span><span class="token comment">//miniåœ†å¿ƒå·¦ç¿©ç§»</span>
  <span class="token keyword">const</span> paddingBottom <span class="token operator">=</span> <span class="token number">30</span><span class="token comment">//åº•éƒ¨è·åœ†å¿ƒè·ç¦»</span>
  <span class="token keyword">const</span> paddingTop <span class="token operator">=</span> <span class="token number">80</span> <span class="token comment">//é¡¶éƒ¨è·åœ†å¿ƒè·ç¦»</span>
  <span class="token keyword">const</span> width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">*</span> <span class="token number">0.8</span> <span class="token comment">//æ•´ä¸ªcd-wrapperçš„å®½åº¦</span>
  <span class="token keyword">const</span> scale <span class="token operator">=</span> targetWidth <span class="token operator">/</span> width<span class="token comment">//åŸå§‹ç¼©æ”¾æ¯”ä¾‹</span>
   <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> paddingLeft<span class="token punctuation">)</span>
      <span class="token keyword">const</span> y <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> paddingTop <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> paddingBottom
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token punctuation">,</span>
        scale
      <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3>å®šä¹‰åŠ¨ç”»</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//importä¹‹å</span>
<span class="token comment">//è¿›å…¥æ—¶</span>
<span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>scale<span class="token punctuation">}</span> <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPosAndScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// å®šä¹‰åŠ¨ç”»</span>
  <span class="token keyword">let</span> animation <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// åº•éƒ¨é£åˆ°å¤§å›¾ç‰‡ ç„¶åä»60åˆ°100 scaleå…ˆ1.1ç„¶åå›è°ƒ</span>
    <span class="token number">0</span>ï¼š<span class="token punctuation">{</span>
      transform<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">))</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">60</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      transform<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(0,0,0) scale(1.1)</span><span class="token template-punctuation string">`</span></span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">100</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      transform <span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(0,0,0) scale(1)</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ³¨å†Œanimation</span>
animations<span class="token punctuation">.</span><span class="token function">registerAnimation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'move'</span><span class="token punctuation">,</span>
  animation<span class="token punctuation">,</span> <span class="token comment">//å®šä¹‰å¥½çš„åŠ¨ç”»</span>
  presets<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// é¢„è®¾å‚æ•°</span>
  duration<span class="token operator">:</span><span class="token number">400</span><span class="token punctuation">,</span>
  easing<span class="token operator">:</span><span class="token string">'linear'</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">// è¿è¡Œanimation</span>
animations<span class="token punctuation">.</span><span class="token function">runAnimation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">,</span><span class="token string">'move'</span><span class="token punctuation">,</span>done<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¿›å…¥åæ¸…é™¤</span>
<span class="token function">afterEnter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¸…é™¤animation</span>
  animations<span class="token punctuation">.</span><span class="token function">unregisterAnimation</span><span class="token punctuation">(</span><span class="token string">'move'</span><span class="token punctuation">)</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animation <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…³é—­çª—å£æ—¶ åŸç†ä¹Ÿæ˜¯ç›¸ä¼¼çš„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">leave</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> scale<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPosAndScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'transform'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0) scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'all 0.4s'</span>
  <span class="token comment">// ç›‘å¬transitionendäº‹ä»¶ ä¹‹åæ‰§è¡ŒafterLeave</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'transitionend'</span><span class="token punctuation">,</span> done<span class="token punctuation">)</span>

  <span class="token comment">//æ¸…é™¤transition transform</span>
   <span class="token function">afterLeave</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'transform'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cdWrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>è¿™æ ·cdçš„æ‰“å¼€å…³é—­éƒ½ä¼šæœ‰ä¸€ä¸ªæ•ˆæœä¸é”™çš„åŠ¨ç”»æ•ˆæœ</p> <h3 id="ğŸ’™æ’­æ”¾å™¨éƒ¨åˆ†"><a href="#ğŸ’™æ’­æ”¾å™¨éƒ¨åˆ†" class="header-anchor">#</a> ğŸ’™æ’­æ”¾å™¨éƒ¨åˆ†</h3> <p>æ­Œæ›²çš„æ’­æ”¾åŠŸèƒ½,ä¸»è¦æ˜¯åˆ©ç”¨ html5 çš„ audio æ ‡ç­¾å®ç°</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span>
  <span class="token attr-name">autoplay</span>
  <span class="token attr-name">muted</span>
  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>audio<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@canplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getDuration<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@error</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songsUrl<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@timeupdate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UpdateTime<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>audio</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="ğŸ’œè·å–æ­Œæ›²-url"><a href="#ğŸ’œè·å–æ­Œæ›²-url" class="header-anchor">#</a> ğŸ’œè·å–æ­Œæ›² url</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ç”±äºè¿™ä¸ª webapp ä½¿ç”¨åˆ°çš„ api æ˜¯ç½‘æ˜“äº‘çš„ apiï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦è°ƒç”¨è·å–æ­Œæ›²çš„ url</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getMusic</span><span class="token punctuation">(</span><span class="token parameter">musicId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token constant">HOST</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/music/url?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>musicId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>play ç»„ä»¶é‡Œé¢è°ƒç”¨ api</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">currentSong</span> <span class="token punctuation">(</span><span class="token parameter">newSong<span class="token punctuation">,</span> oldSong</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//  å¦‚æœä¸¤é¦–æ­Œæ›²çš„idéƒ½ä¸€æ · å°±ä¸åˆ·æ–°currentSong</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>newSong<span class="token punctuation">.</span>id <span class="token operator">===</span> oldSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token function">getMusic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>songsUrl <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// å¦‚æœæœ‰æ­Œè¯åœ¨æ’­æ”¾ è¿™ä¸ªLyricå¯¹è±¡åœæ­¢æ’­æ”¾</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getLyric</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="ğŸ’šæ’­æ”¾å™¨é€»è¾‘éƒ¨åˆ†"><a href="#ğŸ’šæ’­æ”¾å™¨é€»è¾‘éƒ¨åˆ†" class="header-anchor">#</a> ğŸ’šæ’­æ”¾å™¨é€»è¾‘éƒ¨åˆ†</h4> <p><strong>ä¹‹åå½“æ­Œæ›² ready çš„æ—¶å€™ï¼Œæ‰èƒ½ç‚¹ä¸‹ä¸€é¦–æ­Œï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½æ§åˆ¶åŠ è½½æˆåŠŸ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    songReady<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>æ·»åŠ ä¸€ä¸ª@canPlay å‡½æ•° å½“å…¶ songReady ä¸º true æ‰èƒ½</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token function">getDuration</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è·å–åˆ°æ­Œæ›²</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>duration
      <span class="token keyword">this</span><span class="token punctuation">.</span>songsTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>duration
      <span class="token comment">// å¯ä»¥æ’­æ”¾ songReadyç½®ä¸ºtrue</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>songReady <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>å†™å¥½äº† songReady ä¹‹å,å›åˆ° next å’Œ prev å‡½æ•°æ§åˆ¶æ­Œæ›²çš„ä¸Šä¸€é¦–ä¸‹ä¸€é¦– ç‚¹å‡»æ’­æ”¾æ­Œæ›² togglePlaying()</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">next</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>songReady<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“åˆ‡åˆ°æœ€åä¸€é¦–æ­Œ</span>
    index <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCurrentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
  <span class="token comment">// åˆ‡æ¢åˆ°å†™ä¸€é¦–æ­Œæ—¶ä¿è¯æ’­æ”¾çŠ¶æ€</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>songReady <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">//é‡ç½®</span>
  <span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token function">prev</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>songReady<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç¬¬ä¸€é¦–æ­Œ indexåˆ‡æ¢åˆ°æœ€åä¸€é¦–æ­Œçš„index</span>
    index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">currentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>songReady <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token function">toggleplaying</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>songReady<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPlaying</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>playing<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">.</span><span class="token function">togglePlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>å½“æŒ‰é’®ä¸èƒ½ç‚¹å‡»æ—¶ å°±æ˜¯æ­Œæ›²æ²¡æœ‰ songReady çš„æ—¶å€™ç»™æŒ‰é’®ä¸€ä¸ª disable å±æ€§</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">disableCls</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>songReady <span class="token operator">?</span> <span class="token string">''</span><span class="token operator">:</span><span class="token string">'disable'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>æ’­æ”¾å™¨è¿›åº¦æ¡ dom</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- è¿›åº¦æ¡ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>time time-l<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{format(currentTime)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-bar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progressbar</span> <span class="token attr-name">:currentTime</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:songsTime</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songsTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:precent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>precent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@percentChangeEnd</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onProgressBarChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progressbar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>time time-r<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{format(songsTime)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>æ­Œæ›²åœ¨æ’­æ”¾æ—¶ä¼šæ´¾å‘ timeupdate äº‹ä»¶</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">updateTime</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentTime
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ä½†æ˜¯è¿™ä¸ªæ—¶é—´æ˜¯å°æ•°ç‚¹çš„ éœ€è¦è¿›è¡Œæ ¼å¼åŒ–</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">format</span> <span class="token punctuation">(</span><span class="token parameter">inteval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  inteval <span class="token operator">=</span> inteval <span class="token operator">|</span> <span class="token number">0</span>
  <span class="token keyword">let</span> minute <span class="token operator">=</span> inteval <span class="token operator">/</span><span class="token number">60</span> <span class="token operator">|</span> <span class="token number">0</span>
  <span class="token keyword">let</span> second <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_pad</span><span class="token punctuation">(</span>inteval <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minute<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// å½“ç§’çš„å­—ç¬¦ä¸²é•¿åº¦å°äºäº2 å°±åœ¨å‰é¢è¡¥0</span>
<span class="token function">_pad</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
  <span class="token keyword">while</span><span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> num
    len<span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> num
<span class="token punctuation">}</span>

</code></pre></div><p>è°ƒç”¨æ ¼å¼åŒ–æ—¶é—´ ç„¶åæŒ‚åœ¨ dom ä¸Š</p> <h3>è¿›åº¦æ¡ç»„ä»¶</h3>
åœ¨playç»„ä»¶ä¸Šçš„æ ·å¼
<blockquote><p>flexå¸ƒå±€,å‚ç›´å±…ä¸­,æ°´å¹³ä¹Ÿå±…ä¸­,ä¸Šä¸‹æœ‰ä¸¤ä¸ªpadding å·¦å³spanæ–‡å­—å¯¹é½æ–¹å¼ä¸åŒ</p></blockquote> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.progress-wrapper</span>
  <span class="token property-declaration"><span class="token property">display</span> flex</span>
  <span class="token property-declaration"><span class="token property">align-items</span> center</span>
  <span class="token property-declaration"><span class="token property">width</span> <span class="token number">80%</span></span>
  <span class="token property-declaration"><span class="token property">margin</span> <span class="token number">0</span> auto</span>
  <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">10</span>px <span class="token number">0</span></span>
  <span class="token selector">.time</span>
    <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span>$color-text</span>
    <span class="token property-declaration"><span class="token property">font-size</span> $font-size-small</span>
    <span class="token property-declaration"><span class="token property">flex</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">30</span>px</span>
    <span class="token property-declaration"><span class="token property">line-height</span> <span class="token number">1.875</span>rem</span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">1.875</span>rem</span>
    <span class="token selector">&amp;.time-l</span>
      <span class="token property-declaration"><span class="token property">text-align</span> left</span>
    <span class="token selector">&amp;.time-r</span>
      <span class="token property-declaration"><span class="token property">text-align</span> right</span>
  <span class="token selector">.progress-bar-wrapper</span>
    <span class="token property-declaration"><span class="token property">flex</span> <span class="token number">1</span></span>
</code></pre></div><p>progress-bar ç»„ä»¶</p> <p>dom ç»“æ„ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-bar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressbar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ€»è¿›åº¦æ¡ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bar-inner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- è¿›åº¦æ¡å·¦ä¾§ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- è¿›åº¦æ¡æŒ‰é’® --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-btn-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-btn<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressbtn<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@touchstart.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressTouchStart<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@touchmove.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressTouchMove<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@touchend.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progressTouchEnd<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>è¿›åº¦æ¡æ ·å¼</strong></p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">.progress-bar</span>
  <span class="token property-declaration"><span class="token property">height</span> <span class="token number">30</span>px</span>
  <span class="token selector">.bar-inner</span>
    <span class="token property-declaration"><span class="token property">position</span> relative</span>
    <span class="token property-declaration"><span class="token property">top</span> <span class="token number">13</span>px</span>
    <span class="token property-declaration"><span class="token property">height</span> <span class="token number">4</span>px</span>
    <span class="token property-declaration"><span class="token property">background</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">)</span></span></span>
    <span class="token selector">.progress</span>
      <span class="token property-declaration"><span class="token property">position</span> absolute</span>
      <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
      <span class="token property-declaration"><span class="token property">background</span> $color-theme</span>
    <span class="token selector">.progress-btn-wrapper</span>
      <span class="token property-declaration"><span class="token property">position</span> absolute</span>
      <span class="token property-declaration"><span class="token property">left</span> <span class="token operator">-</span><span class="token number">8</span>px</span>
      <span class="token property-declaration"><span class="token property">top</span> <span class="token operator">-</span><span class="token number">13</span>px</span>
      <span class="token property-declaration"><span class="token property">width</span> <span class="token number">30</span>px</span>
      <span class="token property-declaration"><span class="token property">height</span> <span class="token number">30</span>px</span>
      <span class="token selector">.progress-btn</span>
        <span class="token property-declaration"><span class="token property">position</span> relative</span>
        <span class="token property-declaration"><span class="token property">top</span> <span class="token number">7</span>px</span>
        <span class="token property-declaration"><span class="token property">left</span> <span class="token number">7</span>px</span>
        <span class="token property-declaration"><span class="token property">box-sizing</span> border-box</span>
        <span class="token property-declaration"><span class="token property">wdith</span> <span class="token number">16</span>px</span>
        <span class="token property-declaration"><span class="token property">height</span> <span class="token number">16</span>px</span>
        <span class="token property-declaration"><span class="token property">border</span> <span class="token number">3</span>px solid $color-text</span>
        <span class="token property-declaration"><span class="token property">border-radius</span> <span class="token number">50%</span></span>
        <span class="token property-declaration"><span class="token property">background</span> $color-theme</span>
</code></pre></div><p><strong>å¯¹åº”çš„æ•ˆæœå›¾</strong></p> <p><img src="https://i.loli.net/2020/01/18/yAONqK5FQR9wYL3.png" alt="QQæˆªå›¾20200118213149.png"></p> <p><strong>æŒ‚åˆ° play.vue ä¸Š</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-bar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progressbar</span> <span class="token attr-name">:currentTime</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:songsTime</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>songsTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:precent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>precent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@percentChangeEnd</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onProgressBarChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progressbar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>precent å¯¹ progress-bar ç»„ä»¶è¿›åº¦æ¡æœ‰ç”¨</p> <div class="language-js extra-class"><pre class="language-js"><code>computed <span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">precent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>songTime
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>ä½¿è¿›åº¦æ¡ç¡ç€æ­Œæ›²è¿›åº¦è€Œæ”¹å˜</p> <div class="language-js extra-class"><pre class="language-js"><code>watch<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">currentTime</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ€»è¿›åº¦æ¡é•¿åº¦</span>
      <span class="token keyword">const</span> progressTotalWidth <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span><span class="token number">16</span>
      <span class="token comment">// å·¦ä¾§progressåç§»</span>
      cost precentx <span class="token operator">=</span> val <span class="token operator">/</span><span class="token keyword">this</span><span class="token punctuation">.</span>somngTime
      <span class="token keyword">const</span> progressWidth <span class="token operator">=</span> progressTotalWidth <span class="token operator">*</span> precentx
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>progressWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbtn<span class="token punctuation">.</span>style<span class="token punctuation">[</span>transform<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>progressWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0,0)</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">è¿›åº¦æ¡æ‹–æ‹½</p> <p>å®ç°æ–¹æ³•:</p> <ul><li>å®šä¹‰å¥½åç§»å‡½æ•°</li> <li>ä½¿ç”¨ js çš„ä¸‰ä¸ªé’©å­(<code>touchstart</code> <code>touchmove</code> <code>touchend</code>) å¯¹è¿›åº¦æ¡å®ç°åç§»</li> <li>å‘å¤–æ´¾å‘äº‹ä»¶ å°†å½“å‰ precent è½¬å‘åˆ° play ç»„ä»¶</li></ul></div> <h3>å®šä¹‰åç§»æ–¹æ³•</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_offset</span> <span class="token punctuation">(</span><span class="token parameter">offsetWidth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offsetWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbtn<span class="token punctuation">.</span>style<span class="token punctuation">[</span>transform<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offsetWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0,0)</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>touch <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// è®°å½•ç¬¬ä¸€æ¬¡è§¦å±ä½ç½® å’Œåˆå§‹è¿›åº¦æ¡åç§»</span>
<span class="token function">progressTouchStart</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>initiated <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startX <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
<span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>clientWidth
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// è®°å½•æ‹–åŠ¨åç§»é‡,ç°åœ¨åç§»é‡ç­‰äºåˆå§‹åç§»é‡+æ‹–åŠ¨åç§» ä½†æ˜¯ä¸èƒ½å‘¢ä¸ªè¶…è¿‡è¿›åº¦æ¡çš„æ€»å®½åº¦</span>
<span class="token function">progressTouchMove</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>initiated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> moveWidth <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startX
      <span class="token keyword">const</span> offsetWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> <span class="token number">16</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>left <span class="token operator">+</span> moveWidth<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_triggerPrecent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_offset</span><span class="token punctuation">(</span>offsetWidth<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// åˆå§‹åŒ–ä¸ºfalse å°†æ‹–åŠ¨ä¿¡æ¯è½¬å‘å‡ºå»</span>
<span class="token function">progressTouchEnd</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>initiated <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token keyword">const</span> barWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span>clientWidth<span class="token operator">-</span><span class="token number">16</span>
<span class="token keyword">const</span> precent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> barWidth
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'percentChangeEnd'</span><span class="token punctuation">,</span>precent<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token function">_triggerPrecent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ´¾å‘å½“å‰precent</span>
      <span class="token keyword">const</span> progressTotalWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> <span class="token number">16</span>
      <span class="token keyword">const</span> precent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> progressTotalWidth
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'precentChange'</span><span class="token punctuation">,</span> precent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>**play ç»„ä»¶ä¸Šç›‘å¬è½¬å‘äº‹ä»¶ **</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">onProgressBarChange</span> <span class="token punctuation">(</span><span class="token parameter">precent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ§åˆ¶æ’­æ”¾æ—¶é—´</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>songTime <span class="token operator">*</span> precent
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœæ‹–åŠ¨è¿›åº¦æ¡æš‚åœäº† å°±ç»§ç»­æ’­æ”¾</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯»æ‰¾æ­Œè¯</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>currentTime <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®ç°æ•ˆæœå›¾</p> <p><img src="https://i.loli.net/2020/01/19/a1WbrhY7UJPOQsV.gif" alt="GIF.gif"></p> <p>æ·»åŠ å®Œäº†æ‹–åŠ¨äº‹ä»¶ï¼Œæ¥ä¸‹æ¥æ·»åŠ ç‚¹å‡»å˜æ¢è¿›åº¦æ¡äº‹ä»¶.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>åŸç†ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¹Ÿæ˜¯è®¡ç®— <code>progressgress</code> åç§»å’Œ <code>progressbtn</code> åç§»ï¼Œç„¶åæ´¾å‘ precent å‡ºå»</p></div> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// ç‚¹å‡»è¿›åº¦æ¡äº‹ä»¶</span>
    <span class="token function">progressClick</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//  ! e.pageX è·å–åˆ°çš„ä½ç½®æœ‰bug</span>
      <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// rect.left å…ƒç´ è·ç¦»å·¦è¾¹çš„è·ç¦»</span>
      <span class="token comment">// e.pageX ç‚¹å‡»è·ç¦»å·¦è¾¹çš„è·ç¦»</span>
      <span class="token keyword">const</span> offsetWidth <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> rect<span class="token punctuation">.</span>left
      <span class="token comment">// console.log(rect, e.pageX)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_offset</span><span class="token punctuation">(</span>offsetWidth<span class="token punctuation">)</span>
      <span class="token keyword">const</span> barWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progressbar<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> <span class="token number">16</span>
      <span class="token keyword">const</span> percent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>progress<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> barWidth
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'percentChangeEnd'</span><span class="token punctuation">,</span> percent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">bug</p> <p>æ­¤å¤„å¦‚æœç›´æ¥ä½¿ç”¨ <code>e.pageX</code> è®°å½•å…ƒç´ è·å·¦è¾¹çš„ä½ç½®ä¼šæœ‰ bug,æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ <code>getBoundClientRect()</code>ç›¸å¯¹è§†å£ä½ç½® bar ç›¸å¯¹æµè§ˆå™¨çš„å·¦ä¾§è§†å£ä½ç½® åç§»é‡å°±ç­‰äº <code>e.pageX-rect</code></p></div> <p>è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†è¿›åº¦æ¡çš„ç‚¹å‡»å’Œæ‹–æ‹½è¿›åº¦æ•ˆæœ</p> <p>æ¥ç€æˆ‘ä»¬è¦ç»™ <code>min-player</code> ä¹Ÿåˆ¶ä½œä¸€ä¸ªåœ†å½¢æ’­æ”¾è¿›åº¦æ¡æ•ˆæœ
åŒæ ·æˆ‘ä»¬åˆ›å»º <code>progress-circle</code> åŸºç¡€ç»„ä»¶</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progresscircle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- wdith height æ˜¯svgåœˆçš„å¤§å° stroke-dasharrayæ˜¯æè¾¹æ€»å‘¨é•¿ dashOffsetæè¾¹åç§»é‡  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span>
      <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radius<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radius<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0 0 100 100<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1.1<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-background<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>progress-bar<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:stroke-dasharray</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dashArray<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:stroke-dashoffset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dashOffset<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'progresscircle'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    radius<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    precent<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      dashArray<span class="token operator">:</span> <span class="token number">314</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  components<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">dashOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>precent<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dashArray
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  watch<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
@import <span class="token string">'~@/common/stylus/variable.styl'</span>
 .progresscircle
    <span class="token property">position</span><span class="token punctuation">:</span> relative
    circle
      <span class="token property">stroke-width</span><span class="token punctuation">:</span> 6px
      <span class="token property">transform-origin</span><span class="token punctuation">:</span> center
      &amp;.progress-background
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.9<span class="token punctuation">)</span>
        <span class="token property">stroke</span><span class="token punctuation">:</span> $color-theme-d
      &amp;.progress-bar
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.9<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span>
        <span class="token property">stroke</span><span class="token punctuation">:</span> $color-theme
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>ç»„ä»¶æ¥å—ä¸¤ä¸ªå‚æ•°</h3> <ul><li>radius radius ç”¨æ¥æ§åˆ¶ svg å›¾çš„å®½é«˜ æˆ‘ä»¬è¿™é‡Œ radius ä¼ å…¥ 32</li> <li>precent svg å›¾ä¸‹ progress-bar æœ‰ä¸¤ä¸ªå‚æ•°
<ul><li><strong>stroke-dasharray</strong>æè¾¹å‘¨é•¿ è¿™é‡Œåº”è¯¥æ˜¯ 314(2<em>3.14</em>50)</li> <li><strong>stroke-dashoffset</strong> å¤–å±‚æœ‰é¢œè‰²æè¾¹çš„é•¿åº¦ è¿™é‡Œæˆ‘ä»¬ç”¨(1-precent)*dasharray æ¥è¡¨ç¤ºå½“å‰è¿›åº¦</li></ul></li></ul> <h4 id="ğŸ’›æ’­æ”¾å™¨æ¨¡å¼åˆ‡æ¢"><a href="#ğŸ’›æ’­æ”¾å™¨æ¨¡å¼åˆ‡æ¢" class="header-anchor">#</a> ğŸ’›æ’­æ”¾å™¨æ¨¡å¼åˆ‡æ¢</h4> <p>ä¸€å¼€å§‹æ’­æ”¾æ¨¡å¼æˆ‘ä»¬æ˜¯å†™æ­»çš„ icon,æ¥ä¸‹æ¥å°±ä¸ç”¨å†™æ­»äº†</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon i-left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeMode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>iconMode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
.... iconMode () { return this.mode === playMode.sequence ? 'icon-sequence' :
this.mode === playMode.loop ? 'icon-loop' : 'icon-random' }
</code></pre></div><p>æ›´æ¢æ¨¡å¼çš„å®ç°ï¼Œæ¨¡å¼ä»¥å…±æœ‰ä¸‰ç§æ‰€ä»¥æˆ‘ä»¬è®¾ç½®æ¨¡å¼ 3 ä¸ªé‡Œé¢å¾ªç¯</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">changeMode</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">3</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span>
  <span class="token keyword">let</span> list <span class="token operator">=</span><span class="token keyword">null</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">.</span>mode <span class="token operator">===</span> playMode<span class="token punctuation">.</span>random<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sequencelist<span class="token punctuation">)</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetCurrentIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setsplaylist</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sequencelist
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetCurrentIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setsplaylist</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token function">æ´—ç‰Œå‡½æ•°</span><span class="token punctuation">(</span>éå†æ•°ç»„ç”¨array<span class="token punctuation">[</span>i<span class="token punctuation">]</span>å»å’Œéšæœºçš„minåˆ°maxä¸‹æ ‡çš„æ•°ç¥–å…ƒç´ å»äº¤æ¢ è¿™æ ·æ•°ç»„å°±ä¼šå¾ˆä¹±<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span>max</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// ä¿è¯å–åˆ°min-maxçš„éšæœºæ•°</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> _arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>_arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> j<span class="token operator">=</span> <span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> _arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    _arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> _arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    _arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> _arr
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>è¿™é‡Œç”¨åˆ°çš„å®šä¹‰çš„ä¸¤ä¸ªæ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">resetCurrentIndex</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// æ‰¾åˆ°å½“å‰æ­Œæ›²idç›¸åŒçš„listå…ƒç´ ç´¢å¼• è¿™æ ·æ­Œæ›²å°±ä¸ä¼šå†åˆ‡æ¢äº†æ¨¡å¼ä¹‹å listæ”¹å˜ currentSongæ”¹å˜ å½“å‰æ­Œæ›²è¢«åˆ‡æ¢äº†</span>
<span class="token keyword">let</span> index1 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">finIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> itlem<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCurrentindex</span><span class="token punctuation">(</span>index1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç„¶åæˆ‘ä»¬åœ¨ç›‘å¬currentSongæ—¶è¿™æ ·å»å†™</span>
<span class="token function">currentSong</span><span class="token punctuation">(</span><span class="token parameter">newSomng<span class="token punctuation">,</span>oldSong</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>newSong<span class="token punctuation">.</span>id <span class="token operator">===</span> oldSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h3>æ¥ä¸‹æ¥å°±æ˜¯æ’­æ”¾å™¨çš„ä¸€äº›é—®é¢˜è§£å†³</h3> <ol><li>æ­Œæ›²æ’­æ”¾åˆ°æœ«å°¾ è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€é¦–</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç›‘å¬endedäº‹ä»¶</span>
 <span class="token function">End</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">===</span> playMode<span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>å¾ªç¯æ’­æ”¾æ¨¡å¼è®¾ç½®</li></ol> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">,</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>å®ç°å°é¢éšæœºæ’­æ”¾</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ·»åŠ ç‚¹å‡»äº‹ä»¶</span>
<span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomPlay</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    list<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>songs
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// è¿™é‡Œéœ€è¦è®¾ç½®actions</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">randomPlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>list<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAY_MODE</span><span class="token punctuation">,</span> playMode<span class="token punctuation">.</span>random<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span>
  <span class="token keyword">let</span> randomlist <span class="token operator">=</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENTINDEX</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> randomlist<span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULLSCREEN</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="â¤ï¸æ’­æ”¾å™¨æ­Œè¯éƒ¨åˆ†"><a href="#â¤ï¸æ’­æ”¾å™¨æ­Œè¯éƒ¨åˆ†" class="header-anchor">#</a> â¤ï¸æ’­æ”¾å™¨æ­Œè¯éƒ¨åˆ†</h4> <p>è·å–æ­Œè¯éƒ¨åˆ†</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getLyric</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://neteasemusic.yangxiansheng.top/lyric?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>methods é‡Œé¢å®šä¹‰å¥½è·å–æ­Œè¯æ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">_getLyric</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">getLyric</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// è°ƒç”¨ç¬¬ä¸‰æ–¹åº“ å°†currentLyricè½¬åŒ–ä¸ºä¸€ä¸ªtime-textå¯¹è±¡</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lyric</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>lrc<span class="token punctuation">.</span>lyric<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleLyric<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>è¿™é‡Œä½¿ç”¨åˆ°äº†ç¬¬ä¸‰æ–¹åº“<code>Lyric-parser</code> è¿™ä¸ªæ’ä»¶çš„ä½œç”¨å°±æ˜¯è®² currentLyric è½¬åŒ–ä¸ºä¸€ä¸ª time-text å¯¹è±¡ ä¾¿äºä½¿ç”¨</p></blockquote> <p>åœ¨ watch é‡Œé¢ç›‘å¬ currentSong è°ƒç”¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">currentSong</span><span class="token punctuation">(</span><span class="token parameter">newSong<span class="token punctuation">,</span>oldSong</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>newSong<span class="token punctuation">.</span>id <span class="token operator">===</span> oldSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token function">getMusic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>songurl<span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyric<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getLyric</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å°±å¯ä»¥å®ç°æ­Œè¯çš„è‡ªåŠ¨è·³è½¬</p> <p><img src="https://i.loli.net/2020/01/19/nskZdBEUqrLKuyC.gif" alt="GIF.gif"></p> <p>æˆ‘ä»¬è¦å®ç°æ­Œè¯åˆ°äº†ç¬¬äº”è¡Œåé¢è‡ªåŠ¨å‘ä¸‹æ»šåŠ¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleLyric</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>lineNum<span class="token punctuation">,</span>txt<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“å‰è¡Œ</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>currentLineNum <span class="token operator">=</span> lineNum
  <span class="token keyword">if</span><span class="token punctuation">(</span>lineNum <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> LineEl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>lyricLine<span class="token punctuation">[</span>lineNum<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>lyricList<span class="token punctuation">.</span><span class="token function">scrollToElement</span><span class="token punctuation">(</span>LineEl<span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>lyricList<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è®°å½•æ­Œè¯</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>currentLyrictxt <span class="token operator">=</span> txt
<span class="token punctuation">}</span>
</code></pre></div><p>å®ç°æ­Œè¯å·¦å³æ»‘åŠ¨ åˆ‡æ¢(åŒæ ·ä½¿ç”¨åˆ°äº† touch äº‹ä»¶)</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Scroll</span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>middle-r<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lyricList<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentLyric &amp;&amp; currentLyric.lines<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lyric-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentLyric<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lyricLine<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{'current':currentLineNum === index}<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(line,index) in currentLyric.lines<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{line.txt}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Scroll</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ»‘åŠ¨å¤„ç†</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">//  todo:å·¦å³æ»‘åŠ¨æ•ˆæœå±•ç¤ºæ­Œè¯</span>
    <span class="token function">midleTouchStart</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è®¾ç½®æ ‡å¿—ä½å·²ç»åˆå§‹åŒ–</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>initiated <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startX <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
      <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startY <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">midleTouchMove</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>initiated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// æ‹¿åˆ°å·®å€¼</span>
      <span class="token keyword">const</span> deltaX <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startX
      <span class="token keyword">const</span> deltaY <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>startY
      <span class="token comment">// æ­Œè¯çºµå‘æ»šåŠ¨ å½“çºµå‘åç§»å¤§äºå·¦å³åç§»çš„æ—¶å€™ æˆ‘ä»¬ä¸åº”è¯¥å·¦å³ç§»åŠ¨</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>deltaY<span class="token punctuation">)</span> <span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>deltaX<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// æ‹¿åˆ°æ»šåŠ¨è¿‡ç¨‹ä¸­middle-rè·ç¦»å·¦å³ä¸¤ä¾§çš„å±å¹•çš„å·®å€¼</span>
      <span class="token keyword">const</span> left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentShow <span class="token operator">===</span> <span class="token string">'cd'</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token operator">-</span>window<span class="token punctuation">.</span>innerWidth
      <span class="token keyword">const</span> offsetWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> left <span class="token operator">+</span> deltaX<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>percent <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>offsetWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span>
      <span class="token comment">// lyricListæ˜¯ä¸€ä¸ªVue(scroll)ç»„ä»¶ï¼Œæ˜¯æ— æ³•ç›´æ¥é€ ä½œå®ƒçš„domçš„ï¼Œç”¨$elæ¥ä»£æ›¿å®ƒçš„dom</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>lyricList<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>transform<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate3d(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offsetWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px,0,0)</span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>lyricList<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>transitionDuration<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment">// é€æ˜åº¦çš„æ¸å˜</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>middleL<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>percent
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>middleL<span class="token punctuation">.</span>style<span class="token punctuation">[</span>transitionDuration<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">middleTouchEnd</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç”¨æ¥å†³å®šåœåœ¨å“ªä¸ªä½ç½®</span>
      <span class="token keyword">let</span> offsetWidth
      <span class="token keyword">let</span> opacity
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentShow <span class="token operator">===</span> <span class="token string">'cd'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä»å³å‘å·¦æ»‘ï¼Œåªéœ€è¦æ»‘10%å°±è¡Œ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>percent <span class="token operator">&gt;</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          offsetWidth <span class="token operator">=</span> <span class="token operator">-</span>window<span class="token punctuation">.</span>innerWidth <span class="token comment">// æœ€ç»ˆåœæ­¢çš„ä½ç½®</span>
          opacity <span class="token operator">=</span> <span class="token number">0</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentShow <span class="token operator">=</span> <span class="token string">'lyric'</span> <span class="token comment">// æ”¹å˜dotçš„cssæ ·å¼</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          offsetWidth <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// å¦åˆ™å°±å›åˆ°åŸæ¥çš„ä½ç½®</span>
          opacity <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// ä»å³å‘å·¦æ»‘ï¼Œçœ‹çš„æ˜¯0.9</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touch<span class="token punctuation">.</span>percent <span class="token operator">&lt;</span> <span class="token number">0.9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          offsetWidth <span class="token operator">=</span> <span class="token number">0</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentShow <span class="token operator">=</span> <span class="token string">'cd'</span>
          opacity <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          offsetWidth <span class="token operator">=</span> <span class="token operator">-</span>window<span class="token punctuation">.</span>innerWidth
          opacity <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre></div><p>dotåŒºåŸŸ</p> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dot-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dot<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{'active':currentShow === 'cd'}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dot<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{'active':currentShow === 'lyric'}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>åé¢å‘ç°ä¸€ä¸ªé—®é¢˜ å°±æ˜¯iphoneæ— æ³•æ’­æ”¾å‡ºå£°éŸ³ï¼Œè¿™æ˜¯å› ä¸ºiphoneè®¾å¤‡æˆ–è€…å¾®ä¿¡æµè§ˆå™¨å¯¹ç”¨æˆ·æµé‡è¿›è¡Œç›‘æ§ ä¸å…è®¸ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šå¯¹audioè¿›è¡Œæ’­æ”¾ å¯¹æ­¤æˆ‘é‡‡ç”¨äº†ç›‘å¬<code>touchstart</code>äº‹ä»¶å¯¹audioæ ‡ç­¾è¿›è¡Œæ’­æ”¾</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">firstPlay</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="mixinæ–¹å¼è§£å†³æ»šåŠ¨bug"><a href="#mixinæ–¹å¼è§£å†³æ»šåŠ¨bug" class="header-anchor">#</a> mixinæ–¹å¼è§£å†³æ»šåŠ¨bug</h4> <p>æˆ‘ä»¬å‘ç°å®ç°åçš„æ»šåŠ¨æ¡çš„ç»„ä»¶ æ»šåŠ¨åˆ°åº•éƒ¨å‡ ä¹ä¸èƒ½è¢«çœ‹åˆ°,è¿™æ˜¯å› ä¸ºèƒŒminiæ’­æ”¾å™¨é˜»æŒ¡ä½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™äº›ç»„ä»¶çš„scrollé‡æ–°refreshï¼Œç„¶åç»™ç»„ä»¶è®¾ç½®miniæ’­æ”¾å™¨é«˜çš„bottom</p> <h3>å®šä¹‰mixin</h3>
é€šè¿‡mixinçš„æ–¹å¼å¼•å…¥ä»£ç åˆ°ç»„ä»¶æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„æ–¹æ³•ï¼Œè¿™äº›ä»£ç ä¼šè¢«å¤ç”¨ï¼Œç„¶åmergeåˆ°ç»„ä»¶çš„åŸæ¥çš„é’©å­ä¸Š
<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> playlistMixin <span class="token operator">=</span><span class="token punctuation">{</span>
  computed<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'playlist'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylist</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// keep-aliveçš„æ–¹æ³•</span>
  <span class="token function">activated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylistMixin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">playlist</span><span class="token punctuation">(</span><span class="token parameter">newval</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylist</span><span class="token punctuation">(</span>newval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">handlePlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      thorw <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">' methods must be define'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h4 id="ğŸŒŸæ€»ç»“"><a href="#ğŸŒŸæ€»ç»“" class="header-anchor">#</a> ğŸŒŸæ€»ç»“</h4> <p>ç»¼ä¸Š,æ’­æ”¾å™¨ç»„ä»¶å…¨éƒ¨å†™å®Œï¼Œé‡Œé¢åŒ…å«äº†playerç»„ä»¶ progress-barç»„ä»¶ progress-circleç»„ä»¶ï¼Œä½¿ç”¨åˆ°äº†vuexå®ç°çŠ¶æ€ç®¡ç†ï¼Œå­¦ä¹ åˆ°äº†æ ·å¼å¤„ç† æ’­æ”¾çŠ¶æ€ç®¡ç† ä»¥åŠæ¨¡å¼åˆ‡æ¢æ¶‰åŠåˆ°çš„çŸ¥è¯†ç­‰ç­‰,æ¥ä¸‹æ¥å°±æ˜¯å¼€å‘æ¦œå•ç»„ä»¶ï¼ŒåŠ æ²¹~~~</p> <p>é™„ä¸Šæ•ˆæœå›¾</p> <p><img src="https://i.loli.net/2020/01/19/TpaQiOYkyRcSsVr.gif" alt="GIF.gif"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.81dd3622.js" defer></script><script src="/assets/js/2.d1b1e148.js" defer></script><script src="/assets/js/3.103e70cb.js" defer></script><script src="/assets/js/4.a3faee54.js" defer></script>
  </body>
</html>
