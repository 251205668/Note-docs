(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{81:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" Vue")]),t._v(" "),s("h2",{attrs:{id:"vue基础知识点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue基础知识点"}},[t._v("#")]),t._v(" Vue基础知识点")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://note.youdao.com/noteshare?id=b5e31d39849dcba01d11542ba146225b",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("这个是两年前初学"),s("code",[t._v("Vue")]),t._v("总结的,所以文笔略显粗糙,后续将重新总结")]),t._v(" "),s("h2",{attrs:{id:"vue原理部分-核心重点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue原理部分-核心重点"}},[t._v("#")]),t._v(" Vue原理部分(核心重点)")]),t._v(" "),s("h3",{attrs:{id:"mvvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mvvm"}},[t._v("#")]),t._v(" MVVM")]),t._v(" "),s("p",[s("code",[t._v("MVVM")]),t._v("传统的"),s("code",[t._v("MVC")]),t._v("模型主要区分于"),s("code",[t._v("Controller")]),t._v("层,简称数据驱动模型,就是"),s("code",[t._v("vm")]),t._v("层的作用就是:数据绑定在"),s("code",[t._v("vm")]),t._v("层，并自动渲染页面,页面发生变化时会通知"),s("code",[t._v("vm")]),t._v("层更新数据。")]),t._v(" "),s("h3",{attrs:{id:"vue响应式原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue响应式原理"}},[t._v("#")]),t._v(" Vue响应式原理")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("data")]),t._v("是如何已发生改变就立即渲染页面的?")])]),t._v(" "),s("p",[t._v("通过核心的API:"),s("code",[t._v("Object.defineProperty")]),t._v("来监听数据,达到将变量当做函数一样监听的效果。")]),t._v(" "),s("p",[t._v("简单的监听")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangsan'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听name,将name当做data的属性")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" name\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// use")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//zhangsan")]),t._v("\ndata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lisi'")]),t._v(" \n")])])]),s("p",[t._v("深度改造: 支持结构复杂的对象或者数组监听")]),t._v(" "),s("blockquote",[s("p",[t._v("判断是否是引用类型,然后遍历监听,监听过程中递归"),s("code",[t._v("value")]),t._v(",因为可能是深层次结构")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" target\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineRective")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineRective")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// value可能是复杂对象 递归监听")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 深度监听")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("监听数组变化")])]),t._v(" "),s("p",[t._v("这样虽然能够监听深层对象或值,但是还是无法监听数组,这里需要改造"),s("code",[t._v("target")]),t._v("的原型")]),t._v(" "),s("ul",[s("li",[t._v("重新定义数组原型方法,不能污染全局,使用"),s("code",[t._v("Object.create")])]),t._v(" "),s("li",[t._v("扩展方法,增加视图更新方法和原生数组方法")]),t._v(" "),s("li",[t._v("目标原型指向定义的变量")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ArrayObject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将ArraayObject原型指向他,然后扩展方法 即继承数组方法,不影响定义新方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arrayob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ArrayObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'push'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'shift'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unshift'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pop'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("methodName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扩展的方法")]),t._v("\n  arrayob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("methodName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'视图更新'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 真正意义上的调用原生方法")]),t._v("\n   ArrayObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("methodName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用的时候将原型指向arrayob即可")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arrayob\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  nums"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nums"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 视图更新 此处调用arrayob的方法")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("defineProperty缺点")]),t._v(" "),s("ul",[s("li",[t._v("深度监听,一次性递归到底，计算量大")]),t._v(" "),s("li",[t._v("无法监听新增删除,必须使用"),s("code",[t._v("Vue.set")]),t._v("或者"),s("code",[t._v("Vue.delete")])]),t._v(" "),s("li",[t._v("无法实现数组监听,必须要改造")])])]),t._v(" "),s("h3",{attrs:{id:"虚拟dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom"}},[t._v("#")]),t._v(" 虚拟DOM")]),t._v(" "),s("p",[t._v("传统dom操作: 耗时耗费性能。")]),t._v(" "),s("p",[t._v("虚拟"),s("code",[t._v("dom")]),t._v("操作"),s("strong",[t._v("利用"),s("code",[t._v("js")]),t._v("的执行速度很快")]),t._v(",先利用"),s("code",[t._v("js")]),t._v("模拟"),s("code",[t._v("dom")]),t._v("结构,然后计算出最小的变更,操作"),s("code",[t._v("dom")])]),t._v(" "),s("p",[t._v("模拟"),s("code",[t._v("DOM")]),t._v("结构")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/imageList/imglist/master/20200709125703.png",alt:"20200709125703.png"}})]),t._v(" "),s("p",[t._v("更多内容待补充")]),t._v(" "),s("h2",{attrs:{id:"常考面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常考面试题"}},[t._v("#")]),t._v(" 常考面试题")]),t._v(" "),s("h3",{attrs:{id:"聊一下mvvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#聊一下mvvm"}},[t._v("#")]),t._v(" 聊一下MVVM")]),t._v(" "),s("p",[t._v("MVVM不同于MVC的地方在于将"),s("code",[t._v("Controller")]),t._v("变成了"),s("code",[t._v("VM")]),t._v("层,VM层:ViewModel层,数据驱动视图层。数据绑定到"),s("code",[t._v("VM")]),t._v("层,然后会自动渲染页面,当页面发生变化时会通知"),s("code",[t._v("VM")]),t._v("层更新数据。")]),t._v(" "),s("h3",{attrs:{id:"简单说一下vue2-x响应式数据原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单说一下vue2-x响应式数据原理"}},[t._v("#")]),t._v(" 简单说一下Vue2.x响应式数据原理")]),t._v(" "),s("p",[t._v("VUE响应式原理核心是使用到了"),s("code",[t._v("Object.defineProperty")]),t._v("这个"),s("code",[t._v("API")]),t._v(",VUE重新定义"),s("code",[t._v("data")]),t._v("里面的属性,当页面使用属性时,属性发生变化,就可以监听变化通知进行更新操作。")]),t._v(" "),s("h3",{attrs:{id:"nexttick知道吗，实现原理是什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nexttick知道吗，实现原理是什么？"}},[t._v("#")]),t._v(" nextTick知道吗，实现原理是什么？")]),t._v(" "),s("p",[s("code",[t._v("dom")]),t._v("更新结束后执行的延时回调函数。主要使用了宏任务和微任务。")]),t._v(" "),s("p",[t._v("根据执行环境分别尝试采用")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Promise")])]),t._v(" "),s("li",[s("strong",[t._v("MutationObserver")])]),t._v(" "),s("li",[s("strong",[t._v("setImmediate")])]),t._v(" "),s("li",[s("strong",[t._v("如果以上都不行则采用setTimeout")])])]),t._v(" "),s("h3",{attrs:{id:"vue中的组件data为什么必须是函数？？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue中的组件data为什么必须是函数？？"}},[t._v("#")]),t._v(" Vue中的组件data为什么必须是函数？？")]),t._v(" "),s("p",[t._v("因为组件是可以复用的，js里对象是引用关系，"),s("strong",[t._v("如果组件data是一个对象，那么子组件中的data属性值会"),s("code",[t._v("互相污染")]),t._v("，产生不必要的麻烦")]),t._v("。所以一个组件中的data必须是一个函数，因此"),s("strong",[t._v("每个实例可以维护一份被返回对象独立的拷贝")]),t._v("。也因为new Vue的实例是不会被复用，所以不存在以上问题。")]),t._v(" "),s("h3",{attrs:{id:"谈一下vue生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谈一下vue生命周期"}},[t._v("#")]),t._v(" 谈一下VUE生命周期")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("beforeCreate: new Vue()之后执行的第一个钩子,"),s("strong",[t._v("这个期间"),s("code",[t._v("methods")]),t._v(","),s("code",[t._v("computed")]),t._v(","),s("code",[t._v("data")]),t._v("数据都无法获取")])])]),t._v(" "),s("li",[s("p",[t._v("created: "),s("strong",[t._v("实例创建完成")]),t._v("后,完成数据侦测,"),s("strong",[t._v("虽然可以获取数据,但是无法完成"),s("code",[t._v("dom")]),t._v("交互")])])]),t._v(" "),s("li",[s("p",[t._v("beforeMount: 发生在挂载之前,"),s("strong",[t._v("当前阶段虚拟"),s("code",[t._v("dom")]),t._v("已经创建完成")]),t._v(",如果更改数据"),s("strong",[t._v("不会触发"),s("code",[t._v("updated")])])])]),t._v(" "),s("li",[s("p",[t._v("mounted: 挂载结束,"),s("strong",[t._v("已完成双向绑定,可以访问到DOM节点,可以使用"),s("code",[t._v("$refs")]),t._v("操作"),s("code",[t._v("dom")])])])]),t._v(" "),s("li",[s("p",[t._v("beforeUpdate: "),s("strong",[t._v("响应式数据更新之前,虚拟"),s("code",[t._v("dom")]),t._v("重新渲染之前")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("updated: 发生在更新完成之后，"),s("strong",[t._v("当前阶段组件Dom已完成更新")]),t._v("。要注意的是避免在此期间更改数据，因为这可能会导致无限循环的更新。")])]),t._v(" "),s("li",[s("p",[t._v("beforeDestory: 发生在实例销毁之前，"),s("strong",[t._v("在当前阶段实例完全可以被使用，我们可以在这时进行善后收尾工作")]),t._v("，比如清除计时器")])]),t._v(" "),s("li",[s("p",[t._v("destoryed: 发生在实例销毁之后，"),s("strong",[t._v("这个时候只剩下了dom空壳")]),t._v("。组件已被拆解，数据绑定被卸除，监听被移出，子实例也统统被销毁")])])]),t._v(" "),s("h3",{attrs:{id:"谈一下-nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谈一下-nexttick"}},[t._v("#")]),t._v(" 谈一下$nextTick")]),t._v(" "),s("p",[t._v("nextTick: 数据更新,dom渲染后执行的回调函数")]),t._v(" "),s("p",[t._v("原理: 有待学习")]),t._v(" "),s("p",[t._v("使用场景:")]),t._v(" "),s("ol",[s("li",[t._v("created中操作dom")]),t._v(" "),s("li",[t._v("对更新的dom进行一系列操作时")]),t._v(" "),s("li",[t._v("使用插件时,希望dom重新应用插件(比如数据变化后，使用的better-scroll插件需要在nextTick中调用better-scroll的刷新api)")])]),t._v(" "),s("h3",{attrs:{id:"谈一下computed和watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谈一下computed和watch"}},[t._v("#")]),t._v(" 谈一下computed和watch")]),t._v(" "),s("p",[s("code",[t._v("Computed")]),t._v("本质是一个具备缓存的watcher，依赖的属性发生变化就会更新视图。 适用于计算比较消耗性能的计算场景。主要使用在"),s("code",[t._v("dom")]),t._v("属性更新。")]),t._v(" "),s("p",[s("code",[t._v("Watch")]),t._v("没有缓存性，更多的是观察的作用，可以监听某些数据执行回调。当我们需要深度监听对象中的属性时，可以打开"),s("code",[t._v("deep：true")]),t._v("选项。")]),t._v(" "),s("h3",{attrs:{id:"说一下v-if和v-show的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说一下v-if和v-show的区别"}},[t._v("#")]),t._v(" 说一下v-if和v-show的区别")]),t._v(" "),s("p",[s("code",[t._v("v-if")]),t._v(": 隐藏的话不会渲染"),s("code",[t._v("dom")]),t._v("。\n"),s("code",[t._v("v-show")]),t._v(": 本质控制"),s("code",[t._v("display:none")]),t._v(",节省性能。")]),t._v(" "),s("h3",{attrs:{id:"说一下v-model的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说一下v-model的原理"}},[t._v("#")]),t._v(" 说一下v-model的原理")]),t._v(" "),s("p",[s("code",[t._v("v-model")]),t._v("本质是一个语法糖,可以看做是"),s("code",[t._v("input")]),t._v("和"),s("code",[t._v("value")]),t._v("的语法堂。可以更改"),s("code",[t._v("prop")]),t._v("和"),s("code",[t._v("event")]),t._v("来实现自定义"),s("code",[t._v("model")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"vue事件绑定原理说一下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue事件绑定原理说一下"}},[t._v("#")]),t._v(" Vue事件绑定原理说一下")]),t._v(" "),s("p",[t._v("原生是利用"),s("code",[t._v("addEventListener")]),t._v("实现的,组件事件通过"),s("code",[t._v("$on")]),t._v("绑定。")]),t._v(" "),s("h3",{attrs:{id:"vue模板编译原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue模板编译原理"}},[t._v("#")]),t._v(" VUE模板编译原理")]),t._v(" "),s("ul",[s("li",[t._v("生成"),s("code",[t._v("AST")]),t._v("树")]),t._v(" "),s("li",[t._v("优化")]),t._v(" "),s("li",[t._v("生成可执行代码")])]),t._v(" "),s("p",[t._v("首先解析模板,生成"),s("code",[t._v("AST语法树")]),t._v("(对象形式描述模板)。使用大量正则表达式对末班进行解析。")]),t._v(" "),s("p",[t._v("Vue数据是响应式的,但其实模板并不是所有的都是响应式的,Vue深层遍历"),s("code",[t._v("AST")]),t._v("树,按照条件标记节点,然后就可以跳过比对，起到优化作用。")]),t._v(" "),s("p",[t._v("最后一步,将优化过的"),s("code",[t._v("AST")]),t._v("树转为可执行代码。")]),t._v(" "),s("h3",{attrs:{id:"vue-diff算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-diff算法"}},[t._v("#")]),t._v(" VUE diff算法")]),t._v(" "),s("h3",{attrs:{id:"再说一下虚拟dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#再说一下虚拟dom"}},[t._v("#")]),t._v(" 再说一下虚拟Dom")]),t._v(" "),s("p",[t._v("由于在浏览器中操作DOM是很昂贵的。频繁的操作DOM，会产生一定的性能问题。这就是虚拟Dom的"),s("code",[t._v("产生原因")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("Virtual DOM本质就是用一个原生的JS对象去描述一个DOM节点")]),t._v("。是对真实DOM的一层抽象。")]),t._v(" "),s("h3",{attrs:{id:"vue中组件生命周期调用顺序说一下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue中组件生命周期调用顺序说一下"}},[t._v("#")]),t._v(" Vue中组件生命周期调用顺序说一下")]),t._v(" "),s("p",[t._v("组件的调用顺序都是先父后子,渲染完成的顺序是先子后父。")]),t._v(" "),s("p",[t._v("组件的销毁操作是先父后子，销毁完成的顺序是先子后父。")]),t._v(" "),s("p",[t._v("加载渲染过程: 先子后父")]),t._v(" "),s("p",[s("code",[t._v("父beforeCreate->父created->父beforeMount->子beforeCreate->子created->子beforeMount- >子mounted->父mounted")])]),t._v(" "),s("p",[t._v("子组件更新过程")]),t._v(" "),s("p",[s("code",[t._v("父beforeUpdate->子beforeUpdate->子updated->父updated")])]),t._v(" "),s("p",[t._v("父组件更新")]),t._v(" "),s("p",[s("code",[t._v("父beforeUodate -> updated")])]),t._v(" "),s("p",[t._v("销毁过程")]),t._v(" "),s("p",[s("code",[t._v("父beforeDestroy->子beforeDestroy->子destroyed->父destroyed")])]),t._v(" "),s("h3",{attrs:{id:"vue2-x组件通信有哪些方式？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x组件通信有哪些方式？"}},[t._v("#")]),t._v(" Vue2.x组件通信有哪些方式？")]),t._v(" "),s("ul",[s("li",[t._v("父子组件通信")])]),t._v(" "),s("p",[t._v("父->子"),s("code",[t._v("props")]),t._v("，子->父 "),s("code",[t._v("$on")]),t._v("、"),s("code",[t._v("$emit")])]),t._v(" "),s("p",[t._v("获取父子组件实例 "),s("code",[t._v("$parent")]),t._v("、"),s("code",[t._v("$children")])]),t._v(" "),s("p",[s("code",[t._v("Ref")]),t._v(" 获取实例的方式调用组件的属性或者方法")]),t._v(" "),s("ul",[s("li",[t._v("兄弟组件通信")])]),t._v(" "),s("p",[s("code",[t._v("Event Bus")]),t._v(" 实现跨组件通信 "),s("code",[t._v("Vue.prototype.$bus = new Vue")])]),t._v(" "),s("p",[s("code",[t._v("Vuex")])]),t._v(" "),s("ul",[s("li",[t._v("跨组件")])]),t._v(" "),s("p",[s("code",[t._v("Vuex")])]),t._v(" "),s("h3",{attrs:{id:"vue性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue性能优化"}},[t._v("#")]),t._v(" VUE性能优化")]),t._v(" "),s("ul",[s("li",[t._v("尽量减少data中的数据，data中的数据都会增加getter和setter，会收集对应的watcher")]),t._v(" "),s("li",[t._v("v-if和v-for不能连用如果需要使用v-for给每项元素绑定事件时使用事件代理")]),t._v(" "),s("li",[t._v("SPA 页面采用keep-alive缓存组件")]),t._v(" "),s("li",[t._v("在更多的情况下，使用v-if替代v-show")]),t._v(" "),s("li",[t._v("key保证唯一")]),t._v(" "),s("li",[t._v("使用路由懒加载、异步组件")]),t._v(" "),s("li",[t._v("防抖、节流")]),t._v(" "),s("li",[t._v("第三方模块按需导入")]),t._v(" "),s("li",[t._v("长列表滚动到可视区域动态加载")]),t._v(" "),s("li",[t._v("图片懒加载")])])])}),[],!1,null,null,null);a.default=n.exports}}]);