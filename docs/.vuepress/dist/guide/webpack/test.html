<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 4.0 å­¦ä¹  | å‰ç«¯é¢è¯•çŸ¥è¯†æ€»ç»“</title>
    <meta name="description" content="è‡ªå®¶ä½¿ç”¨,æš‚ä¸å¤–ä¼ ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.6a4803ab.css" as="style"><link rel="preload" href="/assets/js/app.81dd3622.js" as="script"><link rel="preload" href="/assets/js/2.d1b1e148.js" as="script"><link rel="preload" href="/assets/js/32.d42beb3f.js" as="script"><link rel="preload" href="/assets/js/4.a3faee54.js" as="script"><link rel="prefetch" href="/assets/js/10.42124fbe.js"><link rel="prefetch" href="/assets/js/11.bdef2e64.js"><link rel="prefetch" href="/assets/js/12.9c5e83ed.js"><link rel="prefetch" href="/assets/js/13.3db43aaf.js"><link rel="prefetch" href="/assets/js/14.8f2ec86d.js"><link rel="prefetch" href="/assets/js/15.c6286125.js"><link rel="prefetch" href="/assets/js/16.5da2b31d.js"><link rel="prefetch" href="/assets/js/17.c9deef07.js"><link rel="prefetch" href="/assets/js/18.13ed30af.js"><link rel="prefetch" href="/assets/js/19.f1a01180.js"><link rel="prefetch" href="/assets/js/20.30f7288c.js"><link rel="prefetch" href="/assets/js/21.477730e4.js"><link rel="prefetch" href="/assets/js/22.ab119ff1.js"><link rel="prefetch" href="/assets/js/23.9bbc22fc.js"><link rel="prefetch" href="/assets/js/24.cb1899b8.js"><link rel="prefetch" href="/assets/js/25.64669f1d.js"><link rel="prefetch" href="/assets/js/26.f3040183.js"><link rel="prefetch" href="/assets/js/27.2938dd4c.js"><link rel="prefetch" href="/assets/js/28.cd87026d.js"><link rel="prefetch" href="/assets/js/29.b92287f4.js"><link rel="prefetch" href="/assets/js/3.103e70cb.js"><link rel="prefetch" href="/assets/js/30.af43d48f.js"><link rel="prefetch" href="/assets/js/31.8c7148f5.js"><link rel="prefetch" href="/assets/js/33.223bba8e.js"><link rel="prefetch" href="/assets/js/34.04b12083.js"><link rel="prefetch" href="/assets/js/35.19c65fa0.js"><link rel="prefetch" href="/assets/js/36.a1a664b9.js"><link rel="prefetch" href="/assets/js/37.d2e7a2dd.js"><link rel="prefetch" href="/assets/js/38.4f737159.js"><link rel="prefetch" href="/assets/js/39.fcdeadea.js"><link rel="prefetch" href="/assets/js/40.40a9daf9.js"><link rel="prefetch" href="/assets/js/5.2f32d917.js"><link rel="prefetch" href="/assets/js/6.d92ecc16.js"><link rel="prefetch" href="/assets/js/7.a09f8ef2.js"><link rel="prefetch" href="/assets/js/8.5b00daa2.js"><link rel="prefetch" href="/assets/js/9.9d06f44a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6a4803ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å‰ç«¯é¢è¯•çŸ¥è¯†æ€»ç»“</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><span class="title">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  å¤§å‹ç”µå•†
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link">
  vueå®ç°éŸ³ä¹app
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><span class="title">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  å¤§å‹ç”µå•†
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link">
  vueå®ç°éŸ³ä¹app
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç›®å½•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>cssåŸºç¡€åˆ°è¿›é˜¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/css/test.html" class="sidebar-link">ç§»åŠ¨ç«¯é—®é¢˜</a></li><li><a href="/guide/css/layout.html" class="sidebar-link">å‰ç«¯å¸¸è§å¸ƒå±€</a></li><li><a href="/guide/css/alwaysCode.html" class="sidebar-link">å¸¸ç”¨cssç‰‡æ®µ</a></li><li><a href="/guide/css/iconfont.html" class="sidebar-link">å…¨å±€stylusé…ç½®åŠä½¿ç”¨iconfont</a></li><li><a href="/guide/css/css-skill.html" class="sidebar-link">çµæ´»ä½¿ç”¨cssæŠ€å·§</a></li><li><a href="/guide/css/code.html" class="sidebar-link">code pratice</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>jsåŸºç¡€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/js/base.html" class="sidebar-link">åŸºç¡€</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>jsè¿›é˜¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/js/higher.html" class="sidebar-link">js??</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MVVMåˆ†æ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/vue/vue.html" class="sidebar-link">vue åŸºç¡€éƒ¨åˆ†</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpackå®æˆ˜åˆ†æ</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/webpack/test.html" class="active sidebar-link">webpack 4.0 å­¦ä¹ </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#å®‰è£…å¹¶å…¥é—¨ä½¿ç”¨-webpack" class="sidebar-link">å®‰è£…å¹¶å…¥é—¨ä½¿ç”¨ webpack</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#æ¨¡å—åŒ–çš„æ¦‚å¿µ-æœ‰å“ªäº›-webpack-æ¨¡å—" class="sidebar-link">æ¨¡å—åŒ–çš„æ¦‚å¿µ,æœ‰å“ªäº› webpack æ¨¡å—</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#webpack-é…ç½®æ–‡ä»¶å’Œæ‰“åŒ…æ–¹å¼" class="sidebar-link">webpack é…ç½®æ–‡ä»¶å’Œæ‰“åŒ…æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#webpack-æ ¸å¿ƒ" class="sidebar-link">Webpack æ ¸å¿ƒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#loader-å’Œç®€å•ä½¿ç”¨" class="sidebar-link">Loader å’Œç®€å•ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#æ‰“åŒ…å›¾ç‰‡" class="sidebar-link">æ‰“åŒ…å›¾ç‰‡</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#æ‰“åŒ…æ ·å¼æ–‡ä»¶" class="sidebar-link">æ‰“åŒ…æ ·å¼æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#webpack-å¸¸ç”¨æ’ä»¶ä½¿ç”¨" class="sidebar-link">Webpack å¸¸ç”¨æ’ä»¶ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/guide/webpack/test.html#å…¶ä»–-é‡è¦é…ç½®æ’ä»¶" class="sidebar-link">å…¶ä»–(é‡è¦é…ç½®æ’ä»¶)</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.jsåŸºç¡€åˆ°è¿›é˜¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢è¯•é¢˜æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-4-0-å­¦ä¹ "><a href="#webpack-4-0-å­¦ä¹ " class="header-anchor">#</a> webpack 4.0 å­¦ä¹ </h1> <p><img src="https://raw.githubusercontent.com/imageList/imglist/master/20200722154349.png" alt="20200722154349"></p> <p><code>webpack</code>ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·,ä»–å¯ä»¥æ”¯æŒä¸å…‰æ˜¯<code>ES module</code>æ¨¡å—ç¿»è¯‘,è¿˜å¯ä»¥æ”¯æŒå¤šç§å½¢å¼çš„æ¨¡å—æ‰“åŒ…ã€‚</p> <h2 id="å®‰è£…å¹¶å…¥é—¨ä½¿ç”¨-webpack"><a href="#å®‰è£…å¹¶å…¥é—¨ä½¿ç”¨-webpack" class="header-anchor">#</a> å®‰è£…å¹¶å…¥é—¨ä½¿ç”¨ webpack</h2> <p>é¦–å…ˆåœ¨æ–‡ä»¶å¤¹ä¸‹ç”¨<code>npm</code>åˆå§‹åŒ–,ç„¶åæ‰§è¡Œå‘½ä»¤</p> <blockquote><p>ä¸å»ºè®®å…¨å±€å®‰è£… webpack,å¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬åŸå› å¯¼è‡´é¡¹ç›®è¿è¡Œä¸èµ·æ¥</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># webpackè„šæ‰‹æ¶</span>
$ cnpm <span class="token function">install</span> webpack-cli --save-dev
<span class="token comment"># webpack</span>
$ cnpm <span class="token function">install</span> webpack --save
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>å¯ä»¥æŒ‡å®š<code>webpack</code>ç‰ˆæœ¬å·è¿›è¡Œå®‰è£…è„šæ‰‹æ¶</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> webpack@4.43.0 webpack-cli -D
</code></pre></div></div> <p>ç„¶åæ‰¾åˆ°ä½¿ç”¨åˆ°æ¨¡å—åŒ–ä¸»å…¥å£æ–‡ä»¶,ä¾‹å¦‚æˆ‘è¿™é‡Œçš„<code>index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token constant">P</span> <span class="token keyword">from</span> <span class="token string">'./p'</span>
<span class="token keyword">new</span> <span class="token class-name">P</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¹‹åæ‰§è¡Œæ‰“åŒ…å‘½ä»¤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx webpack index.js
</code></pre></div><p>æ‰“åŒ…å®Œæˆä¹‹åä¼šè‡ªåŠ¨åœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ª<code>dist</code>æ–‡ä»¶å¤¹,é‡Œé¢åŒ…å«<code>main.js</code>å°±æ˜¯æ‰“åŒ…ç¿»è¯‘åçš„æ–‡ä»¶ã€‚</p> <h2 id="æ¨¡å—åŒ–çš„æ¦‚å¿µ-æœ‰å“ªäº›-webpack-æ¨¡å—"><a href="#æ¨¡å—åŒ–çš„æ¦‚å¿µ-æœ‰å“ªäº›-webpack-æ¨¡å—" class="header-anchor">#</a> æ¨¡å—åŒ–çš„æ¦‚å¿µ,æœ‰å“ªäº› webpack æ¨¡å—</h2> <p>å¼€å‘è€…å°†ç¨‹åºåˆ†è§£æˆ<code>ç¦»æ•£åŠŸèƒ½å—</code>(discrete chunks of functionality)ï¼Œå¹¶ç§°ä¹‹ä¸ºæ¨¡å—ã€‚</p> <p>æ¯ä¸ªæ¨¡å—å…·æœ‰æ¯”å®Œæ•´ç¨‹åº<strong>æ›´å°çš„æ¥è§¦é¢</strong>ï¼Œä½¿å¾—<code>æ ¡éªŒ</code>ã€<code>è°ƒè¯•</code>ã€<code>æµ‹è¯•</code>è½»è€Œæ˜“ä¸¾ã€‚ ç²¾å¿ƒç¼–å†™çš„æ¨¡å—æä¾›äº†å¯é çš„æŠ½è±¡å’Œå°è£…ç•Œé™ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä¸­æ¯ä¸ªæ¨¡å—éƒ½å…·æœ‰<code>æ¡ç†æ¸…æ¥šçš„è®¾è®¡</code>å’Œ<code>æ˜ç¡®çš„ç›®çš„</code>ã€‚</p> <p><code>webpackæ¨¡å—</code>åŒ…å«ä»¥ä¸‹:</p> <ul><li><code>ES2015 import</code> è¯­å¥</li> <li><code>CommonJS require()</code> è¯­å¥</li> <li><code>AMD define</code> å’Œ require è¯­å¥</li> <li><code>css/sass/less</code> æ–‡ä»¶ä¸­çš„ <code>@import</code> è¯­å¥ã€‚</li> <li>æ ·å¼(<code>url(...)</code>)æˆ– HTML æ–‡ä»¶(<code>&lt;img src=...&gt;</code>)ä¸­çš„å›¾ç‰‡é“¾æ¥(image url)</li></ul> <h2 id="webpack-é…ç½®æ–‡ä»¶å’Œæ‰“åŒ…æ–¹å¼"><a href="#webpack-é…ç½®æ–‡ä»¶å’Œæ‰“åŒ…æ–¹å¼" class="header-anchor">#</a> webpack é…ç½®æ–‡ä»¶å’Œæ‰“åŒ…æ–¹å¼</h2> <p><code>webpack</code>é»˜è®¤å¯»æ‰¾çš„é…ç½®æ–‡ä»¶æ˜¯<code>webpack.config.js</code>,å¦‚æœéœ€è¦æ›´æ¢é…ç½®æ–‡ä»¶,éœ€è¦è¿è¡Œå‘½ä»¤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx webpack --config fileName.js
</code></pre></div><p><strong>åŸºç¡€é…ç½®</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…¥å£æ–‡ä»¶,è¿™é‡Œæ˜¯ç®€å†™ï¼Œentry:{main:'./src/index.js'}</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token comment">// æ‰“åŒ…é…ç½®</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‰“åŒ…æ–‡ä»¶è·¯å¾„ å½“å‰é…ç½®æ–‡ä»¶æ ¹ç›®å½•ä¸‹çš„distæ–‡ä»¶å¤¹</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€ç»ˆæ‰“åŒ…æ•ˆæœ:</p> <p><img src="https://raw.githubusercontent.com/imageList/imglist/master/20200722170005.png" alt="20200722170005"></p> <p><strong>é…ç½® entry å’Œ output</strong></p> <p>å¦‚æœéœ€è¦æ‰“åŒ…å¤šä¸ªæ–‡ä»¶,åªéœ€è¦è®¾ç½®<code>entry</code>å¯¹è±¡å³å¯</p> <div class="language-js extra-class"><pre class="language-js"><code>entry<span class="token operator">:</span><span class="token punctuation">{</span>
  main<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  sub<span class="token operator">:</span> <span class="token string">'./src/index.js'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€ç»ˆç”Ÿæˆçš„æ‰“åŒ…æ–‡ä»¶è¿˜é…ç½®ä¸€ä¸‹<code>output</code>,å¦åˆ™ä¼šå†²çª</p> <div class="language-js extra-class"><pre class="language-js"><code>output<span class="token operator">:</span><span class="token punctuation">{</span>
  filename<span class="token operator">:</span><span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>è¿è¡Œ<code>webpack</code>æ‰“åŒ…æœ‰å‡ ç§æ–¹å¼</strong></p> <p>å‰ææ¡ä»¶éœ€è¦å®‰è£…<code>webpack-cli</code>,ä»–çš„ä½œç”¨æ˜¯è¯†åˆ«<code>webpack</code>å‘½ä»¤ã€‚</p> <ul><li>ä½¿ç”¨å…¨å±€æ‰“åŒ…,å‰ææ¡ä»¶æ˜¯å…¨å±€ç¯å¢ƒå®‰è£…äº†<code>webpack-cli</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ cnpm  <span class="token function">install</span> webpack -g
$ webpack index.js
</code></pre></div><ul><li>å±€éƒ¨æ‰“åŒ…</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx webapck index.js
</code></pre></div><ul><li>é…ç½®<code>package.json</code>çš„<code>script</code>è„šæœ¬è¿›è¡Œæ‰“åŒ…</li></ul> <p><strong>æ‰“åŒ…è¾“å‡ºç»“æœåˆ†æ</strong></p> <p><img src="https://raw.githubusercontent.com/imageList/imglist/master/20200722170654.png" alt="20200722170654"></p> <ul><li>Hash: ä»£è¡¨æœ¬æ¬¡æ‰“åŒ…çš„å”¯ä¸€ hash</li> <li>Version: æœ¬æ¬¡æ‰“åŒ…çš„ webpack ç‰ˆæœ¬å·</li> <li>Time: æ‰“åŒ…æ—¶é—´</li> <li>Asset: æ‰“åŒ…ç”Ÿæˆæ–‡ä»¶ï¼ŒSize:æ–‡ä»¶å¤§å°,Chunks: æ‰“åŒ…æ–‡ä»¶ä¸­å¯èƒ½æ˜¯å¤šä¸ªæ–‡ä»¶ç›¸äº’ä¾èµ–çš„,å…¶ä»–æ–‡ä»¶æ‰“åŒ…ä¹Ÿä¼šæŠŠ<code>JSæ–‡ä»¶å¯¹åº”çš„idå€¼</code>æ”¾åˆ°<code>Chunks</code>ä¸‹é¢,Chunk Names: å¯¹åº”çš„åå­—ã€‚</li></ul> <p>è¿™é‡Œçš„è­¦å‘Šè¾“å‡ºæ˜¯å› ä¸ºæ²¡æœ‰æŒ‡å®šæ¨¡å¼,é»˜è®¤çš„<code>mode</code>é…ç½®æ˜¯<code>production</code>,é»˜è®¤æ˜¯å‹ç¼©çš„ã€‚è¿˜å¯ä»¥è®¾ç½®å¼€å‘ç¯å¢ƒæ¨¡å¼(development)ã€</p> <h2 id="webpack-æ ¸å¿ƒ"><a href="#webpack-æ ¸å¿ƒ" class="header-anchor">#</a> Webpack æ ¸å¿ƒ</h2> <h3 id="loader-å’Œç®€å•ä½¿ç”¨"><a href="#loader-å’Œç®€å•ä½¿ç”¨" class="header-anchor">#</a> Loader å’Œç®€å•ä½¿ç”¨</h3> <p>æœ‰çš„æ—¶å€™éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶ä¸ä¸€å®šåªæ˜¯<code>js</code>æ–‡ä»¶,å¯èƒ½æ˜¯å›¾ç‰‡è¿˜å¯èƒ½æ˜¯<code>vue</code>æˆ–è€…<code>jsx</code>ç­‰ç­‰æ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™<code>webpack</code>é»˜è®¤æ˜¯ä¸æ”¯æŒæ‰“åŒ…çš„,<code>loader</code>å°±å¯ä»¥å¸®ç»„å¿«é€Ÿæ‰“åŒ…è¿™äº›é js æ–‡ä»¶ã€‚</p> <p><strong><code>loader</code>ä½œç”¨</strong>: å…è®¸ä½ æ‰“åŒ…é™¤ <code>JavaScript</code> ä¹‹å¤–çš„ä»»ä½•é™æ€èµ„æºã€‚é¦–å…ˆå°†æ–‡ä»¶ç§»åŠ¨åˆ°æ‰“åŒ…è·¯å¾„,ç„¶åè¿”å›åç§°ã€‚</p> <p><strong>ä½¿ç”¨<code>loader</code>æ­¥éª¤</strong>: 1.å®šä¹‰<code>module</code>,é…ç½®è§„åˆ™ 2.é…ç½®åŒ¹é…è§„åˆ™å’ŒæŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ª<code>loader</code> 3. åœ¨<code>use</code>é‡Œé¢é…ç½®<code>loaderé…ç½®é¡¹</code></p> <p><strong>ç®€å•çš„ä½¿ç”¨<code>file-loader</code>æ‰“åŒ…å›¾ç‰‡</strong></p> <p>é¦–å…ˆåœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å›¾ç‰‡,ç„¶åå®‰è£…ä¸€ä¸‹<code>file-loader</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span>
</code></pre></div><p>ç„¶åéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‰“åŒ…è§„åˆ™</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>

  <span class="token comment">// æ¨¡å—æ‰“åŒ…è§„åˆ™</span>
  module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// åŒ¹é…è§„åˆ™</span>
        test<span class="token operator">:</span><span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨åˆ°çš„loader</span>
        use<span class="token operator">:</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span><span class="token string">'file-loader'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥è¿è¡Œ<code>webpack</code>æ‰“åŒ…å‘½ä»¤å³å¯</p> <p><img src="https://raw.githubusercontent.com/imageList/imglist/master/20200722175133.png" alt="20200722175133"></p> <h3 id="æ‰“åŒ…å›¾ç‰‡"><a href="#æ‰“åŒ…å›¾ç‰‡" class="header-anchor">#</a> æ‰“åŒ…å›¾ç‰‡</h3> <ol><li>ä½¿ç”¨<code>file-loader</code>æ‰“åŒ…å›¾ç‰‡åˆ°æŒ‡å®šç›®å½•</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  extry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// æ‰“åŒ…åˆ° dist/imagesä¸‹</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'[name].[etc]'</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>ä½¿ç”¨<code>url-loader</code>æ‰“åŒ…</li></ol> <p>è®¾ç½®<code>limit:size</code>è¿™ä¸ªå±æ€§å,å½“æ–‡ä»¶è¶…è¿‡è¿™ä¸ªå¤§å°,æ–‡ä»¶å°±ä¼šæŒ‰ç…§é…ç½®çš„è§„åˆ™è¿›è¡Œæ‰“åŒ…è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶,å¦‚æœæ²¡æœ‰è¶…è¿‡,å›¾ç‰‡å°±ä¼šä»¥ <code>base64</code> æ ¼å¼ä¿å­˜åœ¨æ‰“åŒ…æ–‡ä»¶ä¸­,è¿™æ ·å°±æœ‰ä¸€ä¸ªç¼ºç‚¹,æ–‡ä»¶ä¼šè¶Šæ’‘è¶Šå¤§ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span><span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span><span class="token punctuation">{</span>
              name<span class="token operator">:</span><span class="token string">'[name].[etc]'</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span><span class="token string">'images/'</span><span class="token punctuation">,</span>
              <span class="token comment">// é…ç½®å¤§å°é™åˆ¶,è¶…è¿‡åˆ™æŒ‰æ­¤è§„åˆ™æ‰“åŒ…</span>
              limit<span class="token operator">:</span><span class="token number">20480</span>
          <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ‰“åŒ…æ ·å¼æ–‡ä»¶"><a href="#æ‰“åŒ…æ ·å¼æ–‡ä»¶" class="header-anchor">#</a> æ‰“åŒ…æ ·å¼æ–‡ä»¶</h3> <p>æ‰“åŒ…<code>css</code>æ–‡ä»¶çš„åŸç†æ˜¯å…ˆé€šè¿‡ <code>css-loader</code> æ‰“åŒ…<code>css</code>æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•,ç„¶åé€šè¿‡ <code>style-loader</code> å°†æ ·å¼æŒ‚è½½åˆ°<code>header</code>ã€‚å…¶ä»–çš„æ¨¡å—åŒ–çš„<code>sass</code>ã€<code>less</code>ã€<code>stylus</code>åˆ™éœ€è¦å…ˆè½¬è¯‘æˆ<code>css</code>æ–‡ä»¶ç„¶ååŒæ ·çš„æŒ‚è½½ã€‚</p> <ol><li><strong>æ‰“åŒ…æ™®é€š<code>css</code>æ–‡ä»¶</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span><span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      <span class="token comment">// loaderæ‰§è¡Œé¡ºåºæ˜¯ä»ä¸‹åˆ°ä¸Š ä»å³åˆ°å·¦</span>
      use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰“åŒ…å<code>css</code>å…ˆé€šè¿‡ loader æ‰“åŒ…æˆ css ä»£ç ,ç„¶åæŒ‚è½½åˆ° header ä¸Š</p> <ol start="2"><li><strong>æ‰“åŒ…<code>Sass</code>æ–‡ä»¶,å¹¶ä¸”é…ç½®æµè§ˆå™¨å…¼å®¹æ€§å‰ç¼€</strong></li></ol> <p>æ‰“åŒ…<code>Sass</code>æ–‡ä»¶éœ€è¦ä½¿ç”¨åˆ°çš„<code>loader</code>ä¸º: <code>Sass-loader</code>,é¦–å…ˆå…ˆå®‰è£…</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> sass-loader node-sass  --save-dev
</code></pre></div><p>ç„¶åå¼€å§‹é…ç½®æµè§ˆå™¨çš„å…¼å®¹æ€§å‰ç¼€(ä¾‹å¦‚:<code>-webkit-transform: translate(100px,100px)</code>),è¿™é‡Œéœ€è¦ä½¿ç”¨åˆ°<strong>postcss-loader</strong>ï¼Œç„¶åé…åˆ<strong>autoprefixer</strong>æ’ä»¶è‡ªåŠ¨åœ¨ç”Ÿæˆ<code>css</code>æ–‡ä»¶æ—¶åŠ ä¸Šå‰ç¼€ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> i -D postcss-loader
$ <span class="token function">npm</span> i -D autoprefixer
</code></pre></div><p>å®‰è£…ä¹‹ååˆ›å»º<code>postcss.config.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€åå°±æ˜¯é…ç½®<code>webpack.config.js</code>äº†</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span>
module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span><span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      <span class="token comment">// loaderæ‰§è¡Œé¡ºåºæ˜¯ä»ä¸‹åˆ°ä¸Š ä»å³åˆ°å·¦</span>
      use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">,</span><span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>æ”¹è¿›æ‰“åŒ… Scss æ–‡ä»¶ä¸­çš„<code>css-loader</code>,è¿™é‡Œè®¾ç½®<code>module:true</code>çš„ä½œç”¨æ˜¯é¿å…è€¦åˆæ€§,(style.avatar) æ‰“åŒ…æˆ<code>æ¨¡å—åŒ–çš„css</code>,å¦‚æœç›´æ¥å¼•å…¥çš„è¯,é¡µé¢ä¸Šçš„å…¶ä»–<code>js</code>æ¨¡å—ä¹Ÿä½¿ç”¨åˆ°äº†è¯¥æ ·å¼ä¼šé€ æˆæ±¡æŸ“ã€‚<code>importLoaders:2</code>ä¿è¯<code>sass</code>æ–‡ä»¶é‡Œé¢å¼•å…¥çš„<code>sass</code>æ–‡ä»¶ä¹Ÿèƒ½æ­£å¸¸æ‰“åŒ…ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span><span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span><span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span><span class="token punctuation">{</span>
              module<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//å¼€å¯cssæ¨¡å—åŒ–,</span>
              importLoaders<span class="token operator">:</span><span class="token number">2</span> <span class="token comment">//ä¿è¯å‰ä¸¤ä¸ªloaderä¸€å®šæ‰§è¡Œ</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><strong>æ‰“åŒ…å›¾æ ‡å­—ä½“æ–‡ä»¶</strong></li></ol> <p>é…ç½®é€‰é¡¹:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(evt|svg|ttf)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'scss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åç›´æ¥åœ¨é¡µé¢ä¸Šæ­£å¸¸å¼•å…¥å­—ä½“æ–‡ä»¶<code>class</code>å³å¯æ˜¾ç¤ºå›¾ç‰‡</p> <h3 id="webpack-å¸¸ç”¨æ’ä»¶ä½¿ç”¨"><a href="#webpack-å¸¸ç”¨æ’ä»¶ä½¿ç”¨" class="header-anchor">#</a> Webpack å¸¸ç”¨æ’ä»¶ä½¿ç”¨</h3> <p>æ’ä»¶æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨<code>webpack</code>æ‰“åŒ…çš„èŠ‚ç‚¹ä¸Šåšäº‹æƒ…çš„,ç±»ä¼¼äºç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p> <ul><li><p><a href="https://www.webpackjs.com/plugins/html-webpack-plugin/" target="_blank" rel="noopener noreferrer">html-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å¸®åŠ©åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<code>html</code>æ–‡ä»¶,å¹¶ä¸”å°†æ‰“åŒ…ç”Ÿæˆçš„<code>js</code>å¡«å…¥</p></li> <li><p><a href="https://github.com/johnagan/clean-webpack-plugin" target="_blank" rel="noopener noreferrer">clean-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å¸®åŠ©åœ¨æ‰“åŒ…ä¹‹å‰åˆ é™¤ä¹‹å‰æ‰“åŒ…çš„æ–‡ä»¶å¤¹</p></li></ul> <p>ä½¿ç”¨æ¡ˆä¾‹:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// æŒ‡å®šhtmlæ¨¡æ¿</span>
      template<span class="token operator">:</span><span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰“åŒ…åæ•ˆæœ:</p> <p><img src="https://raw.githubusercontent.com/imageList/imglist/master/20200723160824.png" alt="20200723160824"></p> <h3 id="å…¶ä»–-é‡è¦é…ç½®æ’ä»¶"><a href="#å…¶ä»–-é‡è¦é…ç½®æ’ä»¶" class="header-anchor">#</a> å…¶ä»–(é‡è¦é…ç½®æ’ä»¶)</h3> <p><strong>å¼€å¯ source-map æ¨¡å¼</strong></p> <p><code>source-map</code>çš„ä½œç”¨ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚æ¯”å¦‚æºä»£ç çš„ç¬¬äºŒè¡Œå‡ºé”™,æ™®é€šæƒ…å†µä¸‹æ‰“åŒ…ååœ¨æ§åˆ¶å°æŠ¥çš„é”™è¯¯æ˜¯æ‰“åŒ…åçš„æ–‡ä»¶ä¸­æŠ¥é”™ä»£ç è¡Œ,å¾ˆéš¾å»æ’æŸ¥æºä»£ç é”™è¯¯,è¿™ä¸ªæ—¶å€™<code>source-map</code>å°±èµ·ä½œç”¨äº†,é€šè¿‡é…ç½®<code>source-map</code>å°±å¯ä»¥å°†æ‰“åŒ…æ–‡ä»¶æ˜ å°„åˆ°æºä»£ç ,å®ç°ç›‘å¬æºä»£ç çš„æ•ˆæœã€‚</p> <p>å¼€å¯<code>source-map</code>å¾ˆç®€å•,åªéœ€è¦å°†<code>devtool</code>è®¾ç½®ä¸º<code>source-map</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span><span class="token punctuation">{</span>
    main<span class="token operator">:</span><span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// noneåˆ™ä»£è¡¨å…³é—­</span>
  devtool<span class="token operator">:</span><span class="token string">'source-map'</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>ä½¿ç”¨ webpack-dev-server</strong></p> <p>å¦‚æœä½¿ç”¨<code>webpack --watch</code>è¿™ä¸ªå‘½ä»¤å»ç›‘å¬<code>æ‰“åŒ…æ›´æ–°</code>çš„è¯ä¸æ˜¯å¾ˆå¥½,é¦–å…ˆæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨æ‰“å¼€å…¥å£<code>htmlæ–‡ä»¶</code>,è€Œä¸”æ‰“å¼€çš„åè®®éƒ½æ˜¯<code>fileåè®®</code>ä¸èƒ½æ”¯æŒ<code>ajaxè¯·æ±‚</code>,æ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦é…ç½®<code>devServer</code>å»å¼€å¯ä¸€ä¸ªæœåŠ¡,ç›‘å¬æ›´æ–°ã€‚</p> <p><a href="https://www.webpackjs.com/configuration/dev-server/" target="_blank" rel="noopener noreferrer">å®˜ç½‘é…ç½®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ cnpm i webpack-dev-server -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æä¾›bundleçš„ç›®å½•</span>
    contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// é…ç½®è·¨åŸŸ</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>çƒ­æ¨¡å—æ›´æ–°</strong> ğŸ</p> <p>åœ¨<code>webpack</code>ä¸­å¼€å¯çƒ­æ¨¡å—æ›´æ–°,é¦–å…ˆéœ€è¦å¼•å…¥<code>webpack</code>,ç„¶åé…ç½®<code>devServer</code>ï¼Œä¹‹åéœ€è¦ä½¿ç”¨åˆ°<code>HotModuleReplacement</code>è¿›è¡Œçƒ­æ›´æ–°æ¨¡å—åŠ è½½</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// å¼€å¯çƒ­æ›´æ–°</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// æ¯æ¬¡æ›´æ–°,æµè§ˆå™¨ä¸ä¼šé‡å¤åˆ·æ–°</span>
    hotOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplcaement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¾‹å­: å½“ä½ åªéœ€è¦æ”¹å˜ä¸€ä¸ªæ¨¡å—ä»£ç æ—¶,ä¸æƒ³å½±å“å¦ä¸€ä¸ªæ¨¡å—çš„ä»£ç ,å¹¶ä¸”ä¸å¸Œæœ›æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼Œè¿™æ—¶å°±éœ€è¦é…ç½®<code>HotModuleReplcaement</code></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>css</code>æ¨¡å—çš„æ›´æ–°å°±ä¸éœ€è¦è¿™æ ·å¤„ç†,å› ä¸ºä»–ä»¬çš„<code>loader</code>å†…ç½®äº†å¯¹æ¨¡å—çš„ç›‘æ§æ›´æ–°æ“ä½œ</p></div> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./number'</span>
<span class="token keyword">import</span> <span class="token string">'./test'</span>

<span class="token comment">// æˆ‘åªå¸Œæœ›æ›´æ–°test,ç„¶åç›‘å¬testæ¨¡å—æ›´æ–°å»æ‰§è¡Œæ–°çš„ä¸šåŠ¡é€»è¾‘</span>
</code></pre></div><p>é¦–å…ˆé…ç½®çƒ­æ¨¡å—æ›´æ–°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span><span class="token punctuation">{</span>
    port<span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    hotOnly<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åé…ç½®å®Œæˆä¹‹ååœ¨<code>index.js</code>ä¸ŠæŒ‚ä¸Šä¸€ä¸ªé’©å­ç›‘å¬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// ç›‘å¬æ¨¡å—æ›´æ–°è§¦å‘é’©å­å‡½æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šæ¨¡å—çš„è·¯å¾„ ç¬¬äºŒä¸ªæ˜¯func</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./number'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>çƒ­æ›´æ–°çš„åŸç†(<strong>é‡ç‚¹</strong>):</p> <p><strong>ä½¿ç”¨ Babel å¤„ç† ES6</strong></p> <p>é¦–å…ˆéœ€è¦å®‰è£…<code>babel-loader</code>æ­å»º<code>babel</code>å’Œ<code>webpack</code>ä¹‹é—´çš„æ¡¥æ¢,ç„¶åé…ç½®<code>babel-presset</code>è¿›è¡Œè¯­æ³•ç¿»è¯‘ï¼Œè¿½åéœ€è¦ä½¿ç”¨<code>babel-polyfill</code>è¿›è¡Œä½ç‰ˆæœ¬å…¼å®¹æ€§å¤„ç†</p> <p>é¦–å…ˆå®‰è£…ç›¸å…³åŒ… @babel-</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-loader @babel/core  @babel/preset-env @babel-polyfill
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        <span class="token comment">// é…ç½®ä¸éœ€è¦ä½¿ç”¨babelè½¬è¯‘çš„è·¯å¾„</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token comment">// ç¿»è¯‘è§„åˆ™ ç„¶åæŒ‰éœ€åŠ è½½polyfill</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            useBuiltIns<span class="token operator">:</span><span class="token string">'usage'</span>
          <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>

      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>ç„¶åéœ€è¦åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥<code>@babel/polyfill</code>å³å¯å®ç°<code>ES6</code>è½¬ä¸º<code>ES5</code></p> <p>Babel åŸç†(<strong>é‡ç‚¹</strong>):</p> <p><strong>TreeShaking</strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last update:</span> <span class="time">7/22/2020, 8:59:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/guide/vue/vue.html" class="prev">
        vue åŸºç¡€éƒ¨åˆ†
      </a></span> <span class="next"><a href="/guide/node/koa.html">
        åŸºç¡€
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.81dd3622.js" defer></script><script src="/assets/js/2.d1b1e148.js" defer></script><script src="/assets/js/32.d42beb3f.js" defer></script><script src="/assets/js/4.a3faee54.js" defer></script>
  </body>
</html>
