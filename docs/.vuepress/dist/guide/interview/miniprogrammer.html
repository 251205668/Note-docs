<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序 | 前端面试知识总结</title>
    <meta name="description" content="自家使用,暂不外传">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.6a4803ab.css" as="style"><link rel="preload" href="/assets/js/app.81dd3622.js" as="script"><link rel="preload" href="/assets/js/2.d1b1e148.js" as="script"><link rel="preload" href="/assets/js/20.30f7288c.js" as="script"><link rel="preload" href="/assets/js/4.a3faee54.js" as="script"><link rel="prefetch" href="/assets/js/10.42124fbe.js"><link rel="prefetch" href="/assets/js/11.bdef2e64.js"><link rel="prefetch" href="/assets/js/12.9c5e83ed.js"><link rel="prefetch" href="/assets/js/13.3db43aaf.js"><link rel="prefetch" href="/assets/js/14.8f2ec86d.js"><link rel="prefetch" href="/assets/js/15.c6286125.js"><link rel="prefetch" href="/assets/js/16.5da2b31d.js"><link rel="prefetch" href="/assets/js/17.c9deef07.js"><link rel="prefetch" href="/assets/js/18.13ed30af.js"><link rel="prefetch" href="/assets/js/19.f1a01180.js"><link rel="prefetch" href="/assets/js/21.477730e4.js"><link rel="prefetch" href="/assets/js/22.ab119ff1.js"><link rel="prefetch" href="/assets/js/23.9bbc22fc.js"><link rel="prefetch" href="/assets/js/24.cb1899b8.js"><link rel="prefetch" href="/assets/js/25.64669f1d.js"><link rel="prefetch" href="/assets/js/26.f3040183.js"><link rel="prefetch" href="/assets/js/27.2938dd4c.js"><link rel="prefetch" href="/assets/js/28.cd87026d.js"><link rel="prefetch" href="/assets/js/29.b92287f4.js"><link rel="prefetch" href="/assets/js/3.103e70cb.js"><link rel="prefetch" href="/assets/js/30.af43d48f.js"><link rel="prefetch" href="/assets/js/31.8c7148f5.js"><link rel="prefetch" href="/assets/js/32.d42beb3f.js"><link rel="prefetch" href="/assets/js/33.223bba8e.js"><link rel="prefetch" href="/assets/js/34.04b12083.js"><link rel="prefetch" href="/assets/js/35.19c65fa0.js"><link rel="prefetch" href="/assets/js/36.a1a664b9.js"><link rel="prefetch" href="/assets/js/37.d2e7a2dd.js"><link rel="prefetch" href="/assets/js/38.4f737159.js"><link rel="prefetch" href="/assets/js/39.fcdeadea.js"><link rel="prefetch" href="/assets/js/40.40a9daf9.js"><link rel="prefetch" href="/assets/js/5.2f32d917.js"><link rel="prefetch" href="/assets/js/6.d92ecc16.js"><link rel="prefetch" href="/assets/js/7.a09f8ef2.js"><link rel="prefetch" href="/assets/js/8.5b00daa2.js"><link rel="prefetch" href="/assets/js/9.9d06f44a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6a4803ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端面试知识总结</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  大型电商
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link">
  vue实现音乐app
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/shop/" class="nav-link">
  大型电商
</a></li><li class="dropdown-item"><!----> <a href="/project/music/" class="nav-link">
  vue实现音乐app
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>目录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">项目介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css基础到进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/css/test.html" class="sidebar-link">移动端问题</a></li><li><a href="/guide/css/layout.html" class="sidebar-link">前端常见布局</a></li><li><a href="/guide/css/alwaysCode.html" class="sidebar-link">常用css片段</a></li><li><a href="/guide/css/iconfont.html" class="sidebar-link">全局stylus配置及使用iconfont</a></li><li><a href="/guide/css/css-skill.html" class="sidebar-link">灵活使用css技巧</a></li><li><a href="/guide/css/code.html" class="sidebar-link">code pratice</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>js基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/js/base.html" class="sidebar-link">基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>js进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/js/higher.html" class="sidebar-link">js??</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MVVM分析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/vue/vue.html" class="sidebar-link">vue 基础部分</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack实战分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js基础到进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试题总结</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/interview/test.html" class="sidebar-link">JS基础</a></li><li><a href="/guide/interview/web-api.html" class="sidebar-link">JS-Web-API</a></li><li><a href="/guide/interview/git.html" class="sidebar-link">Git总结</a></li><li><a href="/guide/interview/broswer.html" class="sidebar-link">浏览器</a></li><li><a href="/guide/interview/miniprogrammer.html" class="active sidebar-link">小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#使用wxs" class="sidebar-link">使用wxs</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#动态计算宽高-是图片自适应高度或宽度" class="sidebar-link">动态计算宽高 是图片自适应高度或宽度</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#间隔轮播设置" class="sidebar-link">间隔轮播设置</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#小程序路由传参-绑定属性值，传递属性值" class="sidebar-link">小程序路由传参(绑定属性值，传递属性值)</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#改变原生组件大小" class="sidebar-link">改变原生组件大小</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#小程序原生picker组件用法" class="sidebar-link">小程序原生picker组件用法</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#去除滚动条" class="sidebar-link">去除滚动条</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#设置页面高度百分之百" class="sidebar-link">设置页面高度百分之百</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#阻止事件冒泡" class="sidebar-link">阻止事件冒泡</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#阻止小程序下拉出现白条" class="sidebar-link">阻止小程序下拉出现白条</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#小程序图片上传" class="sidebar-link">小程序图片上传</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#reduce高级用法" class="sidebar-link">reduce高级用法</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#粘贴板" class="sidebar-link">粘贴板</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#音乐播放" class="sidebar-link">音乐播放</a></li><li class="sidebar-sub-header"><a href="/guide/interview/miniprogrammer.html#预览图片" class="sidebar-link">预览图片</a></li></ul></li><li><a href="/guide/interview/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/guide/interview/project.html" class="sidebar-link">项目总结</a></li><li><a href="/guide/interview/always.html" class="sidebar-link">面试通用回答</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="小程序"><a href="#小程序" class="header-anchor">#</a> 小程序</h1> <h2 id="使用wxs"><a href="#使用wxs" class="header-anchor">#</a> 使用wxs</h2> <p>处理价格是打折还未打折 打折的原价划线 未打折不划线</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mainPrice</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span>discount_price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>discount_price<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> price
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        discount_prce
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">slashPrice</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span>discountpirce</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>discountpirce<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> price
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>wxml</code>调用</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../wxs/price.wxs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>p<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>l-price</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{discountPrice}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">deleted</span> <span class="token attr-name">l-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>discount-pirce<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#888<span class="token punctuation">&quot;</span></span> <span class="token attr-name">unit-size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>22<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>22<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{p.slashPrice(price,discountPrice)}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>l-price</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="动态计算宽高-是图片自适应高度或宽度"><a href="#动态计算宽高-是图片自适应高度或宽度" class="header-anchor">#</a> <strong>动态计算宽高 是图片自适应高度或宽度</strong></h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>image bind<span class="token operator">:</span>Load<span class="token operator">=</span><span class="token string">&quot;onImgLoad&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width:{{w}}rpx;heiht:{{h}}rpx&quot;</span><span class="token operator">&gt;</span>
<span class="token function">onImgLoad</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>width<span class="token punctuation">,</span>height<span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        w<span class="token operator">:</span><span class="token number">340</span>rpx<span class="token punctuation">;</span>
        h<span class="token operator">:</span><span class="token number">340</span>rpx<span class="token operator">*</span>height<span class="token operator">/</span>width
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者直接使用mode</span>
</code></pre></div><h2 id="间隔轮播设置"><a href="#间隔轮播设置" class="header-anchor">#</a> 间隔轮播设置</h2> <blockquote><p>采坑：定义组件一定在index.json加上:<code>components:true</code></p> <p>小程序wxs导出function 不能再module.exports={}简写</p> <p>轮播图设置间距  <code>previous-margin``next-margin</code></p></blockquote> <p>样式代码</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">1. swiper居中
2. image设置为块状
3. 设置swiper属性
.swiper</span><span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 360rpx<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #ffffff
<span class="token punctuation">}</span>
<span class="token selector">swiper-item</span><span class="token punctuation">{</span>
 <span class="token property">text-align</span><span class="token punctuation">:</span> center
<span class="token punctuation">}</span>

<span class="token selector">.swiper-img</span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 610rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 360rpx<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10rpx
<span class="token punctuation">}</span>
</code></pre></div><h2 id="小程序路由传参-绑定属性值，传递属性值"><a href="#小程序路由传参-绑定属性值，传递属性值" class="header-anchor">#</a> <strong>小程序路由传参</strong>(绑定属性值，传递属性值)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> 设置传递参数属性 dom上绑定data<span class="token operator">-</span>属性名
拿到属性 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">e.currentTarget.dataset.id</span><span class="token template-punctuation string">`</span></span>

变量设置只能为小写 大写会报错
<span class="token number">2.</span> 绑定点击事件跳转路由
wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages/detail/index?pid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
拿到参数： 子路由通过
<span class="token function-variable function">onLoad</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">options.pid</span><span class="token template-punctuation string">`</span></span>拿到传递的参数


业务组件可以这样写 但考虑到通用性 组件里面不应该包含路由跳转事件
所以可以向外触发事件 有父组件进行路由跳转
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggleEvent</span><span class="token punctuation">(</span><span class="token string">'changeNavigate'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>params<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>如果传递的参数为对象</strong></p> <p>先转为字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>item<span class="token punctuation">)</span>
wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages/detail/index?detail=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// 接收再转回来</span>
<span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>obj<span class="token punctuation">)</span>
</code></pre></div><h2 id="改变原生组件大小"><a href="#改变原生组件大小" class="header-anchor">#</a> 改变原生组件大小</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">绑定class 进行缩放
.radio</span><span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">scale</span><span class="token punctuation">(</span>.7<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="小程序原生picker组件用法"><a href="#小程序原生picker组件用法" class="header-anchor">#</a> 小程序原生<code>picker</code>组件用法</h2> <p><img src="https://image.yangxiansheng.top/img/20200510165020.png?imagelist" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>picker bin<span class="token operator">:</span>change<span class="token operator">=</span><span class="token string">&quot;binPicekerChange&quot;</span> range<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">&quot;nickName&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;{{index}}&quot;</span> range<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>personList<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token comment">// js</span>
data<span class="token operator">:</span><span class="token punctuation">{</span>
    personList<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">&quot;nickName:&quot;</span>小名<span class="token string">&quot;,&quot;</span>sex<span class="token string">&quot;:&quot;</span><span class="token number">0</span>&quot;<span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token string">&quot;nickName:&quot;</span>小民<span class="token string">&quot;,&quot;</span>sex<span class="token string">&quot;:&quot;</span><span class="token number">1</span>&quot;<span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="去除滚动条"><a href="#去除滚动条" class="header-anchor">#</a> 去除滚动条</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">:</span><span class="token operator">:</span>webKit<span class="token operator">-</span>scrollbar<span class="token punctuation">{</span>
    width<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>
    color<span class="token operator">:</span>transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="设置页面高度百分之百"><a href="#设置页面高度百分之百" class="header-anchor">#</a> 设置页面高度百分之百</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.container</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span>flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">page</span> <span class="token punctuation">{</span> <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>  // <span class="token property">或者height</span><span class="token punctuation">:</span> 100% <span class="token punctuation">}</span>
</code></pre></div><h2 id="阻止事件冒泡"><a href="#阻止事件冒泡" class="header-anchor">#</a> 阻止事件冒泡</h2> <p><code>catchtap=&quot;&quot;</code></p> <h2 id="阻止小程序下拉出现白条"><a href="#阻止小程序下拉出现白条" class="header-anchor">#</a> 阻止小程序下拉出现白条</h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// app.json中配置</span>
<span class="token property">&quot;window&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="小程序图片上传"><a href="#小程序图片上传" class="header-anchor">#</a> 小程序图片上传</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleCancelPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>dbId<span class="token punctuation">;</span>
        wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          count<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 默认9</span>
          sizeType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 可以指定是原图还是压缩图，默认二者都有</span>
          sourceType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'camera'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 可以指定来源是相册还是相机，默认二者都有</span>
          <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 返回选定照片的本地文件路径列表，tempFilePath可以作为img标签的src属性显示图片</span>
            <span class="token keyword">var</span> tempFilePaths <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">;</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                src<span class="token operator">:</span> tempFilePaths
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">upload</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>tempFilePaths<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
然后一个封装好的方法
<span class="token keyword">function</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> path<span class="token punctuation">,</span>way<span class="token punctuation">,</span>id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
  wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    icon<span class="token operator">:</span> <span class="token string">&quot;loading&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;正在上传&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>path<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wx<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          url<span class="token operator">:</span> api<span class="token punctuation">.</span>CancelImg<span class="token punctuation">,</span>
          filePath<span class="token operator">:</span> path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>          
          name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
          header<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multipart/form-data&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            test<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'cancelImg'</span><span class="token punctuation">,</span>test<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
              wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
                content<span class="token operator">:</span> <span class="token string">'上传失败'</span><span class="token punctuation">,</span>
                showCancel<span class="token operator">:</span> <span class="token boolean">false</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
                    content<span class="token operator">:</span> <span class="token string">'上传成功'</span><span class="token punctuation">,</span>
                    showCancel<span class="token operator">:</span> <span class="token boolean">false</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span> 
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
              content<span class="token operator">:</span> <span class="token string">'上传失败'</span><span class="token punctuation">,</span>
              showCancel<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            wx<span class="token punctuation">.</span><span class="token function">hideToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//隐藏Toast</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
这个是多个图片上传的方法，单个图片上传的话，把循环去掉就好。主要是因为微信官方默认的就是一次上传一张图片这个很蛋疼。只能这么搞了。。。

</code></pre></div><h2 id="reduce高级用法"><a href="#reduce高级用法" class="header-anchor">#</a> reduce高级用法</h2> <p>传入参数<code>上一次回调结果</code>，<code>当前处理的元素</code>,<code>当前处理的下标</code>,<code>数组</code></p> <ol><li><p>计算总和</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

打印结果：
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">3</span> <span class="token number">3</span> <span class="token number">2</span>
<span class="token number">6</span> <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">10</span>
</code></pre></div></li> <li><p>设置上一次回调的初始值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span>  arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span>，<span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//注意这里设置了初始值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

打印结果：
<span class="token number">0</span> <span class="token number">1</span> <span class="token number">0</span>
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">3</span> <span class="token number">3</span> <span class="token number">2</span>
<span class="token number">6</span> <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">10</span>
</code></pre></div></li> <li><p>实战，计算订单总价格</p> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>orderItems<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">// 返回 回调+item.finalPrice 即为总价格</span>
            <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token function">accAdd</span><span class="token punctuation">(</span>pre <span class="token punctuation">,</span>item<span class="token punctuation">.</span>finalPrice<span class="token punctuation">)</span>
            <span class="token keyword">return</span> price
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>加入判断条件</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">getSatisfactionCount</span><span class="token punctuation">(</span><span class="token parameter">coupons</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> coupons<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> coupon</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>coupon<span class="token punctuation">.</span>satisfaction <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> pre <span class="token operator">+</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> pre
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li></ol> <h2 id="粘贴板"><a href="#粘贴板" class="header-anchor">#</a> 粘贴板</h2> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">onCopyGit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index
    wx<span class="token punctuation">.</span><span class="token function">setClipboardData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>clipborardData<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="音乐播放"><a href="#音乐播放" class="header-anchor">#</a> 音乐播放</h2> <h2 id="预览图片"><a href="#预览图片" class="header-anchor">#</a> 预览图片</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cursrc<span class="token operator">=</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>cursrc
    <span class="token keyword">const</span> ImagList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>spu<span class="token punctuation">.</span>spu_img_list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>img<span class="token punctuation">)</span>
    wx<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      current<span class="token operator">:</span> cursrc<span class="token punctuation">,</span> <span class="token comment">// 当前显示图片的http链接</span>
      urls<span class="token operator">:</span>ImagList <span class="token comment">// 需要预览的图片http链接列表</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last update:</span> <span class="time">7/7/2020, 9:47:58 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/interview/broswer.html" class="prev">
        浏览器
      </a></span> <span class="next"><a href="/guide/interview/Vue.html">
        Vue
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.81dd3622.js" defer></script><script src="/assets/js/2.d1b1e148.js" defer></script><script src="/assets/js/20.30f7288c.js" defer></script><script src="/assets/js/4.a3faee54.js" defer></script>
  </body>
</html>
